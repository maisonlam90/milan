2025-08-18T04:32:47.474525Z ERROR axum::core::auth: ‚ùå Middleware decode JWT l·ªói: Error(ExpiredSignature)
2025-08-18T04:32:47.538690Z ERROR axum::core::auth: ‚ùå Middleware decode JWT l·ªói: Error(ExpiredSignature)
2025-08-18T13:31:58.592356Z  WARN sqlx_postgres::options::parse: ignoring unrecognized connect parameter key=ssl value=true
2025-08-18T13:31:58.851736Z DEBUG rustls::client::hs: No cached session for DnsName("ap-southeast-1.e4c6174f-6538-4e47-93bf-0a2503819047.aws.yugabyte.cloud")    
2025-08-18T13:31:58.853139Z DEBUG rustls::client::hs: Not resuming any session    
2025-08-18T13:31:58.947849Z DEBUG rustls::client::hs: Using ciphersuite TLS13_AES_256_GCM_SHA384    
2025-08-18T13:31:58.948082Z DEBUG rustls::client::tls13: Not resuming    
2025-08-18T13:31:58.948618Z DEBUG rustls::client::tls13: TLS1.3 encrypted extensions: []    
2025-08-18T13:31:58.948734Z DEBUG rustls::client::hs: ALPN protocol is None    
2025-08-18T13:31:58.948787Z DEBUG rustls::client::tls13: Got CertificateRequest CertificateRequestPayloadTLS13 { context: , extensions: [SignatureAlgorithms([ECDSA_NISTP256_SHA256, ECDSA_NISTP384_SHA384, ECDSA_NISTP521_SHA512, ED25519, ED448, Unknown(2057), Unknown(2058), Unknown(2059), RSA_PSS_SHA256, RSA_PSS_SHA384, RSA_PSS_SHA512, RSA_PKCS1_SHA256, RSA_PKCS1_SHA384, RSA_PKCS1_SHA512, Unknown(771), Unknown(769)]), AuthorityNames([DistinguishedName(305b31153013060355040a130c597567616279746520496e633142304006035504030c392a2e65346336313734662d363533382d346534372d393362662d3061323530333831393034372e6177732e79756761627974652e636c6f7564), DistinguishedName(30818b310b3009060355040613025553310b3009060355040813024341311230100603550407130953756e6e7976616c6531153013060355040a130c597567616279746520496e6331173015060355040b130e597567616279746520436c6f7564312b302906035504031322597567616279746520436c6f7564205375626f7264696e6174652043412070726f64), DistinguishedName(308184310b3009060355040613025553310b3009060355040813024341311230100603550407130953756e6e7976616c6531153013060355040a130c597567616279746520496e6331173015060355040b130e597567616279746520436c6f7564312430220603550403131b597567616279746520436c6f756420526f6f742043412070726f64)])] }    
2025-08-18T13:31:58.949401Z DEBUG rustls::client::common: Client auth requested but no cert/sigscheme available    
2025-08-18T13:32:04.413294Z DEBUG axum::core::auth: üîê Middleware nh·∫≠n request: /create
2025-08-18T13:32:04.652491Z DEBUG sqlx::query: summary="INSERT INTO contact ( ‚Ä¶" db.statement="\n\nINSERT INTO\n  contact (\n    tenant_id,\n    id,\n    is_company,\n    parent_id,\n    name,\n    display_name,\n    email,\n    phone,\n    mobile,\n    website,\n    street,\n    street2,\n    city,\n    state,\n    zip,\n    country_code,\n    notes,\n    tags_cached\n  )\nVALUES\n  (\n    $1,\n    $2,\n    $3,\n    $4,\n    $5,\n    $6,\n    $7,\n    $8,\n    $9,\n    $10,\n    $11,\n    $12,\n    $13,\n    $14,\n    $15,\n    $16,\n    $17,\n    $18\n  )\n" rows_affected=0 rows_returned=0 elapsed=141.602796ms elapsed_secs=0.141602796
2025-08-18T13:35:47.528641Z DEBUG axum::core::auth: üîê Middleware nh·∫≠n request: /create
2025-08-18T13:35:47.675856Z DEBUG sqlx::query: summary="INSERT INTO contact ( ‚Ä¶" db.statement="\n\nINSERT INTO\n  contact (\n    tenant_id,\n    id,\n    is_company,\n    parent_id,\n    name,\n    display_name,\n    email,\n    phone,\n    mobile,\n    website,\n    street,\n    street2,\n    city,\n    state,\n    zip,\n    country_code,\n    notes,\n    tags_cached\n  )\nVALUES\n  (\n    $1,\n    $2,\n    $3,\n    $4,\n    $5,\n    $6,\n    $7,\n    $8,\n    $9,\n    $10,\n    $11,\n    $12,\n    $13,\n    $14,\n    $15,\n    $16,\n    $17,\n    $18\n  )\n" rows_affected=0 rows_returned=0 elapsed=46.973966ms elapsed_secs=0.046973966
2025-08-18T13:36:08.709519Z  WARN sqlx_postgres::options::parse: ignoring unrecognized connect parameter key=ssl value=true
2025-08-18T13:36:08.817242Z DEBUG rustls::client::hs: No cached session for DnsName("ap-southeast-1.e4c6174f-6538-4e47-93bf-0a2503819047.aws.yugabyte.cloud")    
2025-08-18T13:36:08.818653Z DEBUG rustls::client::hs: Not resuming any session    
2025-08-18T13:36:08.918529Z DEBUG rustls::client::hs: Using ciphersuite TLS13_AES_256_GCM_SHA384    
2025-08-18T13:36:08.918813Z DEBUG rustls::client::tls13: Not resuming    
2025-08-18T13:36:08.919052Z DEBUG rustls::client::tls13: TLS1.3 encrypted extensions: []    
2025-08-18T13:36:08.919071Z DEBUG rustls::client::hs: ALPN protocol is None    
2025-08-18T13:36:08.919100Z DEBUG rustls::client::tls13: Got CertificateRequest CertificateRequestPayloadTLS13 { context: , extensions: [SignatureAlgorithms([ECDSA_NISTP256_SHA256, ECDSA_NISTP384_SHA384, ECDSA_NISTP521_SHA512, ED25519, ED448, Unknown(2057), Unknown(2058), Unknown(2059), RSA_PSS_SHA256, RSA_PSS_SHA384, RSA_PSS_SHA512, RSA_PKCS1_SHA256, RSA_PKCS1_SHA384, RSA_PKCS1_SHA512, Unknown(771), Unknown(769)]), AuthorityNames([DistinguishedName(305b31153013060355040a130c597567616279746520496e633142304006035504030c392a2e65346336313734662d363533382d346534372d393362662d3061323530333831393034372e6177732e79756761627974652e636c6f7564), DistinguishedName(30818b310b3009060355040613025553310b3009060355040813024341311230100603550407130953756e6e7976616c6531153013060355040a130c597567616279746520496e6331173015060355040b130e597567616279746520436c6f7564312b302906035504031322597567616279746520436c6f7564205375626f7264696e6174652043412070726f64), DistinguishedName(308184310b3009060355040613025553310b3009060355040813024341311230100603550407130953756e6e7976616c6531153013060355040a130c597567616279746520496e6331173015060355040b130e597567616279746520436c6f7564312430220603550403131b597567616279746520436c6f756420526f6f742043412070726f64)])] }    
2025-08-18T13:36:08.919488Z DEBUG rustls::client::common: Client auth requested but no cert/sigscheme available    
2025-08-18T13:36:18.160834Z DEBUG axum::core::auth: üîê Middleware nh·∫≠n request: /create
2025-08-18T13:36:18.459836Z DEBUG sqlx::query: summary="INSERT INTO contact ( ‚Ä¶" db.statement="\n\nINSERT INTO\n  contact (\n    tenant_id,\n    id,\n    is_company,\n    parent_id,\n    name,\n    display_name,\n    email,\n    phone,\n    mobile,\n    website,\n    street,\n    street2,\n    city,\n    state,\n    zip,\n    country_code,\n    notes,\n    tags_cached,\n    created_by,\n    assignee_id,\n    shared_with\n  )\nVALUES\n  (\n    $1,\n    $2,\n    $3,\n    $4,\n    $5,\n    $6,\n    $7,\n    $8,\n    $9,\n    $10,\n    $11,\n    $12,\n    $13,\n    $14,\n    $15,\n    $16,\n    $17,\n    $18,\n    $19,\n    $20,\n    $21\n  )\n" rows_affected=1 rows_returned=0 elapsed=192.74525ms elapsed_secs=0.19274525
2025-08-18T13:36:18.510300Z DEBUG sqlx::query: summary="COMMIT" db.statement="" rows_affected=0 rows_returned=0 elapsed=50.315922ms elapsed_secs=0.050315922
2025-08-18T13:36:18.533949Z DEBUG axum::core::auth: üîê Middleware nh·∫≠n request: /c09cd73d-89e1-474f-b20a-4a07aefce14f
2025-08-18T13:36:18.557256Z DEBUG axum::core::auth: üîê Middleware nh·∫≠n request: /c09cd73d-89e1-474f-b20a-4a07aefce14f
2025-08-18T13:36:18.557842Z DEBUG axum::core::auth: üîê Middleware nh·∫≠n request: /list?is_company=true&limit=200
2025-08-18T13:36:18.763362Z DEBUG rustls::client::hs: No cached session for DnsName("ap-southeast-1.e4c6174f-6538-4e47-93bf-0a2503819047.aws.yugabyte.cloud")    
2025-08-18T13:36:18.764495Z DEBUG rustls::client::hs: Not resuming any session    
2025-08-18T13:36:18.764974Z DEBUG rustls::client::hs: No cached session for DnsName("ap-southeast-1.e4c6174f-6538-4e47-93bf-0a2503819047.aws.yugabyte.cloud")    
2025-08-18T13:36:18.765365Z DEBUG rustls::client::hs: Not resuming any session    
2025-08-18T13:36:18.768082Z DEBUG rustls::client::hs: No cached session for DnsName("ap-southeast-1.e4c6174f-6538-4e47-93bf-0a2503819047.aws.yugabyte.cloud")    
2025-08-18T13:36:18.769025Z DEBUG rustls::client::hs: Not resuming any session    
2025-08-18T13:36:18.861400Z DEBUG rustls::client::hs: Using ciphersuite TLS13_AES_256_GCM_SHA384    
2025-08-18T13:36:18.863114Z DEBUG rustls::client::tls13: Not resuming    
2025-08-18T13:36:18.863320Z DEBUG rustls::client::tls13: TLS1.3 encrypted extensions: []    
2025-08-18T13:36:18.863336Z DEBUG rustls::client::hs: ALPN protocol is None    
2025-08-18T13:36:18.863361Z DEBUG rustls::client::tls13: Got CertificateRequest CertificateRequestPayloadTLS13 { context: , extensions: [SignatureAlgorithms([ECDSA_NISTP256_SHA256, ECDSA_NISTP384_SHA384, ECDSA_NISTP521_SHA512, ED25519, ED448, Unknown(2057), Unknown(2058), Unknown(2059), RSA_PSS_SHA256, RSA_PSS_SHA384, RSA_PSS_SHA512, RSA_PKCS1_SHA256, RSA_PKCS1_SHA384, RSA_PKCS1_SHA512, Unknown(771), Unknown(769)]), AuthorityNames([DistinguishedName(305b31153013060355040a130c597567616279746520496e633142304006035504030c392a2e65346336313734662d363533382d346534372d393362662d3061323530333831393034372e6177732e79756761627974652e636c6f7564), DistinguishedName(30818b310b3009060355040613025553310b3009060355040813024341311230100603550407130953756e6e7976616c6531153013060355040a130c597567616279746520496e6331173015060355040b130e597567616279746520436c6f7564312b302906035504031322597567616279746520436c6f7564205375626f7264696e6174652043412070726f64), DistinguishedName(308184310b3009060355040613025553310b3009060355040813024341311230100603550407130953756e6e7976616c6531153013060355040a130c597567616279746520496e6331173015060355040b130e597567616279746520436c6f7564312430220603550403131b597567616279746520436c6f756420526f6f742043412070726f64)])] }    
2025-08-18T13:36:18.863435Z DEBUG rustls::client::common: Client auth requested but no cert/sigscheme available    
2025-08-18T13:36:18.864118Z DEBUG rustls::client::hs: Using ciphersuite TLS13_AES_256_GCM_SHA384    
2025-08-18T13:36:18.864145Z DEBUG rustls::client::tls13: Not resuming    
2025-08-18T13:36:18.864727Z DEBUG rustls::client::tls13: TLS1.3 encrypted extensions: []    
2025-08-18T13:36:18.864752Z DEBUG rustls::client::hs: ALPN protocol is None    
2025-08-18T13:36:18.864783Z DEBUG rustls::client::tls13: Got CertificateRequest CertificateRequestPayloadTLS13 { context: , extensions: [SignatureAlgorithms([ECDSA_NISTP256_SHA256, ECDSA_NISTP384_SHA384, ECDSA_NISTP521_SHA512, ED25519, ED448, Unknown(2057), Unknown(2058), Unknown(2059), RSA_PSS_SHA256, RSA_PSS_SHA384, RSA_PSS_SHA512, RSA_PKCS1_SHA256, RSA_PKCS1_SHA384, RSA_PKCS1_SHA512, Unknown(771), Unknown(769)]), AuthorityNames([DistinguishedName(305b31153013060355040a130c597567616279746520496e633142304006035504030c392a2e65346336313734662d363533382d346534372d393362662d3061323530333831393034372e6177732e79756761627974652e636c6f7564), DistinguishedName(30818b310b3009060355040613025553310b3009060355040813024341311230100603550407130953756e6e7976616c6531153013060355040a130c597567616279746520496e6331173015060355040b130e597567616279746520436c6f7564312b302906035504031322597567616279746520436c6f7564205375626f7264696e6174652043412070726f64), DistinguishedName(308184310b3009060355040613025553310b3009060355040813024341311230100603550407130953756e6e7976616c6531153013060355040a130c597567616279746520496e6331173015060355040b130e597567616279746520436c6f7564312430220603550403131b597567616279746520436c6f756420526f6f742043412070726f64)])] }    
2025-08-18T13:36:18.864884Z DEBUG rustls::client::common: Client auth requested but no cert/sigscheme available    
2025-08-18T13:36:18.875464Z DEBUG rustls::client::hs: Using ciphersuite TLS13_AES_256_GCM_SHA384    
2025-08-18T13:36:18.875707Z DEBUG rustls::client::tls13: Not resuming    
2025-08-18T13:36:18.875894Z DEBUG rustls::client::tls13: TLS1.3 encrypted extensions: []    
2025-08-18T13:36:18.875907Z DEBUG rustls::client::hs: ALPN protocol is None    
2025-08-18T13:36:18.875931Z DEBUG rustls::client::tls13: Got CertificateRequest CertificateRequestPayloadTLS13 { context: , extensions: [SignatureAlgorithms([ECDSA_NISTP256_SHA256, ECDSA_NISTP384_SHA384, ECDSA_NISTP521_SHA512, ED25519, ED448, Unknown(2057), Unknown(2058), Unknown(2059), RSA_PSS_SHA256, RSA_PSS_SHA384, RSA_PSS_SHA512, RSA_PKCS1_SHA256, RSA_PKCS1_SHA384, RSA_PKCS1_SHA512, Unknown(771), Unknown(769)]), AuthorityNames([DistinguishedName(305b31153013060355040a130c597567616279746520496e633142304006035504030c392a2e65346336313734662d363533382d346534372d393362662d3061323530333831393034372e6177732e79756761627974652e636c6f7564), DistinguishedName(30818b310b3009060355040613025553310b3009060355040813024341311230100603550407130953756e6e7976616c6531153013060355040a130c597567616279746520496e6331173015060355040b130e597567616279746520436c6f7564312b302906035504031322597567616279746520436c6f7564205375626f7264696e6174652043412070726f64), DistinguishedName(308184310b3009060355040613025553310b3009060355040813024341311230100603550407130953756e6e7976616c6531153013060355040a130c597567616279746520496e6331173015060355040b130e597567616279746520436c6f7564312430220603550403131b597567616279746520436c6f756420526f6f742043412070726f64)])] }    
2025-08-18T13:36:18.876541Z DEBUG rustls::client::common: Client auth requested but no cert/sigscheme available    
2025-08-18T13:36:19.188656Z DEBUG sqlx::query: summary="SELECT id, is_company, parent_id, ‚Ä¶" db.statement="\n\nSELECT\n  id,\n  is_company,\n  parent_id,\n  name,\n  display_name,\n  email,\n  phone,\n  mobile,\n  website,\n  street,\n  street2,\n  city,\n  state,\n  zip,\n  country_code,\n  notes,\n  NULLIF(tags_cached, '') AS \"tags_cached?: String\",\n  created_at,\n  updated_at\nFROM\n  contact\nWHERE\n  tenant_id = $1\n  AND id = $2\n" rows_affected=0 rows_returned=1 elapsed=187.751868ms elapsed_secs=0.187751868
2025-08-18T13:36:19.207402Z DEBUG sqlx::query: summary="SELECT id, is_company, parent_id, ‚Ä¶" db.statement="\n\nSELECT\n  id,\n  is_company,\n  parent_id,\n  name,\n  display_name,\n  email,\n  phone,\n  mobile,\n  website,\n  street,\n  street2,\n  city,\n  state,\n  zip,\n  country_code,\n  notes,\n  NULLIF(tags_cached, '') AS \"tags_cached?: String\",\n  created_at,\n  updated_at\nFROM\n  contact\nWHERE\n  tenant_id = $1\n  AND id = $2\n" rows_affected=0 rows_returned=1 elapsed=192.916038ms elapsed_secs=0.192916038
2025-08-18T13:36:19.220464Z DEBUG sqlx::query: summary="SELECT id, COALESCE(NULLIF(name,''), display_name, ‚Ä¶" db.statement="\n\nSELECT\n  id,\n  COALESCE(\n    NULLIF(name, ''),\n    display_name,\n    email,\n    phone,\n    '(kh√¥ng t√™n)'\n  ) AS \"name!: String\",\n  display_name,\n  email,\n  phone,\n  is_company,\n  NULLIF(tags_cached, '') AS \"tags?: String\"\nFROM\n  contact\nWHERE\n  tenant_id = $1\n  AND (\n    $2 :: bool IS NULL\n    OR is_company = $2\n  )\nORDER BY\n  created_at DESC\nLIMIT\n  $3 OFFSET $4\n" rows_affected=0 rows_returned=0 elapsed=218.297524ms elapsed_secs=0.218297524
2025-08-18T13:37:54.979738Z DEBUG axum::core::auth: üîê Middleware nh·∫≠n request: /list
2025-08-18T13:37:55.190355Z DEBUG sqlx::query: summary="SELECT id, COALESCE(NULLIF(name,''), display_name, ‚Ä¶" db.statement="\n\nSELECT\n  id,\n  COALESCE(\n    NULLIF(name, ''),\n    display_name,\n    email,\n    phone,\n    '(kh√¥ng t√™n)'\n  ) AS \"name!: String\",\n  display_name,\n  email,\n  phone,\n  is_company,\n  NULLIF(tags_cached, '') AS \"tags?: String\"\nFROM\n  contact\nWHERE\n  tenant_id = $1\n  AND (\n    $2 :: bool IS NULL\n    OR is_company = $2\n  )\nORDER BY\n  created_at DESC\nLIMIT\n  $3 OFFSET $4\n" rows_affected=1 rows_returned=1 elapsed=148.351173ms elapsed_secs=0.148351173
2025-08-18T13:37:55.196634Z DEBUG axum::core::auth: üîê Middleware nh·∫≠n request: /list
2025-08-18T13:37:55.378349Z DEBUG sqlx::query: summary="SELECT id, COALESCE(NULLIF(name,''), display_name, ‚Ä¶" db.statement="\n\nSELECT\n  id,\n  COALESCE(\n    NULLIF(name, ''),\n    display_name,\n    email,\n    phone,\n    '(kh√¥ng t√™n)'\n  ) AS \"name!: String\",\n  display_name,\n  email,\n  phone,\n  is_company,\n  NULLIF(tags_cached, '') AS \"tags?: String\"\nFROM\n  contact\nWHERE\n  tenant_id = $1\n  AND (\n    $2 :: bool IS NULL\n    OR is_company = $2\n  )\nORDER BY\n  created_at DESC\nLIMIT\n  $3 OFFSET $4\n" rows_affected=1 rows_returned=1 elapsed=129.519513ms elapsed_secs=0.129519513
2025-08-18T13:38:06.145733Z DEBUG axum::core::auth: üîê Middleware nh·∫≠n request: /create
2025-08-18T13:38:31.643673Z DEBUG axum::core::auth: üîê Middleware nh·∫≠n request: /create
2025-08-18T13:38:31.893552Z DEBUG sqlx::query: summary="INSERT INTO loan_contract ( ‚Ä¶" db.statement="\n\nINSERT INTO\n  loan_contract (\n    tenant_id,\n    contact_id,\n    name,\n    interest_rate,\n    term_months,\n    date_start,\n    date_end,\n    collateral_description,\n    collateral_value,\n    storage_fee_rate,\n    storage_fee,\n    current_principal,\n    current_interest,\n    accumulated_interest,\n    total_paid_interest,\n    total_settlement_amount,\n    state\n  )\nVALUES\n  (\n    $1,\n    $2,\n    $3,\n    $4,\n    $5,\n    $6,\n    $7,\n    $8,\n    $9,\n    $10,\n    $11,\n    $12,\n    $13,\n    $14,\n    $15,\n    $16,\n    $17\n  )\nRETURNING\n  id,\n  tenant_id,\n  contact_id,\n  name,\n  interest_rate,\n  term_months,\n  date_start,\n  date_end,\n  collateral_description,\n  collateral_value,\n  storage_fee_rate,\n  storage_fee,\n  current_principal,\n  current_interest,\n  accumulated_interest,\n  total_paid_interest,\n  total_settlement_amount,\n  state,\n  created_at,\n  updated_at\n" rows_affected=0 rows_returned=0 elapsed=141.015777ms elapsed_secs=0.141015777
2025-08-18T13:38:31.895530Z ERROR axum::module::loan::handler: ‚ùå L·ªói khi t·∫°o h·ª£p ƒë·ªìng vay: Database(PgDatabaseError { severity: Error, code: "23502", message: "null value in column \"created_by\" violates not-null constraint", detail: Some("Failing row contains (00000000-0000-0000-0000-000000000000, 5c275aff-5bed-46b4-b49d-317900845c1d, c09cd73d-89e1-474f-b20a-4a07aefce14f, 3245, 34534, 345, 2025-07-26 17:00:00+00, 2025-08-27 17:00:00+00, 345, 345, 0, 0, 0, 0, 0, 0, 0, draft, 2025-08-18 13:38:31.764069+00, 2025-08-18 13:38:31.764069+00, null, null, {})."), hint: None, position: None, where: None, schema: Some("public"), table: Some("loan_contract"), column: Some("created_by"), data_type: None, constraint: None, file: Some("execMain.c"), line: Some(2093), routine: Some("ExecConstraints") })
2025-08-18T13:59:12.074691Z  WARN sqlx_postgres::options::parse: ignoring unrecognized connect parameter key=ssl value=true
2025-08-18T13:59:12.279333Z DEBUG rustls::client::hs: No cached session for DnsName("ap-southeast-1.e4c6174f-6538-4e47-93bf-0a2503819047.aws.yugabyte.cloud")    
2025-08-18T13:59:12.279682Z DEBUG rustls::client::hs: Not resuming any session    
2025-08-18T13:59:12.373019Z DEBUG rustls::client::hs: Using ciphersuite TLS13_AES_256_GCM_SHA384    
2025-08-18T13:59:12.373475Z DEBUG rustls::client::tls13: Not resuming    
2025-08-18T13:59:12.373974Z DEBUG rustls::client::tls13: TLS1.3 encrypted extensions: []    
2025-08-18T13:59:12.374458Z DEBUG rustls::client::hs: ALPN protocol is None    
2025-08-18T13:59:12.374529Z DEBUG rustls::client::tls13: Got CertificateRequest CertificateRequestPayloadTLS13 { context: , extensions: [SignatureAlgorithms([ECDSA_NISTP256_SHA256, ECDSA_NISTP384_SHA384, ECDSA_NISTP521_SHA512, ED25519, ED448, Unknown(2057), Unknown(2058), Unknown(2059), RSA_PSS_SHA256, RSA_PSS_SHA384, RSA_PSS_SHA512, RSA_PKCS1_SHA256, RSA_PKCS1_SHA384, RSA_PKCS1_SHA512, Unknown(771), Unknown(769)]), AuthorityNames([DistinguishedName(305b31153013060355040a130c597567616279746520496e633142304006035504030c392a2e65346336313734662d363533382d346534372d393362662d3061323530333831393034372e6177732e79756761627974652e636c6f7564), DistinguishedName(30818b310b3009060355040613025553310b3009060355040813024341311230100603550407130953756e6e7976616c6531153013060355040a130c597567616279746520496e6331173015060355040b130e597567616279746520436c6f7564312b302906035504031322597567616279746520436c6f7564205375626f7264696e6174652043412070726f64), DistinguishedName(308184310b3009060355040613025553310b3009060355040813024341311230100603550407130953756e6e7976616c6531153013060355040a130c597567616279746520496e6331173015060355040b130e597567616279746520436c6f7564312430220603550403131b597567616279746520436c6f756420526f6f742043412070726f64)])] }    
2025-08-18T13:59:12.374593Z DEBUG rustls::client::common: Client auth requested but no cert/sigscheme available    
2025-08-18T13:59:18.109358Z DEBUG axum::core::auth: üîê Middleware nh·∫≠n request: /create
2025-08-18T13:59:18.417515Z DEBUG sqlx::query: summary="INSERT INTO loan_contract ( ‚Ä¶" db.statement="\n\nINSERT INTO\n  loan_contract (\n    tenant_id,\n    contact_id,\n    name,\n    interest_rate,\n    term_months,\n    date_start,\n    date_end,\n    collateral_description,\n    collateral_value,\n    storage_fee_rate,\n    storage_fee,\n    current_principal,\n    current_interest,\n    accumulated_interest,\n    total_paid_interest,\n    total_settlement_amount,\n    state,\n    created_by,\n    assignee_id,\n    shared_with\n  )\nVALUES\n  (\n    $1,\n    $2,\n    $3,\n    $4,\n    $5,\n    $6,\n    $7,\n    $8,\n    $9,\n    $10,\n    $11,\n    $12,\n    $13,\n    $14,\n    $15,\n    $16,\n    $17,\n    $18,\n    $19,\n    $20\n  )\nRETURNING\n  id,\n  tenant_id,\n  contact_id,\n  name,\n  interest_rate,\n  term_months,\n  date_start,\n  date_end,\n  collateral_description,\n  collateral_value,\n  storage_fee_rate,\n  storage_fee,\n  current_principal,\n  current_interest,\n  accumulated_interest,\n  total_paid_interest,\n  total_settlement_amount,\n  state,\n  created_at,\n  updated_at,\n  created_by,\n  assignee_id,\n  shared_with\n" rows_affected=0 rows_returned=1 elapsed=205.254145ms elapsed_secs=0.205254145
2025-08-18T13:59:18.544066Z DEBUG sqlx::query: summary="INSERT INTO loan_transaction ( ‚Ä¶" db.statement="\n\nINSERT INTO\n  loan_transaction (\n    contract_id,\n    tenant_id,\n    contact_id,\n    transaction_type,\n    amount,\n    \"date\",\n    note,\n    created_by,\n    assignee_id,\n    shared_with\n  )\nVALUES\n  ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10)\n" rows_affected=1 rows_returned=0 elapsed=123.565107ms elapsed_secs=0.123565107
2025-08-18T13:59:18.591282Z DEBUG sqlx::query: summary="COMMIT" db.statement="" rows_affected=0 rows_returned=0 elapsed=47.035231ms elapsed_secs=0.047035231
2025-08-18T13:59:18.597095Z DEBUG axum::core::auth: üîê Middleware nh·∫≠n request: /ed8c286a-c68b-49cb-b2ca-3a0ddf17573b
2025-08-18T13:59:18.617918Z DEBUG axum::core::auth: üîê Middleware nh·∫≠n request: /list
2025-08-18T13:59:18.705834Z DEBUG rustls::client::hs: No cached session for DnsName("ap-southeast-1.e4c6174f-6538-4e47-93bf-0a2503819047.aws.yugabyte.cloud")    
2025-08-18T13:59:18.706955Z DEBUG rustls::client::hs: Not resuming any session    
2025-08-18T13:59:18.806764Z DEBUG rustls::client::hs: No cached session for DnsName("ap-southeast-1.e4c6174f-6538-4e47-93bf-0a2503819047.aws.yugabyte.cloud")    
2025-08-18T13:59:18.806971Z DEBUG rustls::client::hs: Not resuming any session    
2025-08-18T13:59:18.809422Z DEBUG rustls::client::hs: Using ciphersuite TLS13_AES_256_GCM_SHA384    
2025-08-18T13:59:18.809551Z DEBUG rustls::client::tls13: Not resuming    
2025-08-18T13:59:18.809899Z DEBUG rustls::client::tls13: TLS1.3 encrypted extensions: []    
2025-08-18T13:59:18.809976Z DEBUG rustls::client::hs: ALPN protocol is None    
2025-08-18T13:59:18.810032Z DEBUG rustls::client::tls13: Got CertificateRequest CertificateRequestPayloadTLS13 { context: , extensions: [SignatureAlgorithms([ECDSA_NISTP256_SHA256, ECDSA_NISTP384_SHA384, ECDSA_NISTP521_SHA512, ED25519, ED448, Unknown(2057), Unknown(2058), Unknown(2059), RSA_PSS_SHA256, RSA_PSS_SHA384, RSA_PSS_SHA512, RSA_PKCS1_SHA256, RSA_PKCS1_SHA384, RSA_PKCS1_SHA512, Unknown(771), Unknown(769)]), AuthorityNames([DistinguishedName(305b31153013060355040a130c597567616279746520496e633142304006035504030c392a2e65346336313734662d363533382d346534372d393362662d3061323530333831393034372e6177732e79756761627974652e636c6f7564), DistinguishedName(30818b310b3009060355040613025553310b3009060355040813024341311230100603550407130953756e6e7976616c6531153013060355040a130c597567616279746520496e6331173015060355040b130e597567616279746520436c6f7564312b302906035504031322597567616279746520436c6f7564205375626f7264696e6174652043412070726f64), DistinguishedName(308184310b3009060355040613025553310b3009060355040813024341311230100603550407130953756e6e7976616c6531153013060355040a130c597567616279746520496e6331173015060355040b130e597567616279746520436c6f7564312430220603550403131b597567616279746520436c6f756420526f6f742043412070726f64)])] }    
2025-08-18T13:59:18.810262Z DEBUG rustls::client::common: Client auth requested but no cert/sigscheme available    
2025-08-18T13:59:18.907822Z DEBUG rustls::client::hs: Using ciphersuite TLS13_AES_256_GCM_SHA384    
2025-08-18T13:59:18.910386Z DEBUG rustls::client::tls13: Not resuming    
2025-08-18T13:59:18.914928Z DEBUG rustls::client::tls13: TLS1.3 encrypted extensions: []    
2025-08-18T13:59:18.915711Z DEBUG rustls::client::hs: ALPN protocol is None    
2025-08-18T13:59:18.916083Z DEBUG rustls::client::tls13: Got CertificateRequest CertificateRequestPayloadTLS13 { context: , extensions: [SignatureAlgorithms([ECDSA_NISTP256_SHA256, ECDSA_NISTP384_SHA384, ECDSA_NISTP521_SHA512, ED25519, ED448, Unknown(2057), Unknown(2058), Unknown(2059), RSA_PSS_SHA256, RSA_PSS_SHA384, RSA_PSS_SHA512, RSA_PKCS1_SHA256, RSA_PKCS1_SHA384, RSA_PKCS1_SHA512, Unknown(771), Unknown(769)]), AuthorityNames([DistinguishedName(305b31153013060355040a130c597567616279746520496e633142304006035504030c392a2e65346336313734662d363533382d346534372d393362662d3061323530333831393034372e6177732e79756761627974652e636c6f7564), DistinguishedName(30818b310b3009060355040613025553310b3009060355040813024341311230100603550407130953756e6e7976616c6531153013060355040a130c597567616279746520496e6331173015060355040b130e597567616279746520436c6f7564312b302906035504031322597567616279746520436c6f7564205375626f7264696e6174652043412070726f64), DistinguishedName(308184310b3009060355040613025553310b3009060355040813024341311230100603550407130953756e6e7976616c6531153013060355040a130c597567616279746520496e6331173015060355040b130e597567616279746520436c6f7564312430220603550403131b597567616279746520436c6f756420526f6f742043412070726f64)])] }    
2025-08-18T13:59:18.916999Z DEBUG rustls::client::common: Client auth requested but no cert/sigscheme available    
2025-08-18T13:59:19.143191Z DEBUG sqlx::query: summary="SELECT id, tenant_id, contact_id, ‚Ä¶" db.statement="\n\nSELECT\n  id,\n  tenant_id,\n  contact_id,\n  name,\n  interest_rate,\n  term_months,\n  date_start,\n  date_end,\n  collateral_description,\n  collateral_value,\n  storage_fee_rate,\n  storage_fee,\n  current_principal,\n  current_interest,\n  accumulated_interest,\n  total_paid_interest,\n  total_settlement_amount,\n  state,\n  created_at,\n  updated_at,\n  created_by,\n  assignee_id,\n  shared_with\nFROM\n  loan_contract\nWHERE\n  tenant_id = $1\n  AND id = $2\n" rows_affected=0 rows_returned=1 elapsed=190.570868ms elapsed_secs=0.190570868
2025-08-18T13:59:19.241734Z DEBUG sqlx::query: summary="SELECT id, COALESCE(NULLIF(name,''), display_name, ‚Ä¶" db.statement="\n\nSELECT\n  id,\n  COALESCE(\n    NULLIF(name, ''),\n    display_name,\n    email,\n    phone,\n    '(kh√¥ng t√™n)'\n  ) AS \"name!: String\",\n  display_name,\n  email,\n  phone,\n  is_company,\n  NULLIF(tags_cached, '') AS \"tags?: String\"\nFROM\n  contact\nWHERE\n  tenant_id = $1\n  AND (\n    $2 :: bool IS NULL\n    OR is_company = $2\n  )\nORDER BY\n  created_at DESC\nLIMIT\n  $3 OFFSET $4\n" rows_affected=1 rows_returned=1 elapsed=198.76685ms elapsed_secs=0.19876685
2025-08-18T13:59:19.339831Z DEBUG sqlx::query: summary="SELECT lt.id, lt.contract_id, lt.tenant_id, ‚Ä¶" db.statement="\n\nSELECT\n  lt.id,\n  lt.contract_id,\n  lt.tenant_id,\n  lt.contact_id,\n  lt.transaction_type,\n  lt.amount,\n  lt.date AS \"date!\",\n  lt.note,\n  -- √©p non-null cho c√°c tr∆∞·ªùng t√≠nh to√°n (map v√†o i32/i64)\n  0 :: int4 AS \"days_from_prev!\",\n  0 :: int8 AS \"interest_for_period!\",\n  0 :: int8 AS \"accumulated_interest!\",\n  0 :: int8 AS \"principal_balance!\",\n  lt.created_at AS \"created_at!\",\n  lt.updated_at AS \"updated_at!\"\nFROM\n  loan_transaction lt\nWHERE\n  lt.tenant_id = $1\n  AND lt.contract_id = $2\nORDER BY\n  lt.date ASC,\n  lt.id ASC\n" rows_affected=1 rows_returned=1 elapsed=139.696232ms elapsed_secs=0.139696232
2025-08-18T13:59:19.344135Z DEBUG axum::core::auth: üîê Middleware nh·∫≠n request: /ed8c286a-c68b-49cb-b2ca-3a0ddf17573b
2025-08-18T13:59:19.452385Z DEBUG sqlx::query: summary="SELECT id, tenant_id, contact_id, ‚Ä¶" db.statement="\n\nSELECT\n  id,\n  tenant_id,\n  contact_id,\n  name,\n  interest_rate,\n  term_months,\n  date_start,\n  date_end,\n  collateral_description,\n  collateral_value,\n  storage_fee_rate,\n  storage_fee,\n  current_principal,\n  current_interest,\n  accumulated_interest,\n  total_paid_interest,\n  total_settlement_amount,\n  state,\n  created_at,\n  updated_at,\n  created_by,\n  assignee_id,\n  shared_with\nFROM\n  loan_contract\nWHERE\n  tenant_id = $1\n  AND id = $2\n" rows_affected=0 rows_returned=1 elapsed=51.206372ms elapsed_secs=0.051206372
2025-08-18T13:59:19.662612Z DEBUG sqlx::query: summary="SELECT lt.id, lt.contract_id, lt.tenant_id, ‚Ä¶" db.statement="\n\nSELECT\n  lt.id,\n  lt.contract_id,\n  lt.tenant_id,\n  lt.contact_id,\n  lt.transaction_type,\n  lt.amount,\n  lt.date AS \"date!\",\n  lt.note,\n  -- √©p non-null cho c√°c tr∆∞·ªùng t√≠nh to√°n (map v√†o i32/i64)\n  0 :: int4 AS \"days_from_prev!\",\n  0 :: int8 AS \"interest_for_period!\",\n  0 :: int8 AS \"accumulated_interest!\",\n  0 :: int8 AS \"principal_balance!\",\n  lt.created_at AS \"created_at!\",\n  lt.updated_at AS \"updated_at!\"\nFROM\n  loan_transaction lt\nWHERE\n  lt.tenant_id = $1\n  AND lt.contract_id = $2\nORDER BY\n  lt.date ASC,\n  lt.id ASC\n" rows_affected=1 rows_returned=1 elapsed=157.459786ms elapsed_secs=0.157459786
2025-08-18T14:00:49.780127Z DEBUG axum::core::auth: üîê Middleware nh·∫≠n request: /ed8c286a-c68b-49cb-b2ca-3a0ddf17573b/update
2025-08-18T14:00:49.997000Z DEBUG sqlx::query: summary="UPDATE loan_contract SET contact_id ‚Ä¶" db.statement="\n\nUPDATE\n  loan_contract\nSET\n  contact_id = $1,\n  name = $2,\n  interest_rate = $3,\n  term_months = $4,\n  date_start = $5,\n  date_end = $6,\n  collateral_description = $7,\n  collateral_value = $8,\n  assignee_id = $9,\n  shared_with = $10,\n  updated_at = NOW()\nWHERE\n  id = $11\n  AND tenant_id = $12\nRETURNING\n  id,\n  tenant_id,\n  contact_id,\n  name,\n  interest_rate,\n  term_months,\n  date_start,\n  date_end,\n  collateral_description,\n  collateral_value,\n  storage_fee_rate,\n  storage_fee,\n  current_principal,\n  current_interest,\n  accumulated_interest,\n  total_paid_interest,\n  total_settlement_amount,\n  state,\n  created_at,\n  updated_at,\n  created_by,\n  assignee_id,\n  shared_with\n" rows_affected=0 rows_returned=1 elapsed=112.00016ms elapsed_secs=0.11200016
2025-08-18T14:00:50.097776Z DEBUG sqlx::query: summary="DELETE FROM loan_transaction WHERE ‚Ä¶" db.statement="\n\nDELETE FROM\n  loan_transaction\nWHERE\n  contract_id = $1\n  AND tenant_id = $2\n" rows_affected=1 rows_returned=0 elapsed=97.904221ms elapsed_secs=0.097904221
2025-08-18T14:00:50.158197Z DEBUG sqlx::query: summary="INSERT INTO loan_transaction ( ‚Ä¶" db.statement="\n\nINSERT INTO\n  loan_transaction (\n    contract_id,\n    tenant_id,\n    contact_id,\n    transaction_type,\n    amount,\n    \"date\",\n    note,\n    created_by,\n    assignee_id,\n    shared_with\n  )\nVALUES\n  ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10)\n" rows_affected=1 rows_returned=0 elapsed=49.744633ms elapsed_secs=0.049744633
2025-08-18T14:00:50.209001Z DEBUG sqlx::query: summary="INSERT INTO loan_transaction ( ‚Ä¶" db.statement="\n\nINSERT INTO\n  loan_transaction (\n    contract_id,\n    tenant_id,\n    contact_id,\n    transaction_type,\n    amount,\n    \"date\",\n    note,\n    created_by,\n    assignee_id,\n    shared_with\n  )\nVALUES\n  ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10)\n" rows_affected=1 rows_returned=0 elapsed=47.222781ms elapsed_secs=0.047222781
2025-08-18T14:00:50.257969Z DEBUG sqlx::query: summary="COMMIT" db.statement="" rows_affected=0 rows_returned=0 elapsed=48.180717ms elapsed_secs=0.048180717
2025-08-18T14:00:50.263166Z DEBUG axum::core::auth: üîê Middleware nh·∫≠n request: /ed8c286a-c68b-49cb-b2ca-3a0ddf17573b
2025-08-18T14:00:50.364687Z DEBUG sqlx::query: summary="SELECT id, tenant_id, contact_id, ‚Ä¶" db.statement="\n\nSELECT\n  id,\n  tenant_id,\n  contact_id,\n  name,\n  interest_rate,\n  term_months,\n  date_start,\n  date_end,\n  collateral_description,\n  collateral_value,\n  storage_fee_rate,\n  storage_fee,\n  current_principal,\n  current_interest,\n  accumulated_interest,\n  total_paid_interest,\n  total_settlement_amount,\n  state,\n  created_at,\n  updated_at,\n  created_by,\n  assignee_id,\n  shared_with\nFROM\n  loan_contract\nWHERE\n  tenant_id = $1\n  AND id = $2\n" rows_affected=0 rows_returned=1 elapsed=49.337509ms elapsed_secs=0.049337509
2025-08-18T14:00:50.470390Z DEBUG sqlx::query: summary="SELECT lt.id, lt.contract_id, lt.tenant_id, ‚Ä¶" db.statement="\n\nSELECT\n  lt.id,\n  lt.contract_id,\n  lt.tenant_id,\n  lt.contact_id,\n  lt.transaction_type,\n  lt.amount,\n  lt.date AS \"date!\",\n  lt.note,\n  -- √©p non-null cho c√°c tr∆∞·ªùng t√≠nh to√°n (map v√†o i32/i64)\n  0 :: int4 AS \"days_from_prev!\",\n  0 :: int8 AS \"interest_for_period!\",\n  0 :: int8 AS \"accumulated_interest!\",\n  0 :: int8 AS \"principal_balance!\",\n  lt.created_at AS \"created_at!\",\n  lt.updated_at AS \"updated_at!\"\nFROM\n  loan_transaction lt\nWHERE\n  lt.tenant_id = $1\n  AND lt.contract_id = $2\nORDER BY\n  lt.date ASC,\n  lt.id ASC\n" rows_affected=2 rows_returned=2 elapsed=49.028327ms elapsed_secs=0.049028327
2025-08-18T14:20:43.818834Z  WARN sqlx_postgres::options::parse: ignoring unrecognized connect parameter key=ssl value=true
2025-08-18T14:20:44.106971Z DEBUG rustls::client::hs: No cached session for DnsName("ap-southeast-1.e4c6174f-6538-4e47-93bf-0a2503819047.aws.yugabyte.cloud")    
2025-08-18T14:20:44.107709Z DEBUG rustls::client::hs: Not resuming any session    
2025-08-18T14:20:44.203308Z DEBUG rustls::client::hs: Using ciphersuite TLS13_AES_256_GCM_SHA384    
2025-08-18T14:20:44.203568Z DEBUG rustls::client::tls13: Not resuming    
2025-08-18T14:20:44.203846Z DEBUG rustls::client::tls13: TLS1.3 encrypted extensions: []    
2025-08-18T14:20:44.204000Z DEBUG rustls::client::hs: ALPN protocol is None    
2025-08-18T14:20:44.204249Z DEBUG rustls::client::tls13: Got CertificateRequest CertificateRequestPayloadTLS13 { context: , extensions: [SignatureAlgorithms([ECDSA_NISTP256_SHA256, ECDSA_NISTP384_SHA384, ECDSA_NISTP521_SHA512, ED25519, ED448, Unknown(2057), Unknown(2058), Unknown(2059), RSA_PSS_SHA256, RSA_PSS_SHA384, RSA_PSS_SHA512, RSA_PKCS1_SHA256, RSA_PKCS1_SHA384, RSA_PKCS1_SHA512, Unknown(771), Unknown(769)]), AuthorityNames([DistinguishedName(305b31153013060355040a130c597567616279746520496e633142304006035504030c392a2e65346336313734662d363533382d346534372d393362662d3061323530333831393034372e6177732e79756761627974652e636c6f7564), DistinguishedName(30818b310b3009060355040613025553310b3009060355040813024341311230100603550407130953756e6e7976616c6531153013060355040a130c597567616279746520496e6331173015060355040b130e597567616279746520436c6f7564312b302906035504031322597567616279746520436c6f7564205375626f7264696e6174652043412070726f64), DistinguishedName(308184310b3009060355040613025553310b3009060355040813024341311230100603550407130953756e6e7976616c6531153013060355040a130c597567616279746520496e6331173015060355040b130e597567616279746520436c6f7564312430220603550403131b597567616279746520436c6f756420526f6f742043412070726f64)])] }    
2025-08-18T14:20:44.204499Z DEBUG rustls::client::common: Client auth requested but no cert/sigscheme available    
2025-08-18T14:20:49.504959Z DEBUG axum::core::auth: üîê Middleware nh·∫≠n request: /profile
2025-08-18T14:20:49.507650Z DEBUG axum::core::auth: üîê Middleware nh·∫≠n request: /profile
2025-08-18T14:20:49.923386Z DEBUG axum::core::auth: üîê Middleware nh·∫≠n request: /list
2025-08-18T14:20:49.924944Z DEBUG axum::core::auth: üîê Middleware nh·∫≠n request: /ed8c286a-c68b-49cb-b2ca-3a0ddf17573b
2025-08-18T14:20:49.933478Z DEBUG axum::core::auth: üîê Middleware nh·∫≠n request: /me/modules
2025-08-18T14:20:50.051848Z DEBUG rustls::client::hs: No cached session for DnsName("ap-southeast-1.e4c6174f-6538-4e47-93bf-0a2503819047.aws.yugabyte.cloud")    
2025-08-18T14:20:50.052354Z DEBUG rustls::client::hs: Not resuming any session    
2025-08-18T14:20:50.066963Z DEBUG rustls::client::hs: No cached session for DnsName("ap-southeast-1.e4c6174f-6538-4e47-93bf-0a2503819047.aws.yugabyte.cloud")    
2025-08-18T14:20:50.067203Z DEBUG rustls::client::hs: Not resuming any session    
2025-08-18T14:20:50.152775Z DEBUG rustls::client::hs: Using ciphersuite TLS13_AES_256_GCM_SHA384    
2025-08-18T14:20:50.153901Z DEBUG rustls::client::tls13: Not resuming    
2025-08-18T14:20:50.154131Z DEBUG rustls::client::tls13: TLS1.3 encrypted extensions: []    
2025-08-18T14:20:50.154149Z DEBUG rustls::client::hs: ALPN protocol is None    
2025-08-18T14:20:50.154176Z DEBUG rustls::client::tls13: Got CertificateRequest CertificateRequestPayloadTLS13 { context: , extensions: [SignatureAlgorithms([ECDSA_NISTP256_SHA256, ECDSA_NISTP384_SHA384, ECDSA_NISTP521_SHA512, ED25519, ED448, Unknown(2057), Unknown(2058), Unknown(2059), RSA_PSS_SHA256, RSA_PSS_SHA384, RSA_PSS_SHA512, RSA_PKCS1_SHA256, RSA_PKCS1_SHA384, RSA_PKCS1_SHA512, Unknown(771), Unknown(769)]), AuthorityNames([DistinguishedName(305b31153013060355040a130c597567616279746520496e633142304006035504030c392a2e65346336313734662d363533382d346534372d393362662d3061323530333831393034372e6177732e79756761627974652e636c6f7564), DistinguishedName(30818b310b3009060355040613025553310b3009060355040813024341311230100603550407130953756e6e7976616c6531153013060355040a130c597567616279746520496e6331173015060355040b130e597567616279746520436c6f7564312b302906035504031322597567616279746520436c6f7564205375626f7264696e6174652043412070726f64), DistinguishedName(308184310b3009060355040613025553310b3009060355040813024341311230100603550407130953756e6e7976616c6531153013060355040a130c597567616279746520496e6331173015060355040b130e597567616279746520436c6f7564312430220603550403131b597567616279746520436c6f756420526f6f742043412070726f64)])] }    
2025-08-18T14:20:50.154214Z DEBUG rustls::client::common: Client auth requested but no cert/sigscheme available    
2025-08-18T14:20:50.179537Z DEBUG sqlx::query: summary="SELECT id, COALESCE(NULLIF(name,''), display_name, ‚Ä¶" db.statement="\n\nSELECT\n  id,\n  COALESCE(\n    NULLIF(name, ''),\n    display_name,\n    email,\n    phone,\n    '(kh√¥ng t√™n)'\n  ) AS \"name!: String\",\n  display_name,\n  email,\n  phone,\n  is_company,\n  NULLIF(tags_cached, '') AS \"tags?: String\"\nFROM\n  contact\nWHERE\n  tenant_id = $1\n  AND (\n    $2 :: bool IS NULL\n    OR is_company = $2\n  )\nORDER BY\n  created_at DESC\nLIMIT\n  $3 OFFSET $4\n" rows_affected=1 rows_returned=1 elapsed=201.136477ms elapsed_secs=0.201136477
2025-08-18T14:20:50.182778Z DEBUG axum::core::auth: üîê Middleware nh·∫≠n request: /list
2025-08-18T14:20:50.184710Z DEBUG rustls::client::hs: Using ciphersuite TLS13_AES_256_GCM_SHA384    
2025-08-18T14:20:50.185246Z DEBUG rustls::client::tls13: Not resuming    
2025-08-18T14:20:50.185605Z DEBUG rustls::client::tls13: TLS1.3 encrypted extensions: []    
2025-08-18T14:20:50.185909Z DEBUG rustls::client::hs: ALPN protocol is None    
2025-08-18T14:20:50.186024Z DEBUG rustls::client::tls13: Got CertificateRequest CertificateRequestPayloadTLS13 { context: , extensions: [SignatureAlgorithms([ECDSA_NISTP256_SHA256, ECDSA_NISTP384_SHA384, ECDSA_NISTP521_SHA512, ED25519, ED448, Unknown(2057), Unknown(2058), Unknown(2059), RSA_PSS_SHA256, RSA_PSS_SHA384, RSA_PSS_SHA512, RSA_PKCS1_SHA256, RSA_PKCS1_SHA384, RSA_PKCS1_SHA512, Unknown(771), Unknown(769)]), AuthorityNames([DistinguishedName(305b31153013060355040a130c597567616279746520496e633142304006035504030c392a2e65346336313734662d363533382d346534372d393362662d3061323530333831393034372e6177732e79756761627974652e636c6f7564), DistinguishedName(30818b310b3009060355040613025553310b3009060355040813024341311230100603550407130953756e6e7976616c6531153013060355040a130c597567616279746520496e6331173015060355040b130e597567616279746520436c6f7564312b302906035504031322597567616279746520436c6f7564205375626f7264696e6174652043412070726f64), DistinguishedName(308184310b3009060355040613025553310b3009060355040813024341311230100603550407130953756e6e7976616c6531153013060355040a130c597567616279746520496e6331173015060355040b130e597567616279746520436c6f7564312430220603550403131b597567616279746520436c6f756420526f6f742043412070726f64)])] }    
2025-08-18T14:20:50.186162Z DEBUG rustls::client::common: Client auth requested but no cert/sigscheme available    
2025-08-18T14:20:50.303172Z DEBUG rustls::client::hs: No cached session for DnsName("ap-southeast-1.e4c6174f-6538-4e47-93bf-0a2503819047.aws.yugabyte.cloud")    
2025-08-18T14:20:50.305103Z DEBUG rustls::client::hs: Not resuming any session    
2025-08-18T14:20:50.417743Z DEBUG rustls::client::hs: Using ciphersuite TLS13_AES_256_GCM_SHA384    
2025-08-18T14:20:50.418253Z DEBUG rustls::client::tls13: Not resuming    
2025-08-18T14:20:50.418959Z DEBUG rustls::client::tls13: TLS1.3 encrypted extensions: []    
2025-08-18T14:20:50.419473Z DEBUG rustls::client::hs: ALPN protocol is None    
2025-08-18T14:20:50.419741Z DEBUG rustls::client::tls13: Got CertificateRequest CertificateRequestPayloadTLS13 { context: , extensions: [SignatureAlgorithms([ECDSA_NISTP256_SHA256, ECDSA_NISTP384_SHA384, ECDSA_NISTP521_SHA512, ED25519, ED448, Unknown(2057), Unknown(2058), Unknown(2059), RSA_PSS_SHA256, RSA_PSS_SHA384, RSA_PSS_SHA512, RSA_PKCS1_SHA256, RSA_PKCS1_SHA384, RSA_PKCS1_SHA512, Unknown(771), Unknown(769)]), AuthorityNames([DistinguishedName(305b31153013060355040a130c597567616279746520496e633142304006035504030c392a2e65346336313734662d363533382d346534372d393362662d3061323530333831393034372e6177732e79756761627974652e636c6f7564), DistinguishedName(30818b310b3009060355040613025553310b3009060355040813024341311230100603550407130953756e6e7976616c6531153013060355040a130c597567616279746520496e6331173015060355040b130e597567616279746520436c6f7564312b302906035504031322597567616279746520436c6f7564205375626f7264696e6174652043412070726f64), DistinguishedName(308184310b3009060355040613025553310b3009060355040813024341311230100603550407130953756e6e7976616c6531153013060355040a130c597567616279746520496e6331173015060355040b130e597567616279746520436c6f7564312430220603550403131b597567616279746520436c6f756420526f6f742043412070726f64)])] }    
2025-08-18T14:20:50.419998Z DEBUG rustls::client::common: Client auth requested but no cert/sigscheme available    
2025-08-18T14:20:50.467164Z DEBUG sqlx::query: summary="SELECT EXISTS ( SELECT ‚Ä¶" db.statement="\n\nSELECT\n  EXISTS (\n    SELECT\n      1\n    FROM\n      user_roles ur\n      JOIN roles r ON r.tenant_id = ur.tenant_id\n      AND r.id = ur.role_id\n    WHERE\n      ur.tenant_id = $1\n      AND ur.user_id = $2\n      AND r.name = 'admin'\n  )\n" rows_affected=0 rows_returned=1 elapsed=176.950779ms elapsed_secs=0.176950779
2025-08-18T14:20:50.536835Z DEBUG sqlx::query: summary="SELECT id, tenant_id, contact_id, ‚Ä¶" db.statement="\n\nSELECT\n  id,\n  tenant_id,\n  contact_id,\n  name,\n  interest_rate,\n  term_months,\n  date_start,\n  date_end,\n  collateral_description,\n  collateral_value,\n  storage_fee_rate,\n  storage_fee,\n  current_principal,\n  current_interest,\n  accumulated_interest,\n  total_paid_interest,\n  total_settlement_amount,\n  state,\n  created_at,\n  updated_at,\n  created_by,\n  assignee_id,\n  shared_with\nFROM\n  loan_contract\nWHERE\n  tenant_id = $1\n  AND id = $2\n" rows_affected=0 rows_returned=1 elapsed=191.701987ms elapsed_secs=0.191701987
2025-08-18T14:20:50.643677Z DEBUG sqlx::query: summary="SELECT (module_name || '.access') ‚Ä¶" db.statement="\n\nSELECT\n  (module_name || '.access') AS perm\nFROM\n  available_module\nORDER BY\n  module_name\n" rows_affected=5 rows_returned=5 elapsed=128.744016ms elapsed_secs=0.128744016
2025-08-18T14:20:50.648640Z DEBUG axum::core::auth: üîê Middleware nh·∫≠n request: /me/modules
2025-08-18T14:20:50.793707Z DEBUG sqlx::query: summary="SELECT lt.id, lt.contract_id, lt.tenant_id, ‚Ä¶" db.statement="\n\nSELECT\n  lt.id,\n  lt.contract_id,\n  lt.tenant_id,\n  lt.contact_id,\n  lt.transaction_type,\n  lt.amount,\n  lt.date AS \"date!\",\n  lt.note,\n  -- √©p non-null cho c√°c tr∆∞·ªùng t√≠nh to√°n (map v√†o i32/i64)\n  0 :: int4 AS \"days_from_prev!\",\n  0 :: int8 AS \"interest_for_period!\",\n  0 :: int8 AS \"accumulated_interest!\",\n  0 :: int8 AS \"principal_balance!\",\n  lt.created_at AS \"created_at!\",\n  lt.updated_at AS \"updated_at!\"\nFROM\n  loan_transaction lt\nWHERE\n  lt.tenant_id = $1\n  AND lt.contract_id = $2\nORDER BY\n  lt.date ASC,\n  lt.id ASC\n" rows_affected=2 rows_returned=2 elapsed=202.439849ms elapsed_secs=0.202439849
2025-08-18T14:20:50.796278Z DEBUG axum::core::auth: üîê Middleware nh·∫≠n request: /ed8c286a-c68b-49cb-b2ca-3a0ddf17573b
2025-08-18T14:20:50.811983Z DEBUG sqlx::query: summary="SELECT id, COALESCE(NULLIF(name,''), display_name, ‚Ä¶" db.statement="\n\nSELECT\n  id,\n  COALESCE(\n    NULLIF(name, ''),\n    display_name,\n    email,\n    phone,\n    '(kh√¥ng t√™n)'\n  ) AS \"name!: String\",\n  display_name,\n  email,\n  phone,\n  is_company,\n  NULLIF(tags_cached, '') AS \"tags?: String\"\nFROM\n  contact\nWHERE\n  tenant_id = $1\n  AND (\n    $2 :: bool IS NULL\n    OR is_company = $2\n  )\nORDER BY\n  created_at DESC\nLIMIT\n  $3 OFFSET $4\n" rows_affected=1 rows_returned=1 elapsed=236.951973ms elapsed_secs=0.236951973
2025-08-18T14:20:50.878426Z DEBUG sqlx::query: summary="SELECT EXISTS ( SELECT ‚Ä¶" db.statement="\n\nSELECT\n  EXISTS (\n    SELECT\n      1\n    FROM\n      user_roles ur\n      JOIN roles r ON r.tenant_id = ur.tenant_id\n      AND r.id = ur.role_id\n    WHERE\n      ur.tenant_id = $1\n      AND ur.user_id = $2\n      AND r.name = 'admin'\n  )\n" rows_affected=0 rows_returned=1 elapsed=168.122523ms elapsed_secs=0.168122523
2025-08-18T14:20:50.998419Z DEBUG sqlx::query: summary="SELECT id, tenant_id, contact_id, ‚Ä¶" db.statement="\n\nSELECT\n  id,\n  tenant_id,\n  contact_id,\n  name,\n  interest_rate,\n  term_months,\n  date_start,\n  date_end,\n  collateral_description,\n  collateral_value,\n  storage_fee_rate,\n  storage_fee,\n  current_principal,\n  current_interest,\n  accumulated_interest,\n  total_paid_interest,\n  total_settlement_amount,\n  state,\n  created_at,\n  updated_at,\n  created_by,\n  assignee_id,\n  shared_with\nFROM\n  loan_contract\nWHERE\n  tenant_id = $1\n  AND id = $2\n" rows_affected=0 rows_returned=1 elapsed=152.325437ms elapsed_secs=0.152325437
2025-08-18T14:20:51.073678Z DEBUG sqlx::query: summary="SELECT (module_name || '.access') ‚Ä¶" db.statement="\n\nSELECT\n  (module_name || '.access') AS perm\nFROM\n  available_module\nORDER BY\n  module_name\n" rows_affected=5 rows_returned=5 elapsed=146.695895ms elapsed_secs=0.146695895
2025-08-18T14:20:51.229134Z DEBUG sqlx::query: summary="SELECT lt.id, lt.contract_id, lt.tenant_id, ‚Ä¶" db.statement="\n\nSELECT\n  lt.id,\n  lt.contract_id,\n  lt.tenant_id,\n  lt.contact_id,\n  lt.transaction_type,\n  lt.amount,\n  lt.date AS \"date!\",\n  lt.note,\n  -- √©p non-null cho c√°c tr∆∞·ªùng t√≠nh to√°n (map v√†o i32/i64)\n  0 :: int4 AS \"days_from_prev!\",\n  0 :: int8 AS \"interest_for_period!\",\n  0 :: int8 AS \"accumulated_interest!\",\n  0 :: int8 AS \"principal_balance!\",\n  lt.created_at AS \"created_at!\",\n  lt.updated_at AS \"updated_at!\"\nFROM\n  loan_transaction lt\nWHERE\n  lt.tenant_id = $1\n  AND lt.contract_id = $2\nORDER BY\n  lt.date ASC,\n  lt.id ASC\n" rows_affected=2 rows_returned=2 elapsed=170.846038ms elapsed_secs=0.170846038
2025-08-18T14:21:01.376363Z DEBUG axum::core::auth: üîê Middleware nh·∫≠n request: /ed8c286a-c68b-49cb-b2ca-3a0ddf17573b/update
2025-08-18T14:21:01.633044Z DEBUG sqlx::query: summary="UPDATE loan_contract SET contact_id ‚Ä¶" db.statement="\n\nUPDATE\n  loan_contract\nSET\n  contact_id = $1,\n  name = $2,\n  interest_rate = $3,\n  term_months = $4,\n  date_start = $5,\n  date_end = $6,\n  collateral_description = $7,\n  collateral_value = $8,\n  assignee_id = $9,\n  shared_with = $10,\n  updated_at = NOW()\nWHERE\n  id = $11\n  AND tenant_id = $12\nRETURNING\n  id,\n  tenant_id,\n  contact_id,\n  name,\n  interest_rate,\n  term_months,\n  date_start,\n  date_end,\n  collateral_description,\n  collateral_value,\n  storage_fee_rate,\n  storage_fee,\n  current_principal,\n  current_interest,\n  accumulated_interest,\n  total_paid_interest,\n  total_settlement_amount,\n  state,\n  created_at,\n  updated_at,\n  created_by,\n  assignee_id,\n  shared_with\n" rows_affected=0 rows_returned=1 elapsed=132.210762ms elapsed_secs=0.132210762
2025-08-18T14:21:01.800292Z DEBUG sqlx::query: summary="DELETE FROM loan_transaction WHERE ‚Ä¶" db.statement="\n\nDELETE FROM\n  loan_transaction\nWHERE\n  contract_id = $1\n  AND tenant_id = $2\n" rows_affected=2 rows_returned=0 elapsed=166.098467ms elapsed_secs=0.166098467
2025-08-18T14:21:01.921742Z DEBUG sqlx::query: summary="INSERT INTO loan_transaction ( ‚Ä¶" db.statement="\n\nINSERT INTO\n  loan_transaction (\n    contract_id,\n    tenant_id,\n    contact_id,\n    transaction_type,\n    amount,\n    \"date\",\n    note,\n    created_by,\n    assignee_id,\n    shared_with\n  )\nVALUES\n  ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10)\n" rows_affected=1 rows_returned=0 elapsed=118.00809ms elapsed_secs=0.11800809
2025-08-18T14:21:01.983979Z DEBUG sqlx::query: summary="INSERT INTO loan_transaction ( ‚Ä¶" db.statement="\n\nINSERT INTO\n  loan_transaction (\n    contract_id,\n    tenant_id,\n    contact_id,\n    transaction_type,\n    amount,\n    \"date\",\n    note,\n    created_by,\n    assignee_id,\n    shared_with\n  )\nVALUES\n  ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10)\n" rows_affected=1 rows_returned=0 elapsed=58.375598ms elapsed_secs=0.058375598
2025-08-18T14:21:02.046464Z DEBUG sqlx::query: summary="INSERT INTO loan_transaction ( ‚Ä¶" db.statement="\n\nINSERT INTO\n  loan_transaction (\n    contract_id,\n    tenant_id,\n    contact_id,\n    transaction_type,\n    amount,\n    \"date\",\n    note,\n    created_by,\n    assignee_id,\n    shared_with\n  )\nVALUES\n  ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10)\n" rows_affected=1 rows_returned=0 elapsed=57.821592ms elapsed_secs=0.057821592
2025-08-18T14:21:02.103880Z DEBUG sqlx::query: summary="COMMIT" db.statement="" rows_affected=0 rows_returned=0 elapsed=57.137842ms elapsed_secs=0.057137842
2025-08-18T14:21:02.113542Z DEBUG axum::core::auth: üîê Middleware nh·∫≠n request: /ed8c286a-c68b-49cb-b2ca-3a0ddf17573b
2025-08-18T14:21:02.217939Z DEBUG sqlx::query: summary="SELECT id, tenant_id, contact_id, ‚Ä¶" db.statement="\n\nSELECT\n  id,\n  tenant_id,\n  contact_id,\n  name,\n  interest_rate,\n  term_months,\n  date_start,\n  date_end,\n  collateral_description,\n  collateral_value,\n  storage_fee_rate,\n  storage_fee,\n  current_principal,\n  current_interest,\n  accumulated_interest,\n  total_paid_interest,\n  total_settlement_amount,\n  state,\n  created_at,\n  updated_at,\n  created_by,\n  assignee_id,\n  shared_with\nFROM\n  loan_contract\nWHERE\n  tenant_id = $1\n  AND id = $2\n" rows_affected=0 rows_returned=1 elapsed=48.184182ms elapsed_secs=0.048184182
2025-08-18T14:21:02.321455Z DEBUG sqlx::query: summary="SELECT lt.id, lt.contract_id, lt.tenant_id, ‚Ä¶" db.statement="\n\nSELECT\n  lt.id,\n  lt.contract_id,\n  lt.tenant_id,\n  lt.contact_id,\n  lt.transaction_type,\n  lt.amount,\n  lt.date AS \"date!\",\n  lt.note,\n  -- √©p non-null cho c√°c tr∆∞·ªùng t√≠nh to√°n (map v√†o i32/i64)\n  0 :: int4 AS \"days_from_prev!\",\n  0 :: int8 AS \"interest_for_period!\",\n  0 :: int8 AS \"accumulated_interest!\",\n  0 :: int8 AS \"principal_balance!\",\n  lt.created_at AS \"created_at!\",\n  lt.updated_at AS \"updated_at!\"\nFROM\n  loan_transaction lt\nWHERE\n  lt.tenant_id = $1\n  AND lt.contract_id = $2\nORDER BY\n  lt.date ASC,\n  lt.id ASC\n" rows_affected=3 rows_returned=3 elapsed=48.11088ms elapsed_secs=0.04811088
2025-08-18T14:21:19.463688Z DEBUG axum::core::auth: üîê Middleware nh·∫≠n request: /ed8c286a-c68b-49cb-b2ca-3a0ddf17573b/update
2025-08-18T14:21:19.749121Z DEBUG sqlx::query: summary="UPDATE loan_contract SET contact_id ‚Ä¶" db.statement="\n\nUPDATE\n  loan_contract\nSET\n  contact_id = $1,\n  name = $2,\n  interest_rate = $3,\n  term_months = $4,\n  date_start = $5,\n  date_end = $6,\n  collateral_description = $7,\n  collateral_value = $8,\n  assignee_id = $9,\n  shared_with = $10,\n  updated_at = NOW()\nWHERE\n  id = $11\n  AND tenant_id = $12\nRETURNING\n  id,\n  tenant_id,\n  contact_id,\n  name,\n  interest_rate,\n  term_months,\n  date_start,\n  date_end,\n  collateral_description,\n  collateral_value,\n  storage_fee_rate,\n  storage_fee,\n  current_principal,\n  current_interest,\n  accumulated_interest,\n  total_paid_interest,\n  total_settlement_amount,\n  state,\n  created_at,\n  updated_at,\n  created_by,\n  assignee_id,\n  shared_with\n" rows_affected=0 rows_returned=1 elapsed=165.567312ms elapsed_secs=0.165567312
2025-08-18T14:21:19.871823Z DEBUG sqlx::query: summary="DELETE FROM loan_transaction WHERE ‚Ä¶" db.statement="\n\nDELETE FROM\n  loan_transaction\nWHERE\n  contract_id = $1\n  AND tenant_id = $2\n" rows_affected=3 rows_returned=0 elapsed=120.80331ms elapsed_secs=0.12080331
2025-08-18T14:21:19.990213Z DEBUG sqlx::query: summary="INSERT INTO loan_transaction ( ‚Ä¶" db.statement="\n\nINSERT INTO\n  loan_transaction (\n    contract_id,\n    tenant_id,\n    contact_id,\n    transaction_type,\n    amount,\n    \"date\",\n    note,\n    created_by,\n    assignee_id,\n    shared_with\n  )\nVALUES\n  ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10)\n" rows_affected=1 rows_returned=0 elapsed=114.777065ms elapsed_secs=0.114777065
2025-08-18T14:21:20.053623Z DEBUG sqlx::query: summary="INSERT INTO loan_transaction ( ‚Ä¶" db.statement="\n\nINSERT INTO\n  loan_transaction (\n    contract_id,\n    tenant_id,\n    contact_id,\n    transaction_type,\n    amount,\n    \"date\",\n    note,\n    created_by,\n    assignee_id,\n    shared_with\n  )\nVALUES\n  ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10)\n" rows_affected=1 rows_returned=0 elapsed=56.531802ms elapsed_secs=0.056531802
2025-08-18T14:21:20.112215Z DEBUG sqlx::query: summary="COMMIT" db.statement="" rows_affected=0 rows_returned=0 elapsed=56.881365ms elapsed_secs=0.056881365
2025-08-18T14:21:20.116936Z DEBUG axum::core::auth: üîê Middleware nh·∫≠n request: /ed8c286a-c68b-49cb-b2ca-3a0ddf17573b
2025-08-18T14:21:20.237565Z DEBUG sqlx::query: summary="SELECT id, tenant_id, contact_id, ‚Ä¶" db.statement="\n\nSELECT\n  id,\n  tenant_id,\n  contact_id,\n  name,\n  interest_rate,\n  term_months,\n  date_start,\n  date_end,\n  collateral_description,\n  collateral_value,\n  storage_fee_rate,\n  storage_fee,\n  current_principal,\n  current_interest,\n  accumulated_interest,\n  total_paid_interest,\n  total_settlement_amount,\n  state,\n  created_at,\n  updated_at,\n  created_by,\n  assignee_id,\n  shared_with\nFROM\n  loan_contract\nWHERE\n  tenant_id = $1\n  AND id = $2\n" rows_affected=0 rows_returned=1 elapsed=58.736398ms elapsed_secs=0.058736398
2025-08-18T14:21:20.439602Z DEBUG sqlx::query: summary="SELECT lt.id, lt.contract_id, lt.tenant_id, ‚Ä¶" db.statement="\n\nSELECT\n  lt.id,\n  lt.contract_id,\n  lt.tenant_id,\n  lt.contact_id,\n  lt.transaction_type,\n  lt.amount,\n  lt.date AS \"date!\",\n  lt.note,\n  -- √©p non-null cho c√°c tr∆∞·ªùng t√≠nh to√°n (map v√†o i32/i64)\n  0 :: int4 AS \"days_from_prev!\",\n  0 :: int8 AS \"interest_for_period!\",\n  0 :: int8 AS \"accumulated_interest!\",\n  0 :: int8 AS \"principal_balance!\",\n  lt.created_at AS \"created_at!\",\n  lt.updated_at AS \"updated_at!\"\nFROM\n  loan_transaction lt\nWHERE\n  lt.tenant_id = $1\n  AND lt.contract_id = $2\nORDER BY\n  lt.date ASC,\n  lt.id ASC\n" rows_affected=2 rows_returned=2 elapsed=150.540518ms elapsed_secs=0.150540518
2025-08-18T14:22:06.705561Z DEBUG axum::core::auth: üîê Middleware nh·∫≠n request: /ed8c286a-c68b-49cb-b2ca-3a0ddf17573b/update
2025-08-18T14:22:06.964847Z DEBUG sqlx::query: summary="UPDATE loan_contract SET contact_id ‚Ä¶" db.statement="\n\nUPDATE\n  loan_contract\nSET\n  contact_id = $1,\n  name = $2,\n  interest_rate = $3,\n  term_months = $4,\n  date_start = $5,\n  date_end = $6,\n  collateral_description = $7,\n  collateral_value = $8,\n  assignee_id = $9,\n  shared_with = $10,\n  updated_at = NOW()\nWHERE\n  id = $11\n  AND tenant_id = $12\nRETURNING\n  id,\n  tenant_id,\n  contact_id,\n  name,\n  interest_rate,\n  term_months,\n  date_start,\n  date_end,\n  collateral_description,\n  collateral_value,\n  storage_fee_rate,\n  storage_fee,\n  current_principal,\n  current_interest,\n  accumulated_interest,\n  total_paid_interest,\n  total_settlement_amount,\n  state,\n  created_at,\n  updated_at,\n  created_by,\n  assignee_id,\n  shared_with\n" rows_affected=0 rows_returned=1 elapsed=152.463336ms elapsed_secs=0.152463336
2025-08-18T14:22:07.072469Z DEBUG sqlx::query: summary="DELETE FROM loan_transaction WHERE ‚Ä¶" db.statement="\n\nDELETE FROM\n  loan_transaction\nWHERE\n  contract_id = $1\n  AND tenant_id = $2\n" rows_affected=2 rows_returned=0 elapsed=105.994731ms elapsed_secs=0.105994731
2025-08-18T14:22:07.179298Z DEBUG sqlx::query: summary="INSERT INTO loan_transaction ( ‚Ä¶" db.statement="\n\nINSERT INTO\n  loan_transaction (\n    contract_id,\n    tenant_id,\n    contact_id,\n    transaction_type,\n    amount,\n    \"date\",\n    note,\n    created_by,\n    assignee_id,\n    shared_with\n  )\nVALUES\n  ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10)\n" rows_affected=1 rows_returned=0 elapsed=100.509806ms elapsed_secs=0.100509806
2025-08-18T14:22:07.229947Z DEBUG sqlx::query: summary="COMMIT" db.statement="" rows_affected=0 rows_returned=0 elapsed=50.132519ms elapsed_secs=0.050132519
2025-08-18T14:22:07.235360Z DEBUG axum::core::auth: üîê Middleware nh·∫≠n request: /ed8c286a-c68b-49cb-b2ca-3a0ddf17573b
2025-08-18T14:22:07.405162Z DEBUG sqlx::query: summary="SELECT id, tenant_id, contact_id, ‚Ä¶" db.statement="\n\nSELECT\n  id,\n  tenant_id,\n  contact_id,\n  name,\n  interest_rate,\n  term_months,\n  date_start,\n  date_end,\n  collateral_description,\n  collateral_value,\n  storage_fee_rate,\n  storage_fee,\n  current_principal,\n  current_interest,\n  accumulated_interest,\n  total_paid_interest,\n  total_settlement_amount,\n  state,\n  created_at,\n  updated_at,\n  created_by,\n  assignee_id,\n  shared_with\nFROM\n  loan_contract\nWHERE\n  tenant_id = $1\n  AND id = $2\n" rows_affected=0 rows_returned=1 elapsed=109.081041ms elapsed_secs=0.109081041
2025-08-18T14:22:07.616530Z DEBUG sqlx::query: summary="SELECT lt.id, lt.contract_id, lt.tenant_id, ‚Ä¶" db.statement="\n\nSELECT\n  lt.id,\n  lt.contract_id,\n  lt.tenant_id,\n  lt.contact_id,\n  lt.transaction_type,\n  lt.amount,\n  lt.date AS \"date!\",\n  lt.note,\n  -- √©p non-null cho c√°c tr∆∞·ªùng t√≠nh to√°n (map v√†o i32/i64)\n  0 :: int4 AS \"days_from_prev!\",\n  0 :: int8 AS \"interest_for_period!\",\n  0 :: int8 AS \"accumulated_interest!\",\n  0 :: int8 AS \"principal_balance!\",\n  lt.created_at AS \"created_at!\",\n  lt.updated_at AS \"updated_at!\"\nFROM\n  loan_transaction lt\nWHERE\n  lt.tenant_id = $1\n  AND lt.contract_id = $2\nORDER BY\n  lt.date ASC,\n  lt.id ASC\n" rows_affected=1 rows_returned=1 elapsed=152.026815ms elapsed_secs=0.152026815
2025-08-18T14:22:23.777575Z DEBUG axum::core::auth: üîê Middleware nh·∫≠n request: /ed8c286a-c68b-49cb-b2ca-3a0ddf17573b/update
2025-08-18T14:22:24.003576Z DEBUG sqlx::query: summary="UPDATE loan_contract SET contact_id ‚Ä¶" db.statement="\n\nUPDATE\n  loan_contract\nSET\n  contact_id = $1,\n  name = $2,\n  interest_rate = $3,\n  term_months = $4,\n  date_start = $5,\n  date_end = $6,\n  collateral_description = $7,\n  collateral_value = $8,\n  assignee_id = $9,\n  shared_with = $10,\n  updated_at = NOW()\nWHERE\n  id = $11\n  AND tenant_id = $12\nRETURNING\n  id,\n  tenant_id,\n  contact_id,\n  name,\n  interest_rate,\n  term_months,\n  date_start,\n  date_end,\n  collateral_description,\n  collateral_value,\n  storage_fee_rate,\n  storage_fee,\n  current_principal,\n  current_interest,\n  accumulated_interest,\n  total_paid_interest,\n  total_settlement_amount,\n  state,\n  created_at,\n  updated_at,\n  created_by,\n  assignee_id,\n  shared_with\n" rows_affected=0 rows_returned=1 elapsed=119.26521ms elapsed_secs=0.11926521
2025-08-18T14:22:24.109873Z DEBUG sqlx::query: summary="DELETE FROM loan_transaction WHERE ‚Ä¶" db.statement="\n\nDELETE FROM\n  loan_transaction\nWHERE\n  contract_id = $1\n  AND tenant_id = $2\n" rows_affected=1 rows_returned=0 elapsed=104.654626ms elapsed_secs=0.104654626
2025-08-18T14:22:24.212685Z DEBUG sqlx::query: summary="INSERT INTO loan_transaction ( ‚Ä¶" db.statement="\n\nINSERT INTO\n  loan_transaction (\n    contract_id,\n    tenant_id,\n    contact_id,\n    transaction_type,\n    amount,\n    \"date\",\n    note,\n    created_by,\n    assignee_id,\n    shared_with\n  )\nVALUES\n  ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10)\n" rows_affected=1 rows_returned=0 elapsed=99.395392ms elapsed_secs=0.099395392
2025-08-18T14:22:24.269206Z DEBUG sqlx::query: summary="INSERT INTO loan_transaction ( ‚Ä¶" db.statement="\n\nINSERT INTO\n  loan_transaction (\n    contract_id,\n    tenant_id,\n    contact_id,\n    transaction_type,\n    amount,\n    \"date\",\n    note,\n    created_by,\n    assignee_id,\n    shared_with\n  )\nVALUES\n  ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10)\n" rows_affected=1 rows_returned=0 elapsed=50.859768ms elapsed_secs=0.050859768
2025-08-18T14:22:24.319988Z DEBUG sqlx::query: summary="COMMIT" db.statement="" rows_affected=0 rows_returned=0 elapsed=49.407441ms elapsed_secs=0.049407441
2025-08-18T14:22:24.330659Z DEBUG axum::core::auth: üîê Middleware nh·∫≠n request: /ed8c286a-c68b-49cb-b2ca-3a0ddf17573b
2025-08-18T14:22:24.480918Z DEBUG sqlx::query: summary="SELECT id, tenant_id, contact_id, ‚Ä¶" db.statement="\n\nSELECT\n  id,\n  tenant_id,\n  contact_id,\n  name,\n  interest_rate,\n  term_months,\n  date_start,\n  date_end,\n  collateral_description,\n  collateral_value,\n  storage_fee_rate,\n  storage_fee,\n  current_principal,\n  current_interest,\n  accumulated_interest,\n  total_paid_interest,\n  total_settlement_amount,\n  state,\n  created_at,\n  updated_at,\n  created_by,\n  assignee_id,\n  shared_with\nFROM\n  loan_contract\nWHERE\n  tenant_id = $1\n  AND id = $2\n" rows_affected=0 rows_returned=1 elapsed=97.930774ms elapsed_secs=0.097930774
2025-08-18T14:22:24.599016Z DEBUG sqlx::query: summary="SELECT lt.id, lt.contract_id, lt.tenant_id, ‚Ä¶" db.statement="\n\nSELECT\n  lt.id,\n  lt.contract_id,\n  lt.tenant_id,\n  lt.contact_id,\n  lt.transaction_type,\n  lt.amount,\n  lt.date AS \"date!\",\n  lt.note,\n  -- √©p non-null cho c√°c tr∆∞·ªùng t√≠nh to√°n (map v√†o i32/i64)\n  0 :: int4 AS \"days_from_prev!\",\n  0 :: int8 AS \"interest_for_period!\",\n  0 :: int8 AS \"accumulated_interest!\",\n  0 :: int8 AS \"principal_balance!\",\n  lt.created_at AS \"created_at!\",\n  lt.updated_at AS \"updated_at!\"\nFROM\n  loan_transaction lt\nWHERE\n  lt.tenant_id = $1\n  AND lt.contract_id = $2\nORDER BY\n  lt.date ASC,\n  lt.id ASC\n" rows_affected=2 rows_returned=2 elapsed=56.221478ms elapsed_secs=0.056221478
2025-08-18T14:40:43.882982Z DEBUG rustls::common_state: Sending warning alert CloseNotify    
2025-08-18T14:40:43.938184Z DEBUG rustls::common_state: Sending warning alert CloseNotify    
2025-08-18T14:40:43.989713Z DEBUG rustls::common_state: Sending warning alert CloseNotify    
2025-08-18T14:40:44.050030Z DEBUG rustls::common_state: Sending warning alert CloseNotify    
2025-08-18T14:51:28.303429Z  WARN sqlx_postgres::options::parse: ignoring unrecognized connect parameter key=ssl value=true
2025-08-18T14:51:28.404382Z DEBUG rustls::client::hs: No cached session for DnsName("ap-southeast-1.e4c6174f-6538-4e47-93bf-0a2503819047.aws.yugabyte.cloud")    
2025-08-18T14:51:28.405145Z DEBUG rustls::client::hs: Not resuming any session    
2025-08-18T14:51:28.500050Z DEBUG rustls::client::hs: Using ciphersuite TLS13_AES_256_GCM_SHA384    
2025-08-18T14:51:28.500599Z DEBUG rustls::client::tls13: Not resuming    
2025-08-18T14:51:28.500789Z DEBUG rustls::client::tls13: TLS1.3 encrypted extensions: []    
2025-08-18T14:51:28.500953Z DEBUG rustls::client::hs: ALPN protocol is None    
2025-08-18T14:51:28.501098Z DEBUG rustls::client::tls13: Got CertificateRequest CertificateRequestPayloadTLS13 { context: , extensions: [SignatureAlgorithms([ECDSA_NISTP256_SHA256, ECDSA_NISTP384_SHA384, ECDSA_NISTP521_SHA512, ED25519, ED448, Unknown(2057), Unknown(2058), Unknown(2059), RSA_PSS_SHA256, RSA_PSS_SHA384, RSA_PSS_SHA512, RSA_PKCS1_SHA256, RSA_PKCS1_SHA384, RSA_PKCS1_SHA512, Unknown(771), Unknown(769)]), AuthorityNames([DistinguishedName(305b31153013060355040a130c597567616279746520496e633142304006035504030c392a2e65346336313734662d363533382d346534372d393362662d3061323530333831393034372e6177732e79756761627974652e636c6f7564), DistinguishedName(30818b310b3009060355040613025553310b3009060355040813024341311230100603550407130953756e6e7976616c6531153013060355040a130c597567616279746520496e6331173015060355040b130e597567616279746520436c6f7564312b302906035504031322597567616279746520436c6f7564205375626f7264696e6174652043412070726f64), DistinguishedName(308184310b3009060355040613025553310b3009060355040813024341311230100603550407130953756e6e7976616c6531153013060355040a130c597567616279746520496e6331173015060355040b130e597567616279746520436c6f7564312430220603550403131b597567616279746520436c6f756420526f6f742043412070726f64)])] }    
2025-08-18T14:51:28.501284Z DEBUG rustls::client::common: Client auth requested but no cert/sigscheme available    
2025-08-18T14:57:36.939019Z DEBUG axum::core::auth: üîê Middleware nh·∫≠n request: /list
2025-08-18T14:57:36.939240Z DEBUG axum::core::auth: üîê Middleware nh·∫≠n request: /ed8c286a-c68b-49cb-b2ca-3a0ddf17573b
2025-08-18T14:57:36.939859Z ERROR axum::core::auth: ‚ùå Middleware decode JWT l·ªói: Error(ExpiredSignature)
2025-08-18T14:57:36.939962Z ERROR axum::core::auth: ‚ùå Middleware decode JWT l·ªói: Error(ExpiredSignature)
2025-08-18T14:59:31.694058Z DEBUG axum::core::auth: üîê Middleware nh·∫≠n request: /ed8c286a-c68b-49cb-b2ca-3a0ddf17573b
2025-08-18T14:59:31.694114Z DEBUG axum::core::auth: üîê Middleware nh·∫≠n request: /list
2025-08-18T14:59:31.695259Z ERROR axum::core::auth: ‚ùå Middleware decode JWT l·ªói: Error(ExpiredSignature)
2025-08-18T14:59:31.695251Z ERROR axum::core::auth: ‚ùå Middleware decode JWT l·ªói: Error(ExpiredSignature)
2025-08-18T14:59:45.656515Z DEBUG axum::core::auth: üîê Middleware nh·∫≠n request: /ed8c286a-c68b-49cb-b2ca-3a0ddf17573b/update
2025-08-18T14:59:45.657631Z ERROR axum::core::auth: ‚ùå Middleware decode JWT l·ªói: Error(ExpiredSignature)
2025-08-18T14:59:54.228926Z DEBUG axum::core::auth: üîê Middleware nh·∫≠n request: /ed8c286a-c68b-49cb-b2ca-3a0ddf17573b/update
2025-08-18T14:59:54.229121Z ERROR axum::core::auth: ‚ùå Middleware decode JWT l·ªói: Error(ExpiredSignature)
2025-08-18T15:00:38.537829Z DEBUG axum::core::auth: üîê Middleware nh·∫≠n request: /list
2025-08-18T15:00:38.537844Z DEBUG axum::core::auth: üîê Middleware nh·∫≠n request: /ed8c286a-c68b-49cb-b2ca-3a0ddf17573b
2025-08-18T15:00:38.538192Z ERROR axum::core::auth: ‚ùå Middleware decode JWT l·ªói: Error(ExpiredSignature)
2025-08-18T15:00:38.538334Z ERROR axum::core::auth: ‚ùå Middleware decode JWT l·ªói: Error(ExpiredSignature)
2025-08-18T15:00:57.573351Z DEBUG sqlx::query: summary="SELECT tenant_id, shard_id FROM ‚Ä¶" db.statement="\n\nSELECT\n  tenant_id,\n  shard_id\nFROM\n  tenant\nWHERE\n  slug = $1\n" rows_affected=0 rows_returned=1 elapsed=142.457633ms elapsed_secs=0.142457633
2025-08-18T15:00:57.812124Z DEBUG rustls::client::hs: No cached session for DnsName("ap-southeast-1.e4c6174f-6538-4e47-93bf-0a2503819047.aws.yugabyte.cloud")    
2025-08-18T15:00:57.812468Z DEBUG rustls::client::hs: Not resuming any session    
2025-08-18T15:00:57.906469Z DEBUG rustls::client::hs: Using ciphersuite TLS13_AES_256_GCM_SHA384    
2025-08-18T15:00:57.907176Z DEBUG rustls::client::tls13: Not resuming    
2025-08-18T15:00:57.909486Z DEBUG rustls::client::tls13: TLS1.3 encrypted extensions: []    
2025-08-18T15:00:57.909872Z DEBUG rustls::client::hs: ALPN protocol is None    
2025-08-18T15:00:57.910881Z DEBUG rustls::client::tls13: Got CertificateRequest CertificateRequestPayloadTLS13 { context: , extensions: [SignatureAlgorithms([ECDSA_NISTP256_SHA256, ECDSA_NISTP384_SHA384, ECDSA_NISTP521_SHA512, ED25519, ED448, Unknown(2057), Unknown(2058), Unknown(2059), RSA_PSS_SHA256, RSA_PSS_SHA384, RSA_PSS_SHA512, RSA_PKCS1_SHA256, RSA_PKCS1_SHA384, RSA_PKCS1_SHA512, Unknown(771), Unknown(769)]), AuthorityNames([DistinguishedName(305b31153013060355040a130c597567616279746520496e633142304006035504030c392a2e65346336313734662d363533382d346534372d393362662d3061323530333831393034372e6177732e79756761627974652e636c6f7564), DistinguishedName(30818b310b3009060355040613025553310b3009060355040813024341311230100603550407130953756e6e7976616c6531153013060355040a130c597567616279746520496e6331173015060355040b130e597567616279746520436c6f7564312b302906035504031322597567616279746520436c6f7564205375626f7264696e6174652043412070726f64), DistinguishedName(308184310b3009060355040613025553310b3009060355040813024341311230100603550407130953756e6e7976616c6531153013060355040a130c597567616279746520496e6331173015060355040b130e597567616279746520436c6f7564312430220603550403131b597567616279746520436c6f756420526f6f742043412070726f64)])] }    
2025-08-18T15:00:57.913170Z DEBUG rustls::client::common: Client auth requested but no cert/sigscheme available    
2025-08-18T15:00:58.208936Z DEBUG sqlx::query: summary="SELECT tenant_id, user_id, email, ‚Ä¶" db.statement="\n\nSELECT\n  tenant_id,\n  user_id,\n  email,\n  name,\n  password_hash\nFROM\n  users\nWHERE\n  email = $1\n  AND tenant_id = $2\n" rows_affected=0 rows_returned=1 elapsed=152.795125ms elapsed_secs=0.152795125
2025-08-18T15:00:59.103087Z DEBUG axum::core::auth: üîê Middleware nh·∫≠n request: /list
2025-08-18T15:00:59.111171Z DEBUG axum::core::auth: üîê Middleware nh·∫≠n request: /me/modules
2025-08-18T15:00:59.309502Z DEBUG sqlx::query: summary="SELECT EXISTS ( SELECT ‚Ä¶" db.statement="\n\nSELECT\n  EXISTS (\n    SELECT\n      1\n    FROM\n      user_roles ur\n      JOIN roles r ON r.tenant_id = ur.tenant_id\n      AND r.id = ur.role_id\n    WHERE\n      ur.tenant_id = $1\n      AND ur.user_id = $2\n      AND r.name = 'admin'\n  )\n" rows_affected=0 rows_returned=1 elapsed=137.522756ms elapsed_secs=0.137522756
2025-08-18T15:00:59.319881Z DEBUG sqlx::query: summary="SELECT id, COALESCE(NULLIF(name,''), display_name, ‚Ä¶" db.statement="\n\nSELECT\n  id,\n  COALESCE(\n    NULLIF(name, ''),\n    display_name,\n    email,\n    phone,\n    '(kh√¥ng t√™n)'\n  ) AS \"name!: String\",\n  display_name,\n  email,\n  phone,\n  is_company,\n  NULLIF(tags_cached, '') AS \"tags?: String\"\nFROM\n  contact\nWHERE\n  tenant_id = $1\n  AND (\n    $2 :: bool IS NULL\n    OR is_company = $2\n  )\nORDER BY\n  created_at DESC\nLIMIT\n  $3 OFFSET $4\n" rows_affected=1 rows_returned=1 elapsed=164.469871ms elapsed_secs=0.164469871
2025-08-18T15:00:59.322419Z DEBUG axum::core::auth: üîê Middleware nh·∫≠n request: /list
2025-08-18T15:00:59.435755Z DEBUG rustls::client::hs: No cached session for DnsName("ap-southeast-1.e4c6174f-6538-4e47-93bf-0a2503819047.aws.yugabyte.cloud")    
2025-08-18T15:00:59.435953Z DEBUG rustls::client::hs: Not resuming any session    
2025-08-18T15:00:59.538953Z DEBUG rustls::client::hs: No cached session for DnsName("ap-southeast-1.e4c6174f-6538-4e47-93bf-0a2503819047.aws.yugabyte.cloud")    
2025-08-18T15:00:59.539371Z DEBUG rustls::client::hs: Not resuming any session    
2025-08-18T15:00:59.555540Z DEBUG rustls::client::hs: Using ciphersuite TLS13_AES_256_GCM_SHA384    
2025-08-18T15:00:59.555842Z DEBUG rustls::client::tls13: Not resuming    
2025-08-18T15:00:59.558199Z DEBUG rustls::client::tls13: TLS1.3 encrypted extensions: []    
2025-08-18T15:00:59.558668Z DEBUG rustls::client::hs: ALPN protocol is None    
2025-08-18T15:00:59.558867Z DEBUG rustls::client::tls13: Got CertificateRequest CertificateRequestPayloadTLS13 { context: , extensions: [SignatureAlgorithms([ECDSA_NISTP256_SHA256, ECDSA_NISTP384_SHA384, ECDSA_NISTP521_SHA512, ED25519, ED448, Unknown(2057), Unknown(2058), Unknown(2059), RSA_PSS_SHA256, RSA_PSS_SHA384, RSA_PSS_SHA512, RSA_PKCS1_SHA256, RSA_PKCS1_SHA384, RSA_PKCS1_SHA512, Unknown(771), Unknown(769)]), AuthorityNames([DistinguishedName(305b31153013060355040a130c597567616279746520496e633142304006035504030c392a2e65346336313734662d363533382d346534372d393362662d3061323530333831393034372e6177732e79756761627974652e636c6f7564), DistinguishedName(30818b310b3009060355040613025553310b3009060355040813024341311230100603550407130953756e6e7976616c6531153013060355040a130c597567616279746520496e6331173015060355040b130e597567616279746520436c6f7564312b302906035504031322597567616279746520436c6f7564205375626f7264696e6174652043412070726f64), DistinguishedName(308184310b3009060355040613025553310b3009060355040813024341311230100603550407130953756e6e7976616c6531153013060355040a130c597567616279746520496e6331173015060355040b130e597567616279746520436c6f7564312430220603550403131b597567616279746520436c6f756420526f6f742043412070726f64)])] }    
2025-08-18T15:00:59.559533Z DEBUG rustls::client::common: Client auth requested but no cert/sigscheme available    
2025-08-18T15:00:59.660454Z DEBUG rustls::client::hs: Using ciphersuite TLS13_AES_256_GCM_SHA384    
2025-08-18T15:00:59.660655Z DEBUG rustls::client::tls13: Not resuming    
2025-08-18T15:00:59.660889Z DEBUG rustls::client::tls13: TLS1.3 encrypted extensions: []    
2025-08-18T15:00:59.660958Z DEBUG rustls::client::hs: ALPN protocol is None    
2025-08-18T15:00:59.661099Z DEBUG rustls::client::tls13: Got CertificateRequest CertificateRequestPayloadTLS13 { context: , extensions: [SignatureAlgorithms([ECDSA_NISTP256_SHA256, ECDSA_NISTP384_SHA384, ECDSA_NISTP521_SHA512, ED25519, ED448, Unknown(2057), Unknown(2058), Unknown(2059), RSA_PSS_SHA256, RSA_PSS_SHA384, RSA_PSS_SHA512, RSA_PKCS1_SHA256, RSA_PKCS1_SHA384, RSA_PKCS1_SHA512, Unknown(771), Unknown(769)]), AuthorityNames([DistinguishedName(305b31153013060355040a130c597567616279746520496e633142304006035504030c392a2e65346336313734662d363533382d346534372d393362662d3061323530333831393034372e6177732e79756761627974652e636c6f7564), DistinguishedName(30818b310b3009060355040613025553310b3009060355040813024341311230100603550407130953756e6e7976616c6531153013060355040a130c597567616279746520496e6331173015060355040b130e597567616279746520436c6f7564312b302906035504031322597567616279746520436c6f7564205375626f7264696e6174652043412070726f64), DistinguishedName(308184310b3009060355040613025553310b3009060355040813024341311230100603550407130953756e6e7976616c6531153013060355040a130c597567616279746520496e6331173015060355040b130e597567616279746520436c6f7564312430220603550403131b597567616279746520436c6f756420526f6f742043412070726f64)])] }    
2025-08-18T15:00:59.661325Z DEBUG rustls::client::common: Client auth requested but no cert/sigscheme available    
2025-08-18T15:00:59.884331Z DEBUG sqlx::query: summary="SELECT (module_name || '.access') ‚Ä¶" db.statement="\n\nSELECT\n  (module_name || '.access') AS perm\nFROM\n  available_module\nORDER BY\n  module_name\n" rows_affected=5 rows_returned=5 elapsed=175.491072ms elapsed_secs=0.175491072
2025-08-18T15:00:59.886442Z DEBUG axum::core::auth: üîê Middleware nh·∫≠n request: /me/modules
2025-08-18T15:00:59.989554Z DEBUG sqlx::query: summary="SELECT EXISTS ( SELECT ‚Ä¶" db.statement="\n\nSELECT\n  EXISTS (\n    SELECT\n      1\n    FROM\n      user_roles ur\n      JOIN roles r ON r.tenant_id = ur.tenant_id\n      AND r.id = ur.role_id\n    WHERE\n      ur.tenant_id = $1\n      AND ur.user_id = $2\n      AND r.name = 'admin'\n  )\n" rows_affected=0 rows_returned=1 elapsed=51.417494ms elapsed_secs=0.051417494
2025-08-18T15:01:00.222847Z DEBUG sqlx::query: summary="SELECT id, COALESCE(NULLIF(name,''), display_name, ‚Ä¶" db.statement="\n\nSELECT\n  id,\n  COALESCE(\n    NULLIF(name, ''),\n    display_name,\n    email,\n    phone,\n    '(kh√¥ng t√™n)'\n  ) AS \"name!: String\",\n  display_name,\n  email,\n  phone,\n  is_company,\n  NULLIF(tags_cached, '') AS \"tags?: String\"\nFROM\n  contact\nWHERE\n  tenant_id = $1\n  AND (\n    $2 :: bool IS NULL\n    OR is_company = $2\n  )\nORDER BY\n  created_at DESC\nLIMIT\n  $3 OFFSET $4\n" rows_affected=1 rows_returned=1 elapsed=408.241458ms elapsed_secs=0.408241458
2025-08-18T15:01:00.305706Z DEBUG sqlx::query: summary="SELECT (module_name || '.access') ‚Ä¶" db.statement="\n\nSELECT\n  (module_name || '.access') AS perm\nFROM\n  available_module\nORDER BY\n  module_name\n" rows_affected=5 rows_returned=5 elapsed=266.756329ms elapsed_secs=0.266756329
2025-08-18T15:01:02.770212Z DEBUG axum::core::auth: üîê Middleware nh·∫≠n request: /list
2025-08-18T15:01:03.033648Z DEBUG sqlx::query: summary="SELECT id, tenant_id, contact_id, ‚Ä¶" db.statement="\n\nSELECT\n  id,\n  tenant_id,\n  contact_id,\n  name,\n  interest_rate,\n  term_months,\n  date_start,\n  date_end,\n  collateral_description,\n  collateral_value,\n  storage_fee_rate,\n  storage_fee,\n  current_principal,\n  current_interest,\n  accumulated_interest,\n  total_paid_interest,\n  total_settlement_amount,\n  state,\n  created_at,\n  updated_at,\n  created_by,\n  assignee_id,\n  shared_with,\n  0 :: int8 AS \"total_paid_principal!\"\nFROM\n  loan_contract\nWHERE\n  tenant_id = $1\nORDER BY\n  date_start DESC\n" rows_affected=1 rows_returned=1 elapsed=197.812264ms elapsed_secs=0.197812264
2025-08-18T15:01:03.040046Z DEBUG axum::core::auth: üîê Middleware nh·∫≠n request: /list
2025-08-18T15:01:03.257133Z DEBUG sqlx::query: summary="SELECT id, tenant_id, contact_id, ‚Ä¶" db.statement="\n\nSELECT\n  id,\n  tenant_id,\n  contact_id,\n  name,\n  interest_rate,\n  term_months,\n  date_start,\n  date_end,\n  collateral_description,\n  collateral_value,\n  storage_fee_rate,\n  storage_fee,\n  current_principal,\n  current_interest,\n  accumulated_interest,\n  total_paid_interest,\n  total_settlement_amount,\n  state,\n  created_at,\n  updated_at,\n  created_by,\n  assignee_id,\n  shared_with,\n  0 :: int8 AS \"total_paid_principal!\"\nFROM\n  loan_contract\nWHERE\n  tenant_id = $1\nORDER BY\n  date_start DESC\n" rows_affected=1 rows_returned=1 elapsed=161.85915ms elapsed_secs=0.16185915
2025-08-18T15:01:04.886204Z DEBUG axum::core::auth: üîê Middleware nh·∫≠n request: /list
2025-08-18T15:01:04.889295Z DEBUG axum::core::auth: üîê Middleware nh·∫≠n request: /ed8c286a-c68b-49cb-b2ca-3a0ddf17573b
2025-08-18T15:01:05.008698Z DEBUG sqlx::query: summary="SELECT id, COALESCE(NULLIF(name,''), display_name, ‚Ä¶" db.statement="\n\nSELECT\n  id,\n  COALESCE(\n    NULLIF(name, ''),\n    display_name,\n    email,\n    phone,\n    '(kh√¥ng t√™n)'\n  ) AS \"name!: String\",\n  display_name,\n  email,\n  phone,\n  is_company,\n  NULLIF(tags_cached, '') AS \"tags?: String\"\nFROM\n  contact\nWHERE\n  tenant_id = $1\n  AND (\n    $2 :: bool IS NULL\n    OR is_company = $2\n  )\nORDER BY\n  created_at DESC\nLIMIT\n  $3 OFFSET $4\n" rows_affected=1 rows_returned=1 elapsed=58.171567ms elapsed_secs=0.058171567
2025-08-18T15:01:05.013825Z DEBUG axum::core::auth: üîê Middleware nh·∫≠n request: /list
2025-08-18T15:01:05.085541Z DEBUG sqlx::query: summary="SELECT id, tenant_id, contact_id, ‚Ä¶" db.statement="\n\nSELECT\n  id,\n  tenant_id,\n  contact_id,\n  name,\n  interest_rate,\n  term_months,\n  date_start,\n  date_end,\n  collateral_description,\n  collateral_value,\n  storage_fee_rate,\n  storage_fee,\n  current_principal,\n  current_interest,\n  accumulated_interest,\n  total_paid_interest,\n  total_settlement_amount,\n  state,\n  created_at,\n  updated_at,\n  created_by,\n  assignee_id,\n  shared_with,\n  0 :: int8 AS \"total_paid_principal!\"\nFROM\n  loan_contract\nWHERE\n  tenant_id = $1\n  AND id = $2\n" rows_affected=0 rows_returned=1 elapsed=141.823664ms elapsed_secs=0.141823664
2025-08-18T15:01:05.235009Z DEBUG sqlx::query: summary="SELECT id, COALESCE(NULLIF(name,''), display_name, ‚Ä¶" db.statement="\n\nSELECT\n  id,\n  COALESCE(\n    NULLIF(name, ''),\n    display_name,\n    email,\n    phone,\n    '(kh√¥ng t√™n)'\n  ) AS \"name!: String\",\n  display_name,\n  email,\n  phone,\n  is_company,\n  NULLIF(tags_cached, '') AS \"tags?: String\"\nFROM\n  contact\nWHERE\n  tenant_id = $1\n  AND (\n    $2 :: bool IS NULL\n    OR is_company = $2\n  )\nORDER BY\n  created_at DESC\nLIMIT\n  $3 OFFSET $4\n" rows_affected=1 rows_returned=1 elapsed=154.927196ms elapsed_secs=0.154927196
2025-08-18T15:01:05.306060Z DEBUG sqlx::query: summary="SELECT lt.id, lt.contract_id, lt.tenant_id, ‚Ä¶" db.statement="\n\nSELECT\n  lt.id,\n  lt.contract_id,\n  lt.tenant_id,\n  lt.contact_id,\n  lt.transaction_type,\n  lt.amount,\n  lt.date AS \"date!\",\n  lt.note,\n  -- √©p non-null cho c√°c tr∆∞·ªùng t√≠nh to√°n (map v√†o i32/i64)\n  0 :: int4 AS \"days_from_prev!\",\n  0 :: int8 AS \"interest_for_period!\",\n  0 :: int8 AS \"accumulated_interest!\",\n  0 :: int8 AS \"principal_balance!\",\n  0 :: int8 AS \"principal_applied!\",  -- üëà m·ªõi\n  0 :: int8 AS \"interest_applied!\",  -- üëà m·ªõi\n  lt.created_at AS \"created_at!\",\n  lt.updated_at AS \"updated_at!\"\nFROM\n  loan_transaction lt\nWHERE\n  lt.tenant_id = $1\n  AND lt.contract_id = $2\nORDER BY\n  lt.date ASC,\n  lt.id ASC\n" rows_affected=2 rows_returned=2 elapsed=159.301908ms elapsed_secs=0.159301908
2025-08-18T15:01:05.312682Z DEBUG axum::core::auth: üîê Middleware nh·∫≠n request: /ed8c286a-c68b-49cb-b2ca-3a0ddf17573b
2025-08-18T15:01:05.542391Z DEBUG sqlx::query: summary="SELECT id, tenant_id, contact_id, ‚Ä¶" db.statement="\n\nSELECT\n  id,\n  tenant_id,\n  contact_id,\n  name,\n  interest_rate,\n  term_months,\n  date_start,\n  date_end,\n  collateral_description,\n  collateral_value,\n  storage_fee_rate,\n  storage_fee,\n  current_principal,\n  current_interest,\n  accumulated_interest,\n  total_paid_interest,\n  total_settlement_amount,\n  state,\n  created_at,\n  updated_at,\n  created_by,\n  assignee_id,\n  shared_with,\n  0 :: int8 AS \"total_paid_principal!\"\nFROM\n  loan_contract\nWHERE\n  tenant_id = $1\n  AND id = $2\n" rows_affected=0 rows_returned=1 elapsed=157.362228ms elapsed_secs=0.157362228
2025-08-18T15:01:05.744019Z DEBUG sqlx::query: summary="SELECT lt.id, lt.contract_id, lt.tenant_id, ‚Ä¶" db.statement="\n\nSELECT\n  lt.id,\n  lt.contract_id,\n  lt.tenant_id,\n  lt.contact_id,\n  lt.transaction_type,\n  lt.amount,\n  lt.date AS \"date!\",\n  lt.note,\n  -- √©p non-null cho c√°c tr∆∞·ªùng t√≠nh to√°n (map v√†o i32/i64)\n  0 :: int4 AS \"days_from_prev!\",\n  0 :: int8 AS \"interest_for_period!\",\n  0 :: int8 AS \"accumulated_interest!\",\n  0 :: int8 AS \"principal_balance!\",\n  0 :: int8 AS \"principal_applied!\",  -- üëà m·ªõi\n  0 :: int8 AS \"interest_applied!\",  -- üëà m·ªõi\n  lt.created_at AS \"created_at!\",\n  lt.updated_at AS \"updated_at!\"\nFROM\n  loan_transaction lt\nWHERE\n  lt.tenant_id = $1\n  AND lt.contract_id = $2\nORDER BY\n  lt.date ASC,\n  lt.id ASC\n" rows_affected=2 rows_returned=2 elapsed=150.228488ms elapsed_secs=0.150228488
2025-08-18T15:02:06.937891Z DEBUG axum::core::auth: üîê Middleware nh·∫≠n request: /ed8c286a-c68b-49cb-b2ca-3a0ddf17573b
2025-08-18T15:02:06.938867Z DEBUG axum::core::auth: üîê Middleware nh·∫≠n request: /list
2025-08-18T15:02:07.146462Z DEBUG sqlx::query: summary="SELECT id, tenant_id, contact_id, ‚Ä¶" db.statement="\n\nSELECT\n  id,\n  tenant_id,\n  contact_id,\n  name,\n  interest_rate,\n  term_months,\n  date_start,\n  date_end,\n  collateral_description,\n  collateral_value,\n  storage_fee_rate,\n  storage_fee,\n  current_principal,\n  current_interest,\n  accumulated_interest,\n  total_paid_interest,\n  total_settlement_amount,\n  state,\n  created_at,\n  updated_at,\n  created_by,\n  assignee_id,\n  shared_with,\n  0 :: int8 AS \"total_paid_principal!\"\nFROM\n  loan_contract\nWHERE\n  tenant_id = $1\n  AND id = $2\n" rows_affected=0 rows_returned=1 elapsed=122.706829ms elapsed_secs=0.122706829
2025-08-18T15:02:07.161406Z DEBUG sqlx::query: summary="SELECT id, COALESCE(NULLIF(name,''), display_name, ‚Ä¶" db.statement="\n\nSELECT\n  id,\n  COALESCE(\n    NULLIF(name, ''),\n    display_name,\n    email,\n    phone,\n    '(kh√¥ng t√™n)'\n  ) AS \"name!: String\",\n  display_name,\n  email,\n  phone,\n  is_company,\n  NULLIF(tags_cached, '') AS \"tags?: String\"\nFROM\n  contact\nWHERE\n  tenant_id = $1\n  AND (\n    $2 :: bool IS NULL\n    OR is_company = $2\n  )\nORDER BY\n  created_at DESC\nLIMIT\n  $3 OFFSET $4\n" rows_affected=1 rows_returned=1 elapsed=161.573683ms elapsed_secs=0.161573683
2025-08-18T15:02:07.395151Z DEBUG sqlx::query: summary="SELECT lt.id, lt.contract_id, lt.tenant_id, ‚Ä¶" db.statement="\n\nSELECT\n  lt.id,\n  lt.contract_id,\n  lt.tenant_id,\n  lt.contact_id,\n  lt.transaction_type,\n  lt.amount,\n  lt.date AS \"date!\",\n  lt.note,\n  -- √©p non-null cho c√°c tr∆∞·ªùng t√≠nh to√°n (map v√†o i32/i64)\n  0 :: int4 AS \"days_from_prev!\",\n  0 :: int8 AS \"interest_for_period!\",\n  0 :: int8 AS \"accumulated_interest!\",\n  0 :: int8 AS \"principal_balance!\",\n  0 :: int8 AS \"principal_applied!\",  -- üëà m·ªõi\n  0 :: int8 AS \"interest_applied!\",  -- üëà m·ªõi\n  lt.created_at AS \"created_at!\",\n  lt.updated_at AS \"updated_at!\"\nFROM\n  loan_transaction lt\nWHERE\n  lt.tenant_id = $1\n  AND lt.contract_id = $2\nORDER BY\n  lt.date ASC,\n  lt.id ASC\n" rows_affected=2 rows_returned=2 elapsed=174.000599ms elapsed_secs=0.174000599
2025-08-18T15:05:57.938900Z DEBUG axum::core::auth: üîê Middleware nh·∫≠n request: /list
2025-08-18T15:05:57.940611Z DEBUG axum::core::auth: üîê Middleware nh·∫≠n request: /ed8c286a-c68b-49cb-b2ca-3a0ddf17573b
2025-08-18T15:05:58.036464Z DEBUG sqlx::query: summary="SELECT id, COALESCE(NULLIF(name,''), display_name, ‚Ä¶" db.statement="\n\nSELECT\n  id,\n  COALESCE(\n    NULLIF(name, ''),\n    display_name,\n    email,\n    phone,\n    '(kh√¥ng t√™n)'\n  ) AS \"name!: String\",\n  display_name,\n  email,\n  phone,\n  is_company,\n  NULLIF(tags_cached, '') AS \"tags?: String\"\nFROM\n  contact\nWHERE\n  tenant_id = $1\n  AND (\n    $2 :: bool IS NULL\n    OR is_company = $2\n  )\nORDER BY\n  created_at DESC\nLIMIT\n  $3 OFFSET $4\n" rows_affected=1 rows_returned=1 elapsed=47.242141ms elapsed_secs=0.047242141
2025-08-18T15:05:58.061251Z DEBUG sqlx::query: summary="SELECT id, tenant_id, contact_id, ‚Ä¶" db.statement="\n\nSELECT\n  id,\n  tenant_id,\n  contact_id,\n  name,\n  interest_rate,\n  term_months,\n  date_start,\n  date_end,\n  collateral_description,\n  collateral_value,\n  storage_fee_rate,\n  storage_fee,\n  current_principal,\n  current_interest,\n  accumulated_interest,\n  total_paid_interest,\n  total_settlement_amount,\n  state,\n  created_at,\n  updated_at,\n  created_by,\n  assignee_id,\n  shared_with,\n  0 :: int8 AS \"total_paid_principal!\"\nFROM\n  loan_contract\nWHERE\n  tenant_id = $1\n  AND id = $2\n" rows_affected=0 rows_returned=1 elapsed=57.914034ms elapsed_secs=0.057914034
2025-08-18T15:05:58.170042Z DEBUG sqlx::query: summary="SELECT lt.id, lt.contract_id, lt.tenant_id, ‚Ä¶" db.statement="\n\nSELECT\n  lt.id,\n  lt.contract_id,\n  lt.tenant_id,\n  lt.contact_id,\n  lt.transaction_type,\n  lt.amount,\n  lt.date AS \"date!\",\n  lt.note,\n  -- √©p non-null cho c√°c tr∆∞·ªùng t√≠nh to√°n (map v√†o i32/i64)\n  0 :: int4 AS \"days_from_prev!\",\n  0 :: int8 AS \"interest_for_period!\",\n  0 :: int8 AS \"accumulated_interest!\",\n  0 :: int8 AS \"principal_balance!\",\n  0 :: int8 AS \"principal_applied!\",  -- üëà m·ªõi\n  0 :: int8 AS \"interest_applied!\",  -- üëà m·ªõi\n  lt.created_at AS \"created_at!\",\n  lt.updated_at AS \"updated_at!\"\nFROM\n  loan_transaction lt\nWHERE\n  lt.tenant_id = $1\n  AND lt.contract_id = $2\nORDER BY\n  lt.date ASC,\n  lt.id ASC\n" rows_affected=2 rows_returned=2 elapsed=49.329907ms elapsed_secs=0.049329907
2025-08-18T15:06:40.213959Z DEBUG axum::core::auth: üîê Middleware nh·∫≠n request: /ed8c286a-c68b-49cb-b2ca-3a0ddf17573b/update
2025-08-18T15:06:40.484731Z DEBUG sqlx::query: summary="UPDATE loan_contract SET contact_id ‚Ä¶" db.statement="\n\nUPDATE\n  loan_contract\nSET\n  contact_id = $1,\n  name = $2,\n  interest_rate = $3,\n  term_months = $4,\n  date_start = $5,\n  date_end = $6,\n  collateral_description = $7,\n  collateral_value = $8,\n  assignee_id = $9,\n  shared_with = $10,\n  updated_at = NOW()\nWHERE\n  id = $11\n  AND tenant_id = $12\nRETURNING\n  id,\n  tenant_id,\n  contact_id,\n  name,\n  interest_rate,\n  term_months,\n  date_start,\n  date_end,\n  collateral_description,\n  collateral_value,\n  storage_fee_rate,\n  storage_fee,\n  current_principal,\n  current_interest,\n  accumulated_interest,\n  total_paid_interest,\n  total_settlement_amount,\n  state,\n  created_at,\n  updated_at,\n  created_by,\n  assignee_id,\n  shared_with,\n  0 :: int8 AS \"total_paid_principal!\"\n" rows_affected=0 rows_returned=1 elapsed=139.547889ms elapsed_secs=0.139547889
2025-08-18T15:06:40.616680Z DEBUG sqlx::query: summary="DELETE FROM loan_transaction WHERE ‚Ä¶" db.statement="\n\nDELETE FROM\n  loan_transaction\nWHERE\n  contract_id = $1\n  AND tenant_id = $2\n" rows_affected=2 rows_returned=0 elapsed=129.612327ms elapsed_secs=0.129612327
2025-08-18T15:06:40.745790Z DEBUG sqlx::query: summary="INSERT INTO loan_transaction ( ‚Ä¶" db.statement="\n\nINSERT INTO\n  loan_transaction (\n    contract_id,\n    tenant_id,\n    contact_id,\n    transaction_type,\n    amount,\n    \"date\",\n    note,\n    created_by,\n    assignee_id,\n    shared_with\n  )\nVALUES\n  ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10)\n" rows_affected=1 rows_returned=0 elapsed=122.048262ms elapsed_secs=0.122048262
2025-08-18T15:06:40.809776Z DEBUG sqlx::query: summary="INSERT INTO loan_transaction ( ‚Ä¶" db.statement="\n\nINSERT INTO\n  loan_transaction (\n    contract_id,\n    tenant_id,\n    contact_id,\n    transaction_type,\n    amount,\n    \"date\",\n    note,\n    created_by,\n    assignee_id,\n    shared_with\n  )\nVALUES\n  ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10)\n" rows_affected=1 rows_returned=0 elapsed=60.522963ms elapsed_secs=0.060522963
2025-08-18T15:06:40.868912Z DEBUG sqlx::query: summary="COMMIT" db.statement="" rows_affected=0 rows_returned=0 elapsed=58.580035ms elapsed_secs=0.058580035
2025-08-18T15:06:40.886816Z DEBUG axum::core::auth: üîê Middleware nh·∫≠n request: /ed8c286a-c68b-49cb-b2ca-3a0ddf17573b
2025-08-18T15:06:40.984787Z DEBUG sqlx::query: summary="SELECT id, tenant_id, contact_id, ‚Ä¶" db.statement="\n\nSELECT\n  id,\n  tenant_id,\n  contact_id,\n  name,\n  interest_rate,\n  term_months,\n  date_start,\n  date_end,\n  collateral_description,\n  collateral_value,\n  storage_fee_rate,\n  storage_fee,\n  current_principal,\n  current_interest,\n  accumulated_interest,\n  total_paid_interest,\n  total_settlement_amount,\n  state,\n  created_at,\n  updated_at,\n  created_by,\n  assignee_id,\n  shared_with,\n  0 :: int8 AS \"total_paid_principal!\"\nFROM\n  loan_contract\nWHERE\n  tenant_id = $1\n  AND id = $2\n" rows_affected=0 rows_returned=1 elapsed=46.884434ms elapsed_secs=0.046884434
2025-08-18T15:06:41.232665Z DEBUG sqlx::query: summary="SELECT lt.id, lt.contract_id, lt.tenant_id, ‚Ä¶" db.statement="\n\nSELECT\n  lt.id,\n  lt.contract_id,\n  lt.tenant_id,\n  lt.contact_id,\n  lt.transaction_type,\n  lt.amount,\n  lt.date AS \"date!\",\n  lt.note,\n  -- √©p non-null cho c√°c tr∆∞·ªùng t√≠nh to√°n (map v√†o i32/i64)\n  0 :: int4 AS \"days_from_prev!\",\n  0 :: int8 AS \"interest_for_period!\",\n  0 :: int8 AS \"accumulated_interest!\",\n  0 :: int8 AS \"principal_balance!\",\n  0 :: int8 AS \"principal_applied!\",  -- üëà m·ªõi\n  0 :: int8 AS \"interest_applied!\",  -- üëà m·ªõi\n  lt.created_at AS \"created_at!\",\n  lt.updated_at AS \"updated_at!\"\nFROM\n  loan_transaction lt\nWHERE\n  lt.tenant_id = $1\n  AND lt.contract_id = $2\nORDER BY\n  lt.date ASC,\n  lt.id ASC\n" rows_affected=2 rows_returned=2 elapsed=180.772432ms elapsed_secs=0.180772432
2025-08-18T16:21:48.972051Z ERROR axum::core::auth: ‚ùå Middleware decode JWT l·ªói: Error(ExpiredSignature)
2025-08-18T16:21:48.974232Z ERROR axum::core::auth: ‚ùå Middleware decode JWT l·ªói: Error(ExpiredSignature)
2025-08-18T16:21:49.983642Z ERROR axum::core::auth: ‚ùå Middleware decode JWT l·ªói: Error(ExpiredSignature)
2025-08-18T16:21:49.986436Z ERROR axum::core::auth: ‚ùå Middleware decode JWT l·ªói: Error(ExpiredSignature)
2025-08-18T16:21:49.989337Z ERROR axum::core::auth: ‚ùå Middleware decode JWT l·ªói: Error(ExpiredSignature)
2025-08-18T16:21:49.990631Z ERROR axum::core::auth: ‚ùå Middleware decode JWT l·ªói: Error(ExpiredSignature)
2025-08-18T16:22:18.476450Z ERROR axum::module::loan::handler: ‚ùå L·ªói update_contract: Protocol("S·ªë ti·ªÅn thu l√£i v∆∞·ª£t qu√° l√£i hi·ªán t·∫°i")
2025-08-18T16:23:21.174827Z ERROR axum::module::loan::handler: ‚ùå L·ªói update_contract: Protocol("S·ªë ti·ªÅn thu l√£i v∆∞·ª£t qu√° l√£i hi·ªán t·∫°i")
2025-08-18T16:23:49.628171Z ERROR axum::module::loan::handler: ‚ùå L·ªói update_contract: Protocol("S·ªë ti·ªÅn thu l√£i v∆∞·ª£t qu√° l√£i hi·ªán t·∫°i")
2025-08-18T16:54:58.119874Z ERROR axum::module::loan::handler: ‚ùå L·ªói update_contract: Protocol("S·ªë ti·ªÅn thu l√£i v∆∞·ª£t qu√° l√£i hi·ªán t·∫°i")
2025-08-18T17:04:41.904897Z ERROR axum::module::loan::handler: ‚ùå L·ªói update_contract: Protocol("interest_overpaid: S·ªë ti·ªÅn thu l√£i v∆∞·ª£t qu√° l√£i hi·ªán t·∫°i")
2025-08-18T17:05:03.914558Z ERROR axum::module::loan::handler: ‚ùå L·ªói update_contract: Protocol("interest_overpaid: S·ªë ti·ªÅn thu l√£i v∆∞·ª£t qu√° l√£i hi·ªán t·∫°i")
