2025-11-06T17:43:38.205331Z  WARN sqlx_postgres::options::parse: ignoring unrecognized connect parameter key=ssl value=true
2025-11-06T17:43:38.406515Z DEBUG rustls::client::hs: No cached session for DnsName("ap-southeast-1.e4c6174f-6538-4e47-93bf-0a2503819047.aws.yugabyte.cloud")
2025-11-06T17:43:38.407052Z DEBUG rustls::client::hs: Not resuming any session
2025-11-06T17:43:38.538872Z DEBUG rustls::client::hs: Using ciphersuite TLS13_AES_256_GCM_SHA384
2025-11-06T17:43:38.539419Z DEBUG rustls::client::tls13: Not resuming
2025-11-06T17:43:38.540336Z DEBUG rustls::client::tls13: TLS1.3 encrypted extensions: []
2025-11-06T17:43:38.540387Z DEBUG rustls::client::hs: ALPN protocol is None
2025-11-06T17:43:38.540431Z DEBUG rustls::client::tls13: Got CertificateRequest CertificateRequestPayloadTLS13 { context: , extensions: [SignatureAlgorithms([ECDSA_NISTP256_SHA256, ECDSA_NISTP384_SHA384, ECDSA_NISTP521_SHA512, ED25519, ED448, Unknown(2057), Unknown(2058), Unknown(2059), RSA_PSS_SHA256, RSA_PSS_SHA384, RSA_PSS_SHA512, RSA_PKCS1_SHA256, RSA_PKCS1_SHA384, RSA_PKCS1_SHA512, Unknown(771), Unknown(769)]), AuthorityNames([DistinguishedName(305b31153013060355040a130c597567616279746520496e633142304006035504030c392a2e65346336313734662d363533382d346534372d393362662d3061323530333831393034372e6177732e79756761627974652e636c6f7564), DistinguishedName(30818b310b3009060355040613025553310b3009060355040813024341311230100603550407130953756e6e7976616c6531153013060355040a130c597567616279746520496e6331173015060355040b130e597567616279746520436c6f7564312b302906035504031322597567616279746520436c6f7564205375626f7264696e6174652043412070726f64), DistinguishedName(308184310b3009060355040613025553310b3009060355040813024341311230100603550407130953756e6e7976616c6531153013060355040a130c597567616279746520496e6331173015060355040b130e597567616279746520436c6f7564312430220603550403131b597567616279746520436c6f756420526f6f742043412070726f64)])] }
2025-11-06T17:43:38.540516Z DEBUG rustls::client::common: Client auth requested but no cert/sigscheme available
2025-11-06T17:43:38.702334Z  INFO milan::infra::wasm_loader: âœ… Loaded module: school
2025-11-06T17:43:38.702841Z  INFO milan: âœ… Loaded 1 modules ngoÃ i binary tá»« "../modules"
2025-11-06T17:43:38.707423Z  INFO milan::api::external_modules: âœ… Registered routes cho module: school
2025-11-06T17:43:50.576458Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /create
2025-11-06T17:46:54.310143Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /list?limit=100&is_company=true
2025-11-06T17:46:54.597707Z DEBUG sqlx::query: summary="SELECT id, COALESCE(NULLIF(name,''), display_name, â€¦" db.statement="\n\nSELECT\n  id,\n  COALESCE(\n    NULLIF(name, ''),\n    display_name,\n    email,\n    phone,\n    '(khÃ´ng tÃªn)'\n  ) AS \"name!: String\",\n  display_name,\n  email,\n  phone,\n  is_company,\n  NULLIF(tags_cached, '') AS \"tags?: String\",\n  state,\n  created_at,\n  updated_at,\n  national_id AS \"national_id?: String\" -- ðŸ‘ˆ THÃŠM\nFROM\n  contact\nWHERE\n  tenant_id = $1\n  AND (\n    $2 :: bool IS NULL\n    OR is_company = $2\n  )\nORDER BY\n  created_at DESC\nLIMIT\n  $3 OFFSET $4\n" rows_affected=7 rows_returned=7 elapsed=220.322766ms elapsed_secs=0.220322766
2025-11-06T17:47:18.196991Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /list?page=1&limit=10
2025-11-06T17:47:18.545255Z DEBUG sqlx::query: summary="SELECT am.id, am.name, am.move_type, â€¦" db.statement="\n\nSELECT\n  am.id,\n  am.name,\n  am.move_type,\n  am.partner_id,\n  c.name AS partner_name,\n  am.state,\n  am.payment_state,\n  am.invoice_date,\n  am.invoice_date_due,\n  am.ref,\n  am.amount_untaxed,\n  am.amount_tax,\n  am.amount_total,\n  am.amount_residual,\n  am.created_at,\n  am.updated_at\nFROM\n  account_move am\n  LEFT JOIN contact c ON am.tenant_id = c.tenant_id\n  AND am.partner_id = c.id\nWHERE\n  am.tenant_id = $1\n  AND (\n    $2 :: varchar IS NULL\n    OR am.move_type = $2\n  )\n  AND (\n    $3 :: varchar IS NULL\n    OR am.state = $3\n  )\n  AND (\n    $4 :: varchar IS NULL\n    OR am.payment_state = $4\n  )\n  AND (\n    $5 :: uuid IS NULL\n    OR am.partner_id = $5\n  )\n  AND (\n    $6 :: date IS NULL\n    OR am.invoice_date >= $6\n  )\n  AND (\n    $7 :: date IS NULL\n    OR am.invoice_date <= $7\n  )\n  AND (\n    $8 :: varchar IS NULL\n    OR am.name ILIKE $8\n  )\nORDER BY\n  am.invoice_date DESC,\n  am.created_at DESC\nLIMIT\n  $9 OFFSET $10\n" rows_affected=3 rows_returned=3 elapsed=277.265386ms elapsed_secs=0.277265386
2025-11-06T17:47:18.868274Z DEBUG rustls::client::hs: No cached session for DnsName("ap-southeast-1.e4c6174f-6538-4e47-93bf-0a2503819047.aws.yugabyte.cloud")
2025-11-06T17:47:18.868450Z DEBUG rustls::client::hs: Not resuming any session
2025-11-06T17:47:19.015923Z DEBUG rustls::client::hs: Using ciphersuite TLS13_AES_256_GCM_SHA384
2025-11-06T17:47:19.016087Z DEBUG rustls::client::tls13: Not resuming
2025-11-06T17:47:19.016692Z DEBUG rustls::client::tls13: TLS1.3 encrypted extensions: []
2025-11-06T17:47:19.016794Z DEBUG rustls::client::hs: ALPN protocol is None
2025-11-06T17:47:19.016879Z DEBUG rustls::client::tls13: Got CertificateRequest CertificateRequestPayloadTLS13 { context: , extensions: [SignatureAlgorithms([ECDSA_NISTP256_SHA256, ECDSA_NISTP384_SHA384, ECDSA_NISTP521_SHA512, ED25519, ED448, Unknown(2057), Unknown(2058), Unknown(2059), RSA_PSS_SHA256, RSA_PSS_SHA384, RSA_PSS_SHA512, RSA_PKCS1_SHA256, RSA_PKCS1_SHA384, RSA_PKCS1_SHA512, Unknown(771), Unknown(769)]), AuthorityNames([DistinguishedName(305b31153013060355040a130c597567616279746520496e633142304006035504030c392a2e65346336313734662d363533382d346534372d393362662d3061323530333831393034372e6177732e79756761627974652e636c6f7564), DistinguishedName(30818b310b3009060355040613025553310b3009060355040813024341311230100603550407130953756e6e7976616c6531153013060355040a130c597567616279746520496e6331173015060355040b130e597567616279746520436c6f7564312b302906035504031322597567616279746520436c6f7564205375626f7264696e6174652043412070726f64), DistinguishedName(308184310b3009060355040613025553310b3009060355040813024341311230100603550407130953756e6e7976616c6531153013060355040a130c597567616279746520496e6331173015060355040b130e597567616279746520436c6f7564312430220603550403131b597567616279746520436c6f756420526f6f742043412070726f64)])] }
2025-11-06T17:47:19.017022Z DEBUG rustls::client::common: Client auth requested but no cert/sigscheme available
2025-11-06T17:47:19.477194Z DEBUG sqlx::query: summary="SELECT COUNT(*) FROM account_move â€¦" db.statement="\n\nSELECT\n  COUNT(*)\nFROM\n  account_move am\nWHERE\n  am.tenant_id = $1\n  AND (\n    $2 :: varchar IS NULL\n    OR am.move_type = $2\n  )\n  AND (\n    $3 :: varchar IS NULL\n    OR am.state = $3\n  )\n  AND (\n    $4 :: varchar IS NULL\n    OR am.payment_state = $4\n  )\n  AND (\n    $5 :: uuid IS NULL\n    OR am.partner_id = $5\n  )\n  AND (\n    $6 :: date IS NULL\n    OR am.invoice_date >= $6\n  )\n  AND (\n    $7 :: date IS NULL\n    OR am.invoice_date <= $7\n  )\n  AND (\n    $8 :: varchar IS NULL\n    OR am.name ILIKE $8\n  )\n" rows_affected=0 rows_returned=1 elapsed=267.582703ms elapsed_secs=0.267582703
2025-11-06T17:47:19.478809Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /list?page=1&limit=10
2025-11-06T17:47:19.627895Z DEBUG sqlx::query: summary="SELECT am.id, am.name, am.move_type, â€¦" db.statement="\n\nSELECT\n  am.id,\n  am.name,\n  am.move_type,\n  am.partner_id,\n  c.name AS partner_name,\n  am.state,\n  am.payment_state,\n  am.invoice_date,\n  am.invoice_date_due,\n  am.ref,\n  am.amount_untaxed,\n  am.amount_tax,\n  am.amount_total,\n  am.amount_residual,\n  am.created_at,\n  am.updated_at\nFROM\n  account_move am\n  LEFT JOIN contact c ON am.tenant_id = c.tenant_id\n  AND am.partner_id = c.id\nWHERE\n  am.tenant_id = $1\n  AND (\n    $2 :: varchar IS NULL\n    OR am.move_type = $2\n  )\n  AND (\n    $3 :: varchar IS NULL\n    OR am.state = $3\n  )\n  AND (\n    $4 :: varchar IS NULL\n    OR am.payment_state = $4\n  )\n  AND (\n    $5 :: uuid IS NULL\n    OR am.partner_id = $5\n  )\n  AND (\n    $6 :: date IS NULL\n    OR am.invoice_date >= $6\n  )\n  AND (\n    $7 :: date IS NULL\n    OR am.invoice_date <= $7\n  )\n  AND (\n    $8 :: varchar IS NULL\n    OR am.name ILIKE $8\n  )\nORDER BY\n  am.invoice_date DESC,\n  am.created_at DESC\nLIMIT\n  $9 OFFSET $10\n" rows_affected=3 rows_returned=3 elapsed=69.57518ms elapsed_secs=0.06957518
2025-11-06T17:47:19.779229Z DEBUG sqlx::query: summary="SELECT COUNT(*) FROM account_move â€¦" db.statement="\n\nSELECT\n  COUNT(*)\nFROM\n  account_move am\nWHERE\n  am.tenant_id = $1\n  AND (\n    $2 :: varchar IS NULL\n    OR am.move_type = $2\n  )\n  AND (\n    $3 :: varchar IS NULL\n    OR am.state = $3\n  )\n  AND (\n    $4 :: varchar IS NULL\n    OR am.payment_state = $4\n  )\n  AND (\n    $5 :: uuid IS NULL\n    OR am.partner_id = $5\n  )\n  AND (\n    $6 :: date IS NULL\n    OR am.invoice_date >= $6\n  )\n  AND (\n    $7 :: date IS NULL\n    OR am.invoice_date <= $7\n  )\n  AND (\n    $8 :: varchar IS NULL\n    OR am.name ILIKE $8\n  )\n" rows_affected=0 rows_returned=1 elapsed=73.762636ms elapsed_secs=0.073762636
2025-11-06T17:47:56.983741Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /list?limit=100&is_company=true
2025-11-06T17:47:57.117603Z DEBUG sqlx::query: summary="SELECT id, COALESCE(NULLIF(name,''), display_name, â€¦" db.statement="\n\nSELECT\n  id,\n  COALESCE(\n    NULLIF(name, ''),\n    display_name,\n    email,\n    phone,\n    '(khÃ´ng tÃªn)'\n  ) AS \"name!: String\",\n  display_name,\n  email,\n  phone,\n  is_company,\n  NULLIF(tags_cached, '') AS \"tags?: String\",\n  state,\n  created_at,\n  updated_at,\n  national_id AS \"national_id?: String\" -- ðŸ‘ˆ THÃŠM\nFROM\n  contact\nWHERE\n  tenant_id = $1\n  AND (\n    $2 :: bool IS NULL\n    OR is_company = $2\n  )\nORDER BY\n  created_at DESC\nLIMIT\n  $3 OFFSET $4\n" rows_affected=7 rows_returned=7 elapsed=65.086023ms elapsed_secs=0.065086023
2025-11-06T17:47:57.120128Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /list?limit=100&is_company=true
2025-11-06T17:47:57.565357Z DEBUG sqlx::query: summary="SELECT id, COALESCE(NULLIF(name,''), display_name, â€¦" db.statement="\n\nSELECT\n  id,\n  COALESCE(\n    NULLIF(name, ''),\n    display_name,\n    email,\n    phone,\n    '(khÃ´ng tÃªn)'\n  ) AS \"name!: String\",\n  display_name,\n  email,\n  phone,\n  is_company,\n  NULLIF(tags_cached, '') AS \"tags?: String\",\n  state,\n  created_at,\n  updated_at,\n  national_id AS \"national_id?: String\" -- ðŸ‘ˆ THÃŠM\nFROM\n  contact\nWHERE\n  tenant_id = $1\n  AND (\n    $2 :: bool IS NULL\n    OR is_company = $2\n  )\nORDER BY\n  created_at DESC\nLIMIT\n  $3 OFFSET $4\n" rows_affected=7 rows_returned=7 elapsed=362.980151ms elapsed_secs=0.362980151
2025-11-06T17:47:59.990492Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /list?page=1&limit=10
2025-11-06T17:48:00.128370Z DEBUG sqlx::query: summary="SELECT am.id, am.name, am.move_type, â€¦" db.statement="\n\nSELECT\n  am.id,\n  am.name,\n  am.move_type,\n  am.partner_id,\n  c.name AS partner_name,\n  am.state,\n  am.payment_state,\n  am.invoice_date,\n  am.invoice_date_due,\n  am.ref,\n  am.amount_untaxed,\n  am.amount_tax,\n  am.amount_total,\n  am.amount_residual,\n  am.created_at,\n  am.updated_at\nFROM\n  account_move am\n  LEFT JOIN contact c ON am.tenant_id = c.tenant_id\n  AND am.partner_id = c.id\nWHERE\n  am.tenant_id = $1\n  AND (\n    $2 :: varchar IS NULL\n    OR am.move_type = $2\n  )\n  AND (\n    $3 :: varchar IS NULL\n    OR am.state = $3\n  )\n  AND (\n    $4 :: varchar IS NULL\n    OR am.payment_state = $4\n  )\n  AND (\n    $5 :: uuid IS NULL\n    OR am.partner_id = $5\n  )\n  AND (\n    $6 :: date IS NULL\n    OR am.invoice_date >= $6\n  )\n  AND (\n    $7 :: date IS NULL\n    OR am.invoice_date <= $7\n  )\n  AND (\n    $8 :: varchar IS NULL\n    OR am.name ILIKE $8\n  )\nORDER BY\n  am.invoice_date DESC,\n  am.created_at DESC\nLIMIT\n  $9 OFFSET $10\n" rows_affected=3 rows_returned=3 elapsed=68.378556ms elapsed_secs=0.068378556
2025-11-06T17:48:00.283994Z DEBUG sqlx::query: summary="SELECT COUNT(*) FROM account_move â€¦" db.statement="\n\nSELECT\n  COUNT(*)\nFROM\n  account_move am\nWHERE\n  am.tenant_id = $1\n  AND (\n    $2 :: varchar IS NULL\n    OR am.move_type = $2\n  )\n  AND (\n    $3 :: varchar IS NULL\n    OR am.state = $3\n  )\n  AND (\n    $4 :: varchar IS NULL\n    OR am.payment_state = $4\n  )\n  AND (\n    $5 :: uuid IS NULL\n    OR am.partner_id = $5\n  )\n  AND (\n    $6 :: date IS NULL\n    OR am.invoice_date >= $6\n  )\n  AND (\n    $7 :: date IS NULL\n    OR am.invoice_date <= $7\n  )\n  AND (\n    $8 :: varchar IS NULL\n    OR am.name ILIKE $8\n  )\n" rows_affected=0 rows_returned=1 elapsed=74.403238ms elapsed_secs=0.074403238
2025-11-06T17:48:00.285638Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /list?page=1&limit=10
2025-11-06T17:48:00.450534Z DEBUG sqlx::query: summary="SELECT am.id, am.name, am.move_type, â€¦" db.statement="\n\nSELECT\n  am.id,\n  am.name,\n  am.move_type,\n  am.partner_id,\n  c.name AS partner_name,\n  am.state,\n  am.payment_state,\n  am.invoice_date,\n  am.invoice_date_due,\n  am.ref,\n  am.amount_untaxed,\n  am.amount_tax,\n  am.amount_total,\n  am.amount_residual,\n  am.created_at,\n  am.updated_at\nFROM\n  account_move am\n  LEFT JOIN contact c ON am.tenant_id = c.tenant_id\n  AND am.partner_id = c.id\nWHERE\n  am.tenant_id = $1\n  AND (\n    $2 :: varchar IS NULL\n    OR am.move_type = $2\n  )\n  AND (\n    $3 :: varchar IS NULL\n    OR am.state = $3\n  )\n  AND (\n    $4 :: varchar IS NULL\n    OR am.payment_state = $4\n  )\n  AND (\n    $5 :: uuid IS NULL\n    OR am.partner_id = $5\n  )\n  AND (\n    $6 :: date IS NULL\n    OR am.invoice_date >= $6\n  )\n  AND (\n    $7 :: date IS NULL\n    OR am.invoice_date <= $7\n  )\n  AND (\n    $8 :: varchar IS NULL\n    OR am.name ILIKE $8\n  )\nORDER BY\n  am.invoice_date DESC,\n  am.created_at DESC\nLIMIT\n  $9 OFFSET $10\n" rows_affected=3 rows_returned=3 elapsed=69.363545ms elapsed_secs=0.069363545
2025-11-06T17:48:00.601516Z DEBUG sqlx::query: summary="SELECT COUNT(*) FROM account_move â€¦" db.statement="\n\nSELECT\n  COUNT(*)\nFROM\n  account_move am\nWHERE\n  am.tenant_id = $1\n  AND (\n    $2 :: varchar IS NULL\n    OR am.move_type = $2\n  )\n  AND (\n    $3 :: varchar IS NULL\n    OR am.state = $3\n  )\n  AND (\n    $4 :: varchar IS NULL\n    OR am.payment_state = $4\n  )\n  AND (\n    $5 :: uuid IS NULL\n    OR am.partner_id = $5\n  )\n  AND (\n    $6 :: date IS NULL\n    OR am.invoice_date >= $6\n  )\n  AND (\n    $7 :: date IS NULL\n    OR am.invoice_date <= $7\n  )\n  AND (\n    $8 :: varchar IS NULL\n    OR am.name ILIKE $8\n  )\n" rows_affected=0 rows_returned=1 elapsed=74.810987ms elapsed_secs=0.074810987
2025-11-06T17:48:22.553137Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /list?limit=100&is_company=true
2025-11-06T17:48:22.688004Z DEBUG sqlx::query: summary="SELECT id, COALESCE(NULLIF(name,''), display_name, â€¦" db.statement="\n\nSELECT\n  id,\n  COALESCE(\n    NULLIF(name, ''),\n    display_name,\n    email,\n    phone,\n    '(khÃ´ng tÃªn)'\n  ) AS \"name!: String\",\n  display_name,\n  email,\n  phone,\n  is_company,\n  NULLIF(tags_cached, '') AS \"tags?: String\",\n  state,\n  created_at,\n  updated_at,\n  national_id AS \"national_id?: String\" -- ðŸ‘ˆ THÃŠM\nFROM\n  contact\nWHERE\n  tenant_id = $1\n  AND (\n    $2 :: bool IS NULL\n    OR is_company = $2\n  )\nORDER BY\n  created_at DESC\nLIMIT\n  $3 OFFSET $4\n" rows_affected=7 rows_returned=7 elapsed=66.199921ms elapsed_secs=0.066199921
2025-11-06T17:48:22.689621Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /list?limit=100&is_company=true
2025-11-06T17:48:22.841102Z DEBUG sqlx::query: summary="SELECT id, COALESCE(NULLIF(name,''), display_name, â€¦" db.statement="\n\nSELECT\n  id,\n  COALESCE(\n    NULLIF(name, ''),\n    display_name,\n    email,\n    phone,\n    '(khÃ´ng tÃªn)'\n  ) AS \"name!: String\",\n  display_name,\n  email,\n  phone,\n  is_company,\n  NULLIF(tags_cached, '') AS \"tags?: String\",\n  state,\n  created_at,\n  updated_at,\n  national_id AS \"national_id?: String\" -- ðŸ‘ˆ THÃŠM\nFROM\n  contact\nWHERE\n  tenant_id = $1\n  AND (\n    $2 :: bool IS NULL\n    OR is_company = $2\n  )\nORDER BY\n  created_at DESC\nLIMIT\n  $3 OFFSET $4\n" rows_affected=7 rows_returned=7 elapsed=74.833175ms elapsed_secs=0.074833175
2025-11-06T17:51:38.858232Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /profile
2025-11-06T17:51:38.859738Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /profile
2025-11-06T17:51:39.199426Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /list?limit=100&is_company=true
2025-11-06T17:51:39.349040Z DEBUG sqlx::query: summary="SELECT id, COALESCE(NULLIF(name,''), display_name, â€¦" db.statement="\n\nSELECT\n  id,\n  COALESCE(\n    NULLIF(name, ''),\n    display_name,\n    email,\n    phone,\n    '(khÃ´ng tÃªn)'\n  ) AS \"name!: String\",\n  display_name,\n  email,\n  phone,\n  is_company,\n  NULLIF(tags_cached, '') AS \"tags?: String\",\n  state,\n  created_at,\n  updated_at,\n  national_id AS \"national_id?: String\" -- ðŸ‘ˆ THÃŠM\nFROM\n  contact\nWHERE\n  tenant_id = $1\n  AND (\n    $2 :: bool IS NULL\n    OR is_company = $2\n  )\nORDER BY\n  created_at DESC\nLIMIT\n  $3 OFFSET $4\n" rows_affected=7 rows_returned=7 elapsed=70.631472ms elapsed_secs=0.070631472
2025-11-06T17:51:39.354115Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /list?limit=100&is_company=true
2025-11-06T17:51:39.523824Z DEBUG sqlx::query: summary="SELECT id, COALESCE(NULLIF(name,''), display_name, â€¦" db.statement="\n\nSELECT\n  id,\n  COALESCE(\n    NULLIF(name, ''),\n    display_name,\n    email,\n    phone,\n    '(khÃ´ng tÃªn)'\n  ) AS \"name!: String\",\n  display_name,\n  email,\n  phone,\n  is_company,\n  NULLIF(tags_cached, '') AS \"tags?: String\",\n  state,\n  created_at,\n  updated_at,\n  national_id AS \"national_id?: String\" -- ðŸ‘ˆ THÃŠM\nFROM\n  contact\nWHERE\n  tenant_id = $1\n  AND (\n    $2 :: bool IS NULL\n    OR is_company = $2\n  )\nORDER BY\n  created_at DESC\nLIMIT\n  $3 OFFSET $4\n" rows_affected=7 rows_returned=7 elapsed=79.995705ms elapsed_secs=0.079995705
2025-11-06T17:51:49.843948Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /profile
2025-11-06T17:51:49.846869Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /profile
2025-11-06T17:51:50.148106Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /list?limit=100&is_company=true
2025-11-06T17:51:50.292555Z DEBUG sqlx::query: summary="SELECT id, COALESCE(NULLIF(name,''), display_name, â€¦" db.statement="\n\nSELECT\n  id,\n  COALESCE(\n    NULLIF(name, ''),\n    display_name,\n    email,\n    phone,\n    '(khÃ´ng tÃªn)'\n  ) AS \"name!: String\",\n  display_name,\n  email,\n  phone,\n  is_company,\n  NULLIF(tags_cached, '') AS \"tags?: String\",\n  state,\n  created_at,\n  updated_at,\n  national_id AS \"national_id?: String\" -- ðŸ‘ˆ THÃŠM\nFROM\n  contact\nWHERE\n  tenant_id = $1\n  AND (\n    $2 :: bool IS NULL\n    OR is_company = $2\n  )\nORDER BY\n  created_at DESC\nLIMIT\n  $3 OFFSET $4\n" rows_affected=7 rows_returned=7 elapsed=65.669186ms elapsed_secs=0.065669186
2025-11-06T17:51:50.294332Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /list?limit=100&is_company=true
2025-11-06T17:51:50.446487Z DEBUG sqlx::query: summary="SELECT id, COALESCE(NULLIF(name,''), display_name, â€¦" db.statement="\n\nSELECT\n  id,\n  COALESCE(\n    NULLIF(name, ''),\n    display_name,\n    email,\n    phone,\n    '(khÃ´ng tÃªn)'\n  ) AS \"name!: String\",\n  display_name,\n  email,\n  phone,\n  is_company,\n  NULLIF(tags_cached, '') AS \"tags?: String\",\n  state,\n  created_at,\n  updated_at,\n  national_id AS \"national_id?: String\" -- ðŸ‘ˆ THÃŠM\nFROM\n  contact\nWHERE\n  tenant_id = $1\n  AND (\n    $2 :: bool IS NULL\n    OR is_company = $2\n  )\nORDER BY\n  created_at DESC\nLIMIT\n  $3 OFFSET $4\n" rows_affected=7 rows_returned=7 elapsed=73.85624ms elapsed_secs=0.07385624
2025-11-06T17:54:02.448514Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /profile
2025-11-06T17:54:02.454216Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /profile
2025-11-06T17:54:03.584507Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /list?limit=100&is_company=true
2025-11-06T17:54:03.598968Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /list?limit=100&is_company=true
2025-11-06T17:54:03.717674Z DEBUG sqlx::query: summary="SELECT id, COALESCE(NULLIF(name,''), display_name, â€¦" db.statement="\n\nSELECT\n  id,\n  COALESCE(\n    NULLIF(name, ''),\n    display_name,\n    email,\n    phone,\n    '(khÃ´ng tÃªn)'\n  ) AS \"name!: String\",\n  display_name,\n  email,\n  phone,\n  is_company,\n  NULLIF(tags_cached, '') AS \"tags?: String\",\n  state,\n  created_at,\n  updated_at,\n  national_id AS \"national_id?: String\" -- ðŸ‘ˆ THÃŠM\nFROM\n  contact\nWHERE\n  tenant_id = $1\n  AND (\n    $2 :: bool IS NULL\n    OR is_company = $2\n  )\nORDER BY\n  created_at DESC\nLIMIT\n  $3 OFFSET $4\n" rows_affected=7 rows_returned=7 elapsed=65.553143ms elapsed_secs=0.065553143
2025-11-06T17:54:03.755781Z DEBUG sqlx::query: summary="SELECT id, COALESCE(NULLIF(name,''), display_name, â€¦" db.statement="\n\nSELECT\n  id,\n  COALESCE(\n    NULLIF(name, ''),\n    display_name,\n    email,\n    phone,\n    '(khÃ´ng tÃªn)'\n  ) AS \"name!: String\",\n  display_name,\n  email,\n  phone,\n  is_company,\n  NULLIF(tags_cached, '') AS \"tags?: String\",\n  state,\n  created_at,\n  updated_at,\n  national_id AS \"national_id?: String\" -- ðŸ‘ˆ THÃŠM\nFROM\n  contact\nWHERE\n  tenant_id = $1\n  AND (\n    $2 :: bool IS NULL\n    OR is_company = $2\n  )\nORDER BY\n  created_at DESC\nLIMIT\n  $3 OFFSET $4\n" rows_affected=7 rows_returned=7 elapsed=74.720678ms elapsed_secs=0.074720678
2025-11-06T17:54:42.669624Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /profile
2025-11-06T17:54:42.691884Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /profile
2025-11-06T17:54:43.755149Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /list?limit=100&is_company=true
2025-11-06T17:54:43.767947Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /list?limit=100&is_company=true
2025-11-06T17:54:43.899709Z DEBUG sqlx::query: summary="SELECT id, COALESCE(NULLIF(name,''), display_name, â€¦" db.statement="\n\nSELECT\n  id,\n  COALESCE(\n    NULLIF(name, ''),\n    display_name,\n    email,\n    phone,\n    '(khÃ´ng tÃªn)'\n  ) AS \"name!: String\",\n  display_name,\n  email,\n  phone,\n  is_company,\n  NULLIF(tags_cached, '') AS \"tags?: String\",\n  state,\n  created_at,\n  updated_at,\n  national_id AS \"national_id?: String\" -- ðŸ‘ˆ THÃŠM\nFROM\n  contact\nWHERE\n  tenant_id = $1\n  AND (\n    $2 :: bool IS NULL\n    OR is_company = $2\n  )\nORDER BY\n  created_at DESC\nLIMIT\n  $3 OFFSET $4\n" rows_affected=7 rows_returned=7 elapsed=66.476259ms elapsed_secs=0.066476259
2025-11-06T17:54:43.922099Z DEBUG sqlx::query: summary="SELECT id, COALESCE(NULLIF(name,''), display_name, â€¦" db.statement="\n\nSELECT\n  id,\n  COALESCE(\n    NULLIF(name, ''),\n    display_name,\n    email,\n    phone,\n    '(khÃ´ng tÃªn)'\n  ) AS \"name!: String\",\n  display_name,\n  email,\n  phone,\n  is_company,\n  NULLIF(tags_cached, '') AS \"tags?: String\",\n  state,\n  created_at,\n  updated_at,\n  national_id AS \"national_id?: String\" -- ðŸ‘ˆ THÃŠM\nFROM\n  contact\nWHERE\n  tenant_id = $1\n  AND (\n    $2 :: bool IS NULL\n    OR is_company = $2\n  )\nORDER BY\n  created_at DESC\nLIMIT\n  $3 OFFSET $4\n" rows_affected=7 rows_returned=7 elapsed=75.038836ms elapsed_secs=0.075038836
2025-11-06T17:55:27.252553Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /profile
2025-11-06T17:55:27.255051Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /profile
2025-11-06T17:55:28.355691Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /list?limit=100&is_company=true
2025-11-06T17:55:28.364422Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /list?limit=100&is_company=true
2025-11-06T17:55:28.488914Z DEBUG sqlx::query: summary="SELECT id, COALESCE(NULLIF(name,''), display_name, â€¦" db.statement="\n\nSELECT\n  id,\n  COALESCE(\n    NULLIF(name, ''),\n    display_name,\n    email,\n    phone,\n    '(khÃ´ng tÃªn)'\n  ) AS \"name!: String\",\n  display_name,\n  email,\n  phone,\n  is_company,\n  NULLIF(tags_cached, '') AS \"tags?: String\",\n  state,\n  created_at,\n  updated_at,\n  national_id AS \"national_id?: String\" -- ðŸ‘ˆ THÃŠM\nFROM\n  contact\nWHERE\n  tenant_id = $1\n  AND (\n    $2 :: bool IS NULL\n    OR is_company = $2\n  )\nORDER BY\n  created_at DESC\nLIMIT\n  $3 OFFSET $4\n" rows_affected=7 rows_returned=7 elapsed=65.632651ms elapsed_secs=0.065632651
2025-11-06T17:55:28.516311Z DEBUG sqlx::query: summary="SELECT id, COALESCE(NULLIF(name,''), display_name, â€¦" db.statement="\n\nSELECT\n  id,\n  COALESCE(\n    NULLIF(name, ''),\n    display_name,\n    email,\n    phone,\n    '(khÃ´ng tÃªn)'\n  ) AS \"name!: String\",\n  display_name,\n  email,\n  phone,\n  is_company,\n  NULLIF(tags_cached, '') AS \"tags?: String\",\n  state,\n  created_at,\n  updated_at,\n  national_id AS \"national_id?: String\" -- ðŸ‘ˆ THÃŠM\nFROM\n  contact\nWHERE\n  tenant_id = $1\n  AND (\n    $2 :: bool IS NULL\n    OR is_company = $2\n  )\nORDER BY\n  created_at DESC\nLIMIT\n  $3 OFFSET $4\n" rows_affected=7 rows_returned=7 elapsed=74.44489ms elapsed_secs=0.07444489
2025-11-06T17:56:43.840697Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /profile
2025-11-06T17:56:43.842405Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /profile
2025-11-06T17:56:44.835948Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /list?limit=100&is_company=true
2025-11-06T17:56:44.855205Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /list?limit=100&is_company=true
2025-11-06T17:56:44.971618Z DEBUG sqlx::query: summary="SELECT id, COALESCE(NULLIF(name,''), display_name, â€¦" db.statement="\n\nSELECT\n  id,\n  COALESCE(\n    NULLIF(name, ''),\n    display_name,\n    email,\n    phone,\n    '(khÃ´ng tÃªn)'\n  ) AS \"name!: String\",\n  display_name,\n  email,\n  phone,\n  is_company,\n  NULLIF(tags_cached, '') AS \"tags?: String\",\n  state,\n  created_at,\n  updated_at,\n  national_id AS \"national_id?: String\" -- ðŸ‘ˆ THÃŠM\nFROM\n  contact\nWHERE\n  tenant_id = $1\n  AND (\n    $2 :: bool IS NULL\n    OR is_company = $2\n  )\nORDER BY\n  created_at DESC\nLIMIT\n  $3 OFFSET $4\n" rows_affected=7 rows_returned=7 elapsed=66.779838ms elapsed_secs=0.066779838
2025-11-06T17:56:45.008466Z DEBUG sqlx::query: summary="SELECT id, COALESCE(NULLIF(name,''), display_name, â€¦" db.statement="\n\nSELECT\n  id,\n  COALESCE(\n    NULLIF(name, ''),\n    display_name,\n    email,\n    phone,\n    '(khÃ´ng tÃªn)'\n  ) AS \"name!: String\",\n  display_name,\n  email,\n  phone,\n  is_company,\n  NULLIF(tags_cached, '') AS \"tags?: String\",\n  state,\n  created_at,\n  updated_at,\n  national_id AS \"national_id?: String\" -- ðŸ‘ˆ THÃŠM\nFROM\n  contact\nWHERE\n  tenant_id = $1\n  AND (\n    $2 :: bool IS NULL\n    OR is_company = $2\n  )\nORDER BY\n  created_at DESC\nLIMIT\n  $3 OFFSET $4\n" rows_affected=7 rows_returned=7 elapsed=74.447683ms elapsed_secs=0.074447683
2025-11-06T17:57:30.920036Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /list
2025-11-06T17:57:31.053756Z DEBUG sqlx::query: summary="SELECT id, COALESCE(NULLIF(name,''), display_name, â€¦" db.statement="\n\nSELECT\n  id,\n  COALESCE(\n    NULLIF(name, ''),\n    display_name,\n    email,\n    phone,\n    '(khÃ´ng tÃªn)'\n  ) AS \"name!: String\",\n  display_name,\n  email,\n  phone,\n  is_company,\n  NULLIF(tags_cached, '') AS \"tags?: String\",\n  state,\n  created_at,\n  updated_at,\n  national_id AS \"national_id?: String\" -- ðŸ‘ˆ THÃŠM\nFROM\n  contact\nWHERE\n  tenant_id = $1\n  AND (\n    $2 :: bool IS NULL\n    OR is_company = $2\n  )\nORDER BY\n  created_at DESC\nLIMIT\n  $3 OFFSET $4\n" rows_affected=12 rows_returned=12 elapsed=66.003805ms elapsed_secs=0.066003805
2025-11-06T17:57:31.055466Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /list
2025-11-06T17:57:31.211837Z DEBUG sqlx::query: summary="SELECT id, COALESCE(NULLIF(name,''), display_name, â€¦" db.statement="\n\nSELECT\n  id,\n  COALESCE(\n    NULLIF(name, ''),\n    display_name,\n    email,\n    phone,\n    '(khÃ´ng tÃªn)'\n  ) AS \"name!: String\",\n  display_name,\n  email,\n  phone,\n  is_company,\n  NULLIF(tags_cached, '') AS \"tags?: String\",\n  state,\n  created_at,\n  updated_at,\n  national_id AS \"national_id?: String\" -- ðŸ‘ˆ THÃŠM\nFROM\n  contact\nWHERE\n  tenant_id = $1\n  AND (\n    $2 :: bool IS NULL\n    OR is_company = $2\n  )\nORDER BY\n  created_at DESC\nLIMIT\n  $3 OFFSET $4\n" rows_affected=12 rows_returned=12 elapsed=75.392042ms elapsed_secs=0.075392042
2025-11-06T17:57:38.045251Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /list
2025-11-06T17:57:38.179141Z DEBUG sqlx::query: summary="SELECT id, COALESCE(NULLIF(name,''), display_name, â€¦" db.statement="\n\nSELECT\n  id,\n  COALESCE(\n    NULLIF(name, ''),\n    display_name,\n    email,\n    phone,\n    '(khÃ´ng tÃªn)'\n  ) AS \"name!: String\",\n  display_name,\n  email,\n  phone,\n  is_company,\n  NULLIF(tags_cached, '') AS \"tags?: String\",\n  state,\n  created_at,\n  updated_at,\n  national_id AS \"national_id?: String\" -- ðŸ‘ˆ THÃŠM\nFROM\n  contact\nWHERE\n  tenant_id = $1\n  AND (\n    $2 :: bool IS NULL\n    OR is_company = $2\n  )\nORDER BY\n  created_at DESC\nLIMIT\n  $3 OFFSET $4\n" rows_affected=12 rows_returned=12 elapsed=65.918779ms elapsed_secs=0.065918779
2025-11-06T17:57:38.181785Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /list
2025-11-06T17:57:38.338876Z DEBUG sqlx::query: summary="SELECT id, COALESCE(NULLIF(name,''), display_name, â€¦" db.statement="\n\nSELECT\n  id,\n  COALESCE(\n    NULLIF(name, ''),\n    display_name,\n    email,\n    phone,\n    '(khÃ´ng tÃªn)'\n  ) AS \"name!: String\",\n  display_name,\n  email,\n  phone,\n  is_company,\n  NULLIF(tags_cached, '') AS \"tags?: String\",\n  state,\n  created_at,\n  updated_at,\n  national_id AS \"national_id?: String\" -- ðŸ‘ˆ THÃŠM\nFROM\n  contact\nWHERE\n  tenant_id = $1\n  AND (\n    $2 :: bool IS NULL\n    OR is_company = $2\n  )\nORDER BY\n  created_at DESC\nLIMIT\n  $3 OFFSET $4\n" rows_affected=12 rows_returned=12 elapsed=75.191998ms elapsed_secs=0.075191998
2025-11-06T18:00:50.036875Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /profile
2025-11-06T18:00:50.044439Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /profile
2025-11-06T18:01:04.020362Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /profile
2025-11-06T18:01:04.024222Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /profile
2025-11-06T18:01:42.159351Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /profile
2025-11-06T18:01:42.160919Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /profile
2025-11-06T18:04:06.096964Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /profile
2025-11-06T18:04:06.099992Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /profile
2025-11-06T18:04:55.602617Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /profile
2025-11-06T18:04:55.606112Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /profile
2025-11-06T18:05:11.171267Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /profile
2025-11-06T18:05:11.176855Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /profile
2025-11-06T18:06:38.102808Z  INFO milan::api::external_modules: âœ… Serving metadata cho module: school
2025-11-06T18:06:38.104542Z  INFO milan::api::external_modules: âœ… Serving metadata cho module: school
2025-11-06T18:06:39.776005Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /list
2025-11-06T18:06:39.909814Z DEBUG sqlx::query: summary="SELECT id, COALESCE(NULLIF(name,''), display_name, â€¦" db.statement="\n\nSELECT\n  id,\n  COALESCE(\n    NULLIF(name, ''),\n    display_name,\n    email,\n    phone,\n    '(khÃ´ng tÃªn)'\n  ) AS \"name!: String\",\n  display_name,\n  email,\n  phone,\n  is_company,\n  NULLIF(tags_cached, '') AS \"tags?: String\",\n  state,\n  created_at,\n  updated_at,\n  national_id AS \"national_id?: String\" -- ðŸ‘ˆ THÃŠM\nFROM\n  contact\nWHERE\n  tenant_id = $1\n  AND (\n    $2 :: bool IS NULL\n    OR is_company = $2\n  )\nORDER BY\n  created_at DESC\nLIMIT\n  $3 OFFSET $4\n" rows_affected=12 rows_returned=12 elapsed=65.43286ms elapsed_secs=0.06543286
2025-11-06T18:06:39.911410Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /list
2025-11-06T18:06:40.066382Z DEBUG sqlx::query: summary="SELECT id, COALESCE(NULLIF(name,''), display_name, â€¦" db.statement="\n\nSELECT\n  id,\n  COALESCE(\n    NULLIF(name, ''),\n    display_name,\n    email,\n    phone,\n    '(khÃ´ng tÃªn)'\n  ) AS \"name!: String\",\n  display_name,\n  email,\n  phone,\n  is_company,\n  NULLIF(tags_cached, '') AS \"tags?: String\",\n  state,\n  created_at,\n  updated_at,\n  national_id AS \"national_id?: String\" -- ðŸ‘ˆ THÃŠM\nFROM\n  contact\nWHERE\n  tenant_id = $1\n  AND (\n    $2 :: bool IS NULL\n    OR is_company = $2\n  )\nORDER BY\n  created_at DESC\nLIMIT\n  $3 OFFSET $4\n" rows_affected=12 rows_returned=12 elapsed=75.440423ms elapsed_secs=0.075440423
2025-11-06T18:06:43.577767Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /profile
2025-11-06T18:06:43.580563Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /profile
2025-11-06T18:06:44.649172Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /list
2025-11-06T18:06:44.661926Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /list
2025-11-06T18:06:44.782943Z DEBUG sqlx::query: summary="SELECT id, COALESCE(NULLIF(name,''), display_name, â€¦" db.statement="\n\nSELECT\n  id,\n  COALESCE(\n    NULLIF(name, ''),\n    display_name,\n    email,\n    phone,\n    '(khÃ´ng tÃªn)'\n  ) AS \"name!: String\",\n  display_name,\n  email,\n  phone,\n  is_company,\n  NULLIF(tags_cached, '') AS \"tags?: String\",\n  state,\n  created_at,\n  updated_at,\n  national_id AS \"national_id?: String\" -- ðŸ‘ˆ THÃŠM\nFROM\n  contact\nWHERE\n  tenant_id = $1\n  AND (\n    $2 :: bool IS NULL\n    OR is_company = $2\n  )\nORDER BY\n  created_at DESC\nLIMIT\n  $3 OFFSET $4\n" rows_affected=12 rows_returned=12 elapsed=65.423713ms elapsed_secs=0.065423713
2025-11-06T18:06:44.811908Z DEBUG sqlx::query: summary="SELECT id, COALESCE(NULLIF(name,''), display_name, â€¦" db.statement="\n\nSELECT\n  id,\n  COALESCE(\n    NULLIF(name, ''),\n    display_name,\n    email,\n    phone,\n    '(khÃ´ng tÃªn)'\n  ) AS \"name!: String\",\n  display_name,\n  email,\n  phone,\n  is_company,\n  NULLIF(tags_cached, '') AS \"tags?: String\",\n  state,\n  created_at,\n  updated_at,\n  national_id AS \"national_id?: String\" -- ðŸ‘ˆ THÃŠM\nFROM\n  contact\nWHERE\n  tenant_id = $1\n  AND (\n    $2 :: bool IS NULL\n    OR is_company = $2\n  )\nORDER BY\n  created_at DESC\nLIMIT\n  $3 OFFSET $4\n" rows_affected=12 rows_returned=12 elapsed=73.959411ms elapsed_secs=0.073959411
2025-11-06T18:08:53.712415Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /list?limit=100&is_company=true
2025-11-06T18:08:53.851210Z DEBUG sqlx::query: summary="SELECT id, COALESCE(NULLIF(name,''), display_name, â€¦" db.statement="\n\nSELECT\n  id,\n  COALESCE(\n    NULLIF(name, ''),\n    display_name,\n    email,\n    phone,\n    '(khÃ´ng tÃªn)'\n  ) AS \"name!: String\",\n  display_name,\n  email,\n  phone,\n  is_company,\n  NULLIF(tags_cached, '') AS \"tags?: String\",\n  state,\n  created_at,\n  updated_at,\n  national_id AS \"national_id?: String\" -- ðŸ‘ˆ THÃŠM\nFROM\n  contact\nWHERE\n  tenant_id = $1\n  AND (\n    $2 :: bool IS NULL\n    OR is_company = $2\n  )\nORDER BY\n  created_at DESC\nLIMIT\n  $3 OFFSET $4\n" rows_affected=7 rows_returned=7 elapsed=66.797186ms elapsed_secs=0.066797186
2025-11-06T18:08:53.853480Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /list?limit=100&is_company=true
2025-11-06T18:08:54.007871Z DEBUG sqlx::query: summary="SELECT id, COALESCE(NULLIF(name,''), display_name, â€¦" db.statement="\n\nSELECT\n  id,\n  COALESCE(\n    NULLIF(name, ''),\n    display_name,\n    email,\n    phone,\n    '(khÃ´ng tÃªn)'\n  ) AS \"name!: String\",\n  display_name,\n  email,\n  phone,\n  is_company,\n  NULLIF(tags_cached, '') AS \"tags?: String\",\n  state,\n  created_at,\n  updated_at,\n  national_id AS \"national_id?: String\" -- ðŸ‘ˆ THÃŠM\nFROM\n  contact\nWHERE\n  tenant_id = $1\n  AND (\n    $2 :: bool IS NULL\n    OR is_company = $2\n  )\nORDER BY\n  created_at DESC\nLIMIT\n  $3 OFFSET $4\n" rows_affected=7 rows_returned=7 elapsed=75.892034ms elapsed_secs=0.075892034
2025-11-06T18:08:59.608869Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /profile
2025-11-06T18:08:59.611351Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /profile
2025-11-06T18:08:59.966011Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /list?limit=100&is_company=true
2025-11-06T18:09:00.108298Z DEBUG sqlx::query: summary="SELECT id, COALESCE(NULLIF(name,''), display_name, â€¦" db.statement="\n\nSELECT\n  id,\n  COALESCE(\n    NULLIF(name, ''),\n    display_name,\n    email,\n    phone,\n    '(khÃ´ng tÃªn)'\n  ) AS \"name!: String\",\n  display_name,\n  email,\n  phone,\n  is_company,\n  NULLIF(tags_cached, '') AS \"tags?: String\",\n  state,\n  created_at,\n  updated_at,\n  national_id AS \"national_id?: String\" -- ðŸ‘ˆ THÃŠM\nFROM\n  contact\nWHERE\n  tenant_id = $1\n  AND (\n    $2 :: bool IS NULL\n    OR is_company = $2\n  )\nORDER BY\n  created_at DESC\nLIMIT\n  $3 OFFSET $4\n" rows_affected=7 rows_returned=7 elapsed=66.705755ms elapsed_secs=0.066705755
2025-11-06T18:09:00.109916Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /list?limit=100&is_company=true
2025-11-06T18:09:00.268401Z DEBUG sqlx::query: summary="SELECT id, COALESCE(NULLIF(name,''), display_name, â€¦" db.statement="\n\nSELECT\n  id,\n  COALESCE(\n    NULLIF(name, ''),\n    display_name,\n    email,\n    phone,\n    '(khÃ´ng tÃªn)'\n  ) AS \"name!: String\",\n  display_name,\n  email,\n  phone,\n  is_company,\n  NULLIF(tags_cached, '') AS \"tags?: String\",\n  state,\n  created_at,\n  updated_at,\n  national_id AS \"national_id?: String\" -- ðŸ‘ˆ THÃŠM\nFROM\n  contact\nWHERE\n  tenant_id = $1\n  AND (\n    $2 :: bool IS NULL\n    OR is_company = $2\n  )\nORDER BY\n  created_at DESC\nLIMIT\n  $3 OFFSET $4\n" rows_affected=7 rows_returned=7 elapsed=74.562013ms elapsed_secs=0.074562013
2025-11-06T18:09:04.424775Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /profile
2025-11-06T18:09:04.424774Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /profile
2025-11-06T18:09:05.384948Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /list?limit=100&is_company=true
2025-11-06T18:09:05.395389Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /list?limit=100&is_company=true
2025-11-06T18:09:05.515942Z DEBUG sqlx::query: summary="SELECT id, COALESCE(NULLIF(name,''), display_name, â€¦" db.statement="\n\nSELECT\n  id,\n  COALESCE(\n    NULLIF(name, ''),\n    display_name,\n    email,\n    phone,\n    '(khÃ´ng tÃªn)'\n  ) AS \"name!: String\",\n  display_name,\n  email,\n  phone,\n  is_company,\n  NULLIF(tags_cached, '') AS \"tags?: String\",\n  state,\n  created_at,\n  updated_at,\n  national_id AS \"national_id?: String\" -- ðŸ‘ˆ THÃŠM\nFROM\n  contact\nWHERE\n  tenant_id = $1\n  AND (\n    $2 :: bool IS NULL\n    OR is_company = $2\n  )\nORDER BY\n  created_at DESC\nLIMIT\n  $3 OFFSET $4\n" rows_affected=7 rows_returned=7 elapsed=64.38528ms elapsed_secs=0.06438528
2025-11-06T18:09:05.544993Z DEBUG sqlx::query: summary="SELECT id, COALESCE(NULLIF(name,''), display_name, â€¦" db.statement="\n\nSELECT\n  id,\n  COALESCE(\n    NULLIF(name, ''),\n    display_name,\n    email,\n    phone,\n    '(khÃ´ng tÃªn)'\n  ) AS \"name!: String\",\n  display_name,\n  email,\n  phone,\n  is_company,\n  NULLIF(tags_cached, '') AS \"tags?: String\",\n  state,\n  created_at,\n  updated_at,\n  national_id AS \"national_id?: String\" -- ðŸ‘ˆ THÃŠM\nFROM\n  contact\nWHERE\n  tenant_id = $1\n  AND (\n    $2 :: bool IS NULL\n    OR is_company = $2\n  )\nORDER BY\n  created_at DESC\nLIMIT\n  $3 OFFSET $4\n" rows_affected=7 rows_returned=7 elapsed=72.883585ms elapsed_secs=0.072883585
2025-11-06T18:12:02.981920Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /profile
2025-11-06T18:12:02.986541Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /profile
2025-11-06T18:12:04.018449Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /list?limit=100&is_company=true
2025-11-06T18:12:04.031735Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /list?limit=100&is_company=true
2025-11-06T18:12:04.149851Z DEBUG sqlx::query: summary="SELECT id, COALESCE(NULLIF(name,''), display_name, â€¦" db.statement="\n\nSELECT\n  id,\n  COALESCE(\n    NULLIF(name, ''),\n    display_name,\n    email,\n    phone,\n    '(khÃ´ng tÃªn)'\n  ) AS \"name!: String\",\n  display_name,\n  email,\n  phone,\n  is_company,\n  NULLIF(tags_cached, '') AS \"tags?: String\",\n  state,\n  created_at,\n  updated_at,\n  national_id AS \"national_id?: String\" -- ðŸ‘ˆ THÃŠM\nFROM\n  contact\nWHERE\n  tenant_id = $1\n  AND (\n    $2 :: bool IS NULL\n    OR is_company = $2\n  )\nORDER BY\n  created_at DESC\nLIMIT\n  $3 OFFSET $4\n" rows_affected=7 rows_returned=7 elapsed=64.929557ms elapsed_secs=0.064929557
2025-11-06T18:12:04.181639Z DEBUG sqlx::query: summary="SELECT id, COALESCE(NULLIF(name,''), display_name, â€¦" db.statement="\n\nSELECT\n  id,\n  COALESCE(\n    NULLIF(name, ''),\n    display_name,\n    email,\n    phone,\n    '(khÃ´ng tÃªn)'\n  ) AS \"name!: String\",\n  display_name,\n  email,\n  phone,\n  is_company,\n  NULLIF(tags_cached, '') AS \"tags?: String\",\n  state,\n  created_at,\n  updated_at,\n  national_id AS \"national_id?: String\" -- ðŸ‘ˆ THÃŠM\nFROM\n  contact\nWHERE\n  tenant_id = $1\n  AND (\n    $2 :: bool IS NULL\n    OR is_company = $2\n  )\nORDER BY\n  created_at DESC\nLIMIT\n  $3 OFFSET $4\n" rows_affected=7 rows_returned=7 elapsed=73.654251ms elapsed_secs=0.073654251
2025-11-06T18:16:15.519329Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /profile
2025-11-06T18:16:15.521134Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /profile
2025-11-06T18:16:15.856699Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /list?limit=100&is_company=true
2025-11-06T18:16:15.996016Z DEBUG sqlx::query: summary="SELECT id, COALESCE(NULLIF(name,''), display_name, â€¦" db.statement="\n\nSELECT\n  id,\n  COALESCE(\n    NULLIF(name, ''),\n    display_name,\n    email,\n    phone,\n    '(khÃ´ng tÃªn)'\n  ) AS \"name!: String\",\n  display_name,\n  email,\n  phone,\n  is_company,\n  NULLIF(tags_cached, '') AS \"tags?: String\",\n  state,\n  created_at,\n  updated_at,\n  national_id AS \"national_id?: String\" -- ðŸ‘ˆ THÃŠM\nFROM\n  contact\nWHERE\n  tenant_id = $1\n  AND (\n    $2 :: bool IS NULL\n    OR is_company = $2\n  )\nORDER BY\n  created_at DESC\nLIMIT\n  $3 OFFSET $4\n" rows_affected=7 rows_returned=7 elapsed=65.46325ms elapsed_secs=0.06546325
2025-11-06T18:16:15.998673Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /list?limit=100&is_company=true
2025-11-06T18:16:16.149282Z DEBUG sqlx::query: summary="SELECT id, COALESCE(NULLIF(name,''), display_name, â€¦" db.statement="\n\nSELECT\n  id,\n  COALESCE(\n    NULLIF(name, ''),\n    display_name,\n    email,\n    phone,\n    '(khÃ´ng tÃªn)'\n  ) AS \"name!: String\",\n  display_name,\n  email,\n  phone,\n  is_company,\n  NULLIF(tags_cached, '') AS \"tags?: String\",\n  state,\n  created_at,\n  updated_at,\n  national_id AS \"national_id?: String\" -- ðŸ‘ˆ THÃŠM\nFROM\n  contact\nWHERE\n  tenant_id = $1\n  AND (\n    $2 :: bool IS NULL\n    OR is_company = $2\n  )\nORDER BY\n  created_at DESC\nLIMIT\n  $3 OFFSET $4\n" rows_affected=7 rows_returned=7 elapsed=73.929821ms elapsed_secs=0.073929821
2025-11-06T18:17:38.032454Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /list?page=1&limit=10
2025-11-06T18:17:38.179767Z DEBUG sqlx::query: summary="SELECT am.id, am.name, am.move_type, â€¦" db.statement="\n\nSELECT\n  am.id,\n  am.name,\n  am.move_type,\n  am.partner_id,\n  c.name AS partner_name,\n  am.state,\n  am.payment_state,\n  am.invoice_date,\n  am.invoice_date_due,\n  am.ref,\n  am.amount_untaxed,\n  am.amount_tax,\n  am.amount_total,\n  am.amount_residual,\n  am.created_at,\n  am.updated_at\nFROM\n  account_move am\n  LEFT JOIN contact c ON am.tenant_id = c.tenant_id\n  AND am.partner_id = c.id\nWHERE\n  am.tenant_id = $1\n  AND (\n    $2 :: varchar IS NULL\n    OR am.move_type = $2\n  )\n  AND (\n    $3 :: varchar IS NULL\n    OR am.state = $3\n  )\n  AND (\n    $4 :: varchar IS NULL\n    OR am.payment_state = $4\n  )\n  AND (\n    $5 :: uuid IS NULL\n    OR am.partner_id = $5\n  )\n  AND (\n    $6 :: date IS NULL\n    OR am.invoice_date >= $6\n  )\n  AND (\n    $7 :: date IS NULL\n    OR am.invoice_date <= $7\n  )\n  AND (\n    $8 :: varchar IS NULL\n    OR am.name ILIKE $8\n  )\nORDER BY\n  am.invoice_date DESC,\n  am.created_at DESC\nLIMIT\n  $9 OFFSET $10\n" rows_affected=3 rows_returned=3 elapsed=70.404958ms elapsed_secs=0.070404958
2025-11-06T18:17:38.245239Z DEBUG rustls::common_state: Sending warning alert CloseNotify
2025-11-06T18:17:38.333586Z DEBUG sqlx::query: summary="SELECT COUNT(*) FROM account_move â€¦" db.statement="\n\nSELECT\n  COUNT(*)\nFROM\n  account_move am\nWHERE\n  am.tenant_id = $1\n  AND (\n    $2 :: varchar IS NULL\n    OR am.move_type = $2\n  )\n  AND (\n    $3 :: varchar IS NULL\n    OR am.state = $3\n  )\n  AND (\n    $4 :: varchar IS NULL\n    OR am.payment_state = $4\n  )\n  AND (\n    $5 :: uuid IS NULL\n    OR am.partner_id = $5\n  )\n  AND (\n    $6 :: date IS NULL\n    OR am.invoice_date >= $6\n  )\n  AND (\n    $7 :: date IS NULL\n    OR am.invoice_date <= $7\n  )\n  AND (\n    $8 :: varchar IS NULL\n    OR am.name ILIKE $8\n  )\n" rows_affected=0 rows_returned=1 elapsed=75.155299ms elapsed_secs=0.075155299
2025-11-06T18:17:38.335452Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /list?page=1&limit=10
2025-11-06T18:17:38.866719Z DEBUG rustls::client::hs: No cached session for DnsName("ap-southeast-1.e4c6174f-6538-4e47-93bf-0a2503819047.aws.yugabyte.cloud")
2025-11-06T18:17:38.867380Z DEBUG rustls::client::hs: Not resuming any session
2025-11-06T18:17:39.031929Z DEBUG rustls::client::hs: Using ciphersuite TLS13_AES_256_GCM_SHA384
2025-11-06T18:17:39.032283Z DEBUG rustls::client::tls13: Not resuming
2025-11-06T18:17:39.033017Z DEBUG rustls::client::tls13: TLS1.3 encrypted extensions: []
2025-11-06T18:17:39.033123Z DEBUG rustls::client::hs: ALPN protocol is None
2025-11-06T18:17:39.033218Z DEBUG rustls::client::tls13: Got CertificateRequest CertificateRequestPayloadTLS13 { context: , extensions: [SignatureAlgorithms([ECDSA_NISTP256_SHA256, ECDSA_NISTP384_SHA384, ECDSA_NISTP521_SHA512, ED25519, ED448, Unknown(2057), Unknown(2058), Unknown(2059), RSA_PSS_SHA256, RSA_PSS_SHA384, RSA_PSS_SHA512, RSA_PKCS1_SHA256, RSA_PKCS1_SHA384, RSA_PKCS1_SHA512, Unknown(771), Unknown(769)]), AuthorityNames([DistinguishedName(305b31153013060355040a130c597567616279746520496e633142304006035504030c392a2e65346336313734662d363533382d346534372d393362662d3061323530333831393034372e6177732e79756761627974652e636c6f7564), DistinguishedName(30818b310b3009060355040613025553310b3009060355040813024341311230100603550407130953756e6e7976616c6531153013060355040a130c597567616279746520496e6331173015060355040b130e597567616279746520436c6f7564312b302906035504031322597567616279746520436c6f7564205375626f7264696e6174652043412070726f64), DistinguishedName(308184310b3009060355040613025553310b3009060355040813024341311230100603550407130953756e6e7976616c6531153013060355040a130c597567616279746520496e6331173015060355040b130e597567616279746520436c6f7564312430220603550403131b597567616279746520436c6f756420526f6f742043412070726f64)])] }
2025-11-06T18:17:39.033461Z DEBUG rustls::client::common: Client auth requested but no cert/sigscheme available
2025-11-06T18:17:39.651008Z DEBUG sqlx::query: summary="SELECT am.id, am.name, am.move_type, â€¦" db.statement="\n\nSELECT\n  am.id,\n  am.name,\n  am.move_type,\n  am.partner_id,\n  c.name AS partner_name,\n  am.state,\n  am.payment_state,\n  am.invoice_date,\n  am.invoice_date_due,\n  am.ref,\n  am.amount_untaxed,\n  am.amount_tax,\n  am.amount_total,\n  am.amount_residual,\n  am.created_at,\n  am.updated_at\nFROM\n  account_move am\n  LEFT JOIN contact c ON am.tenant_id = c.tenant_id\n  AND am.partner_id = c.id\nWHERE\n  am.tenant_id = $1\n  AND (\n    $2 :: varchar IS NULL\n    OR am.move_type = $2\n  )\n  AND (\n    $3 :: varchar IS NULL\n    OR am.state = $3\n  )\n  AND (\n    $4 :: varchar IS NULL\n    OR am.payment_state = $4\n  )\n  AND (\n    $5 :: uuid IS NULL\n    OR am.partner_id = $5\n  )\n  AND (\n    $6 :: date IS NULL\n    OR am.invoice_date >= $6\n  )\n  AND (\n    $7 :: date IS NULL\n    OR am.invoice_date <= $7\n  )\n  AND (\n    $8 :: varchar IS NULL\n    OR am.name ILIKE $8\n  )\nORDER BY\n  am.invoice_date DESC,\n  am.created_at DESC\nLIMIT\n  $9 OFFSET $10\n" rows_affected=3 rows_returned=3 elapsed=411.255083ms elapsed_secs=0.411255083
2025-11-06T18:17:39.806338Z DEBUG sqlx::query: summary="SELECT COUNT(*) FROM account_move â€¦" db.statement="\n\nSELECT\n  COUNT(*)\nFROM\n  account_move am\nWHERE\n  am.tenant_id = $1\n  AND (\n    $2 :: varchar IS NULL\n    OR am.move_type = $2\n  )\n  AND (\n    $3 :: varchar IS NULL\n    OR am.state = $3\n  )\n  AND (\n    $4 :: varchar IS NULL\n    OR am.payment_state = $4\n  )\n  AND (\n    $5 :: uuid IS NULL\n    OR am.partner_id = $5\n  )\n  AND (\n    $6 :: date IS NULL\n    OR am.invoice_date >= $6\n  )\n  AND (\n    $7 :: date IS NULL\n    OR am.invoice_date <= $7\n  )\n  AND (\n    $8 :: varchar IS NULL\n    OR am.name ILIKE $8\n  )\n" rows_affected=0 rows_returned=1 elapsed=76.658132ms elapsed_secs=0.076658132
2025-11-06T18:17:44.392047Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /list?page=1&limit=10
2025-11-06T18:17:44.564190Z DEBUG sqlx::query: summary="SELECT am.id, am.name, am.move_type, â€¦" db.statement="\n\nSELECT\n  am.id,\n  am.name,\n  am.move_type,\n  am.partner_id,\n  c.name AS partner_name,\n  am.state,\n  am.payment_state,\n  am.invoice_date,\n  am.invoice_date_due,\n  am.ref,\n  am.amount_untaxed,\n  am.amount_tax,\n  am.amount_total,\n  am.amount_residual,\n  am.created_at,\n  am.updated_at\nFROM\n  account_move am\n  LEFT JOIN contact c ON am.tenant_id = c.tenant_id\n  AND am.partner_id = c.id\nWHERE\n  am.tenant_id = $1\n  AND (\n    $2 :: varchar IS NULL\n    OR am.move_type = $2\n  )\n  AND (\n    $3 :: varchar IS NULL\n    OR am.state = $3\n  )\n  AND (\n    $4 :: varchar IS NULL\n    OR am.payment_state = $4\n  )\n  AND (\n    $5 :: uuid IS NULL\n    OR am.partner_id = $5\n  )\n  AND (\n    $6 :: date IS NULL\n    OR am.invoice_date >= $6\n  )\n  AND (\n    $7 :: date IS NULL\n    OR am.invoice_date <= $7\n  )\n  AND (\n    $8 :: varchar IS NULL\n    OR am.name ILIKE $8\n  )\nORDER BY\n  am.invoice_date DESC,\n  am.created_at DESC\nLIMIT\n  $9 OFFSET $10\n" rows_affected=3 rows_returned=3 elapsed=85.06525ms elapsed_secs=0.08506525
2025-11-06T18:17:44.716302Z DEBUG sqlx::query: summary="SELECT COUNT(*) FROM account_move â€¦" db.statement="\n\nSELECT\n  COUNT(*)\nFROM\n  account_move am\nWHERE\n  am.tenant_id = $1\n  AND (\n    $2 :: varchar IS NULL\n    OR am.move_type = $2\n  )\n  AND (\n    $3 :: varchar IS NULL\n    OR am.state = $3\n  )\n  AND (\n    $4 :: varchar IS NULL\n    OR am.payment_state = $4\n  )\n  AND (\n    $5 :: uuid IS NULL\n    OR am.partner_id = $5\n  )\n  AND (\n    $6 :: date IS NULL\n    OR am.invoice_date >= $6\n  )\n  AND (\n    $7 :: date IS NULL\n    OR am.invoice_date <= $7\n  )\n  AND (\n    $8 :: varchar IS NULL\n    OR am.name ILIKE $8\n  )\n" rows_affected=0 rows_returned=1 elapsed=75.282225ms elapsed_secs=0.075282225
2025-11-06T18:17:44.718096Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /list?page=1&limit=10
2025-11-06T18:17:44.893295Z DEBUG sqlx::query: summary="SELECT am.id, am.name, am.move_type, â€¦" db.statement="\n\nSELECT\n  am.id,\n  am.name,\n  am.move_type,\n  am.partner_id,\n  c.name AS partner_name,\n  am.state,\n  am.payment_state,\n  am.invoice_date,\n  am.invoice_date_due,\n  am.ref,\n  am.amount_untaxed,\n  am.amount_tax,\n  am.amount_total,\n  am.amount_residual,\n  am.created_at,\n  am.updated_at\nFROM\n  account_move am\n  LEFT JOIN contact c ON am.tenant_id = c.tenant_id\n  AND am.partner_id = c.id\nWHERE\n  am.tenant_id = $1\n  AND (\n    $2 :: varchar IS NULL\n    OR am.move_type = $2\n  )\n  AND (\n    $3 :: varchar IS NULL\n    OR am.state = $3\n  )\n  AND (\n    $4 :: varchar IS NULL\n    OR am.payment_state = $4\n  )\n  AND (\n    $5 :: uuid IS NULL\n    OR am.partner_id = $5\n  )\n  AND (\n    $6 :: date IS NULL\n    OR am.invoice_date >= $6\n  )\n  AND (\n    $7 :: date IS NULL\n    OR am.invoice_date <= $7\n  )\n  AND (\n    $8 :: varchar IS NULL\n    OR am.name ILIKE $8\n  )\nORDER BY\n  am.invoice_date DESC,\n  am.created_at DESC\nLIMIT\n  $9 OFFSET $10\n" rows_affected=3 rows_returned=3 elapsed=85.885979ms elapsed_secs=0.085885979
2025-11-06T18:17:45.050880Z DEBUG sqlx::query: summary="SELECT COUNT(*) FROM account_move â€¦" db.statement="\n\nSELECT\n  COUNT(*)\nFROM\n  account_move am\nWHERE\n  am.tenant_id = $1\n  AND (\n    $2 :: varchar IS NULL\n    OR am.move_type = $2\n  )\n  AND (\n    $3 :: varchar IS NULL\n    OR am.state = $3\n  )\n  AND (\n    $4 :: varchar IS NULL\n    OR am.payment_state = $4\n  )\n  AND (\n    $5 :: uuid IS NULL\n    OR am.partner_id = $5\n  )\n  AND (\n    $6 :: date IS NULL\n    OR am.invoice_date >= $6\n  )\n  AND (\n    $7 :: date IS NULL\n    OR am.invoice_date <= $7\n  )\n  AND (\n    $8 :: varchar IS NULL\n    OR am.name ILIKE $8\n  )\n" rows_affected=0 rows_returned=1 elapsed=75.918941ms elapsed_secs=0.075918941
2025-11-06T18:18:20.737691Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /users
2025-11-06T18:18:21.015084Z DEBUG sqlx::query: summary="SELECT u.tenant_id, t.name AS â€¦" db.statement="\n\nSELECT\n  u.tenant_id,\n  t.name AS tenant_name,\n  u.user_id,\n  u.email,\n  u.name,\n  u.created_at\nFROM\n  users u\n  JOIN tenant t ON u.tenant_id = t.tenant_id\nORDER BY\n  u.created_at DESC\n" rows_affected=5 rows_returned=5 elapsed=194.260295ms elapsed_secs=0.194260295
2025-11-06T18:18:21.017025Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /users
2025-11-06T18:18:21.278130Z DEBUG sqlx::query: summary="SELECT u.tenant_id, t.name AS â€¦" db.statement="\n\nSELECT\n  u.tenant_id,\n  t.name AS tenant_name,\n  u.user_id,\n  u.email,\n  u.name,\n  u.created_at\nFROM\n  users u\n  JOIN tenant t ON u.tenant_id = t.tenant_id\nORDER BY\n  u.created_at DESC\n" rows_affected=5 rows_returned=5 elapsed=183.710055ms elapsed_secs=0.183710055
2025-11-06T18:18:22.981347Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /list
2025-11-06T18:18:23.241998Z DEBUG sqlx::query: summary="SELECT id, COALESCE(NULLIF(name,''), display_name, â€¦" db.statement="\n\nSELECT\n  id,\n  COALESCE(\n    NULLIF(name, ''),\n    display_name,\n    email,\n    phone,\n    '(khÃ´ng tÃªn)'\n  ) AS \"name!: String\",\n  display_name,\n  email,\n  phone,\n  is_company,\n  NULLIF(tags_cached, '') AS \"tags?: String\",\n  state,\n  created_at,\n  updated_at,\n  national_id AS \"national_id?: String\" -- ðŸ‘ˆ THÃŠM\nFROM\n  contact\nWHERE\n  tenant_id = $1\n  AND (\n    $2 :: bool IS NULL\n    OR is_company = $2\n  )\nORDER BY\n  created_at DESC\nLIMIT\n  $3 OFFSET $4\n" rows_affected=12 rows_returned=12 elapsed=171.936912ms elapsed_secs=0.171936912
2025-11-06T18:18:23.245263Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /list
2025-11-06T18:18:23.399271Z DEBUG sqlx::query: summary="SELECT id, COALESCE(NULLIF(name,''), display_name, â€¦" db.statement="\n\nSELECT\n  id,\n  COALESCE(\n    NULLIF(name, ''),\n    display_name,\n    email,\n    phone,\n    '(khÃ´ng tÃªn)'\n  ) AS \"name!: String\",\n  display_name,\n  email,\n  phone,\n  is_company,\n  NULLIF(tags_cached, '') AS \"tags?: String\",\n  state,\n  created_at,\n  updated_at,\n  national_id AS \"national_id?: String\" -- ðŸ‘ˆ THÃŠM\nFROM\n  contact\nWHERE\n  tenant_id = $1\n  AND (\n    $2 :: bool IS NULL\n    OR is_company = $2\n  )\nORDER BY\n  created_at DESC\nLIMIT\n  $3 OFFSET $4\n" rows_affected=12 rows_returned=12 elapsed=75.21381ms elapsed_secs=0.07521381
2025-11-06T18:18:28.924073Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /list?is_company=true&limit=200
2025-11-06T18:18:29.096798Z DEBUG sqlx::query: summary="SELECT id, COALESCE(NULLIF(name,''), display_name, â€¦" db.statement="\n\nSELECT\n  id,\n  COALESCE(\n    NULLIF(name, ''),\n    display_name,\n    email,\n    phone,\n    '(khÃ´ng tÃªn)'\n  ) AS \"name!: String\",\n  display_name,\n  email,\n  phone,\n  is_company,\n  NULLIF(tags_cached, '') AS \"tags?: String\",\n  state,\n  created_at,\n  updated_at,\n  national_id AS \"national_id?: String\" -- ðŸ‘ˆ THÃŠM\nFROM\n  contact\nWHERE\n  tenant_id = $1\n  AND (\n    $2 :: bool IS NULL\n    OR is_company = $2\n  )\nORDER BY\n  created_at DESC\nLIMIT\n  $3 OFFSET $4\n" rows_affected=7 rows_returned=7 elapsed=80.508164ms elapsed_secs=0.080508164
2025-11-06T18:18:29.103531Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /list?is_company=true&limit=200
2025-11-06T18:18:29.264401Z DEBUG sqlx::query: summary="SELECT id, COALESCE(NULLIF(name,''), display_name, â€¦" db.statement="\n\nSELECT\n  id,\n  COALESCE(\n    NULLIF(name, ''),\n    display_name,\n    email,\n    phone,\n    '(khÃ´ng tÃªn)'\n  ) AS \"name!: String\",\n  display_name,\n  email,\n  phone,\n  is_company,\n  NULLIF(tags_cached, '') AS \"tags?: String\",\n  state,\n  created_at,\n  updated_at,\n  national_id AS \"national_id?: String\" -- ðŸ‘ˆ THÃŠM\nFROM\n  contact\nWHERE\n  tenant_id = $1\n  AND (\n    $2 :: bool IS NULL\n    OR is_company = $2\n  )\nORDER BY\n  created_at DESC\nLIMIT\n  $3 OFFSET $4\n" rows_affected=7 rows_returned=7 elapsed=74.787866ms elapsed_secs=0.074787866
2025-11-06T18:18:29.529550Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /list
2025-11-06T18:18:29.691430Z DEBUG sqlx::query: summary="SELECT id, COALESCE(NULLIF(name,''), display_name, â€¦" db.statement="\n\nSELECT\n  id,\n  COALESCE(\n    NULLIF(name, ''),\n    display_name,\n    email,\n    phone,\n    '(khÃ´ng tÃªn)'\n  ) AS \"name!: String\",\n  display_name,\n  email,\n  phone,\n  is_company,\n  NULLIF(tags_cached, '') AS \"tags?: String\",\n  state,\n  created_at,\n  updated_at,\n  national_id AS \"national_id?: String\" -- ðŸ‘ˆ THÃŠM\nFROM\n  contact\nWHERE\n  tenant_id = $1\n  AND (\n    $2 :: bool IS NULL\n    OR is_company = $2\n  )\nORDER BY\n  created_at DESC\nLIMIT\n  $3 OFFSET $4\n" rows_affected=12 rows_returned=12 elapsed=80.211897ms elapsed_secs=0.080211897
2025-11-06T18:18:29.692797Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /list
2025-11-06T18:18:29.842616Z DEBUG sqlx::query: summary="SELECT id, COALESCE(NULLIF(name,''), display_name, â€¦" db.statement="\n\nSELECT\n  id,\n  COALESCE(\n    NULLIF(name, ''),\n    display_name,\n    email,\n    phone,\n    '(khÃ´ng tÃªn)'\n  ) AS \"name!: String\",\n  display_name,\n  email,\n  phone,\n  is_company,\n  NULLIF(tags_cached, '') AS \"tags?: String\",\n  state,\n  created_at,\n  updated_at,\n  national_id AS \"national_id?: String\" -- ðŸ‘ˆ THÃŠM\nFROM\n  contact\nWHERE\n  tenant_id = $1\n  AND (\n    $2 :: bool IS NULL\n    OR is_company = $2\n  )\nORDER BY\n  created_at DESC\nLIMIT\n  $3 OFFSET $4\n" rows_affected=12 rows_returned=12 elapsed=73.917209ms elapsed_secs=0.073917209
2025-11-06T18:18:34.638374Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /list?page=1&limit=10
2025-11-06T18:18:34.807675Z DEBUG sqlx::query: summary="SELECT am.id, am.name, am.move_type, â€¦" db.statement="\n\nSELECT\n  am.id,\n  am.name,\n  am.move_type,\n  am.partner_id,\n  c.name AS partner_name,\n  am.state,\n  am.payment_state,\n  am.invoice_date,\n  am.invoice_date_due,\n  am.ref,\n  am.amount_untaxed,\n  am.amount_tax,\n  am.amount_total,\n  am.amount_residual,\n  am.created_at,\n  am.updated_at\nFROM\n  account_move am\n  LEFT JOIN contact c ON am.tenant_id = c.tenant_id\n  AND am.partner_id = c.id\nWHERE\n  am.tenant_id = $1\n  AND (\n    $2 :: varchar IS NULL\n    OR am.move_type = $2\n  )\n  AND (\n    $3 :: varchar IS NULL\n    OR am.state = $3\n  )\n  AND (\n    $4 :: varchar IS NULL\n    OR am.payment_state = $4\n  )\n  AND (\n    $5 :: uuid IS NULL\n    OR am.partner_id = $5\n  )\n  AND (\n    $6 :: date IS NULL\n    OR am.invoice_date >= $6\n  )\n  AND (\n    $7 :: date IS NULL\n    OR am.invoice_date <= $7\n  )\n  AND (\n    $8 :: varchar IS NULL\n    OR am.name ILIKE $8\n  )\nORDER BY\n  am.invoice_date DESC,\n  am.created_at DESC\nLIMIT\n  $9 OFFSET $10\n" rows_affected=3 rows_returned=3 elapsed=84.044473ms elapsed_secs=0.084044473
2025-11-06T18:18:34.964439Z DEBUG sqlx::query: summary="SELECT COUNT(*) FROM account_move â€¦" db.statement="\n\nSELECT\n  COUNT(*)\nFROM\n  account_move am\nWHERE\n  am.tenant_id = $1\n  AND (\n    $2 :: varchar IS NULL\n    OR am.move_type = $2\n  )\n  AND (\n    $3 :: varchar IS NULL\n    OR am.state = $3\n  )\n  AND (\n    $4 :: varchar IS NULL\n    OR am.payment_state = $4\n  )\n  AND (\n    $5 :: uuid IS NULL\n    OR am.partner_id = $5\n  )\n  AND (\n    $6 :: date IS NULL\n    OR am.invoice_date >= $6\n  )\n  AND (\n    $7 :: date IS NULL\n    OR am.invoice_date <= $7\n  )\n  AND (\n    $8 :: varchar IS NULL\n    OR am.name ILIKE $8\n  )\n" rows_affected=0 rows_returned=1 elapsed=76.151683ms elapsed_secs=0.076151683
2025-11-06T18:18:34.968672Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /list?page=1&limit=10
2025-11-06T18:18:35.138868Z DEBUG sqlx::query: summary="SELECT am.id, am.name, am.move_type, â€¦" db.statement="\n\nSELECT\n  am.id,\n  am.name,\n  am.move_type,\n  am.partner_id,\n  c.name AS partner_name,\n  am.state,\n  am.payment_state,\n  am.invoice_date,\n  am.invoice_date_due,\n  am.ref,\n  am.amount_untaxed,\n  am.amount_tax,\n  am.amount_total,\n  am.amount_residual,\n  am.created_at,\n  am.updated_at\nFROM\n  account_move am\n  LEFT JOIN contact c ON am.tenant_id = c.tenant_id\n  AND am.partner_id = c.id\nWHERE\n  am.tenant_id = $1\n  AND (\n    $2 :: varchar IS NULL\n    OR am.move_type = $2\n  )\n  AND (\n    $3 :: varchar IS NULL\n    OR am.state = $3\n  )\n  AND (\n    $4 :: varchar IS NULL\n    OR am.payment_state = $4\n  )\n  AND (\n    $5 :: uuid IS NULL\n    OR am.partner_id = $5\n  )\n  AND (\n    $6 :: date IS NULL\n    OR am.invoice_date >= $6\n  )\n  AND (\n    $7 :: date IS NULL\n    OR am.invoice_date <= $7\n  )\n  AND (\n    $8 :: varchar IS NULL\n    OR am.name ILIKE $8\n  )\nORDER BY\n  am.invoice_date DESC,\n  am.created_at DESC\nLIMIT\n  $9 OFFSET $10\n" rows_affected=3 rows_returned=3 elapsed=84.485045ms elapsed_secs=0.084485045
2025-11-06T18:18:35.291968Z DEBUG sqlx::query: summary="SELECT COUNT(*) FROM account_move â€¦" db.statement="\n\nSELECT\n  COUNT(*)\nFROM\n  account_move am\nWHERE\n  am.tenant_id = $1\n  AND (\n    $2 :: varchar IS NULL\n    OR am.move_type = $2\n  )\n  AND (\n    $3 :: varchar IS NULL\n    OR am.state = $3\n  )\n  AND (\n    $4 :: varchar IS NULL\n    OR am.payment_state = $4\n  )\n  AND (\n    $5 :: uuid IS NULL\n    OR am.partner_id = $5\n  )\n  AND (\n    $6 :: date IS NULL\n    OR am.invoice_date >= $6\n  )\n  AND (\n    $7 :: date IS NULL\n    OR am.invoice_date <= $7\n  )\n  AND (\n    $8 :: varchar IS NULL\n    OR am.name ILIKE $8\n  )\n" rows_affected=0 rows_returned=1 elapsed=74.487133ms elapsed_secs=0.074487133
2025-11-06T18:21:59.199975Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /profile
2025-11-06T18:21:59.201182Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /profile
2025-11-06T18:21:59.517977Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /list?page=1&limit=10
2025-11-06T18:21:59.696316Z DEBUG sqlx::query: summary="SELECT am.id, am.name, am.move_type, â€¦" db.statement="\n\nSELECT\n  am.id,\n  am.name,\n  am.move_type,\n  am.partner_id,\n  c.name AS partner_name,\n  am.state,\n  am.payment_state,\n  am.invoice_date,\n  am.invoice_date_due,\n  am.ref,\n  am.amount_untaxed,\n  am.amount_tax,\n  am.amount_total,\n  am.amount_residual,\n  am.created_at,\n  am.updated_at\nFROM\n  account_move am\n  LEFT JOIN contact c ON am.tenant_id = c.tenant_id\n  AND am.partner_id = c.id\nWHERE\n  am.tenant_id = $1\n  AND (\n    $2 :: varchar IS NULL\n    OR am.move_type = $2\n  )\n  AND (\n    $3 :: varchar IS NULL\n    OR am.state = $3\n  )\n  AND (\n    $4 :: varchar IS NULL\n    OR am.payment_state = $4\n  )\n  AND (\n    $5 :: uuid IS NULL\n    OR am.partner_id = $5\n  )\n  AND (\n    $6 :: date IS NULL\n    OR am.invoice_date >= $6\n  )\n  AND (\n    $7 :: date IS NULL\n    OR am.invoice_date <= $7\n  )\n  AND (\n    $8 :: varchar IS NULL\n    OR am.name ILIKE $8\n  )\nORDER BY\n  am.invoice_date DESC,\n  am.created_at DESC\nLIMIT\n  $9 OFFSET $10\n" rows_affected=3 rows_returned=3 elapsed=87.374644ms elapsed_secs=0.087374644
2025-11-06T18:21:59.849268Z DEBUG sqlx::query: summary="SELECT COUNT(*) FROM account_move â€¦" db.statement="\n\nSELECT\n  COUNT(*)\nFROM\n  account_move am\nWHERE\n  am.tenant_id = $1\n  AND (\n    $2 :: varchar IS NULL\n    OR am.move_type = $2\n  )\n  AND (\n    $3 :: varchar IS NULL\n    OR am.state = $3\n  )\n  AND (\n    $4 :: varchar IS NULL\n    OR am.payment_state = $4\n  )\n  AND (\n    $5 :: uuid IS NULL\n    OR am.partner_id = $5\n  )\n  AND (\n    $6 :: date IS NULL\n    OR am.invoice_date >= $6\n  )\n  AND (\n    $7 :: date IS NULL\n    OR am.invoice_date <= $7\n  )\n  AND (\n    $8 :: varchar IS NULL\n    OR am.name ILIKE $8\n  )\n" rows_affected=0 rows_returned=1 elapsed=74.495568ms elapsed_secs=0.074495568
2025-11-06T18:21:59.850887Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /list?page=1&limit=10
2025-11-06T18:21:59.922691Z DEBUG rustls::common_state: Sending warning alert CloseNotify
2025-11-06T18:22:00.023084Z DEBUG sqlx::query: summary="SELECT am.id, am.name, am.move_type, â€¦" db.statement="\n\nSELECT\n  am.id,\n  am.name,\n  am.move_type,\n  am.partner_id,\n  c.name AS partner_name,\n  am.state,\n  am.payment_state,\n  am.invoice_date,\n  am.invoice_date_due,\n  am.ref,\n  am.amount_untaxed,\n  am.amount_tax,\n  am.amount_total,\n  am.amount_residual,\n  am.created_at,\n  am.updated_at\nFROM\n  account_move am\n  LEFT JOIN contact c ON am.tenant_id = c.tenant_id\n  AND am.partner_id = c.id\nWHERE\n  am.tenant_id = $1\n  AND (\n    $2 :: varchar IS NULL\n    OR am.move_type = $2\n  )\n  AND (\n    $3 :: varchar IS NULL\n    OR am.state = $3\n  )\n  AND (\n    $4 :: varchar IS NULL\n    OR am.payment_state = $4\n  )\n  AND (\n    $5 :: uuid IS NULL\n    OR am.partner_id = $5\n  )\n  AND (\n    $6 :: date IS NULL\n    OR am.invoice_date >= $6\n  )\n  AND (\n    $7 :: date IS NULL\n    OR am.invoice_date <= $7\n  )\n  AND (\n    $8 :: varchar IS NULL\n    OR am.name ILIKE $8\n  )\nORDER BY\n  am.invoice_date DESC,\n  am.created_at DESC\nLIMIT\n  $9 OFFSET $10\n" rows_affected=3 rows_returned=3 elapsed=84.669456ms elapsed_secs=0.084669456
2025-11-06T18:22:00.277794Z DEBUG rustls::client::hs: No cached session for DnsName("ap-southeast-1.e4c6174f-6538-4e47-93bf-0a2503819047.aws.yugabyte.cloud")
2025-11-06T18:22:00.278005Z DEBUG rustls::client::hs: Not resuming any session
2025-11-06T18:22:00.414942Z DEBUG rustls::client::hs: Using ciphersuite TLS13_AES_256_GCM_SHA384
2025-11-06T18:22:00.415056Z DEBUG rustls::client::tls13: Not resuming
2025-11-06T18:22:00.415242Z DEBUG rustls::client::tls13: TLS1.3 encrypted extensions: []
2025-11-06T18:22:00.415283Z DEBUG rustls::client::hs: ALPN protocol is None
2025-11-06T18:22:00.415322Z DEBUG rustls::client::tls13: Got CertificateRequest CertificateRequestPayloadTLS13 { context: , extensions: [SignatureAlgorithms([ECDSA_NISTP256_SHA256, ECDSA_NISTP384_SHA384, ECDSA_NISTP521_SHA512, ED25519, ED448, Unknown(2057), Unknown(2058), Unknown(2059), RSA_PSS_SHA256, RSA_PSS_SHA384, RSA_PSS_SHA512, RSA_PKCS1_SHA256, RSA_PKCS1_SHA384, RSA_PKCS1_SHA512, Unknown(771), Unknown(769)]), AuthorityNames([DistinguishedName(305b31153013060355040a130c597567616279746520496e633142304006035504030c392a2e65346336313734662d363533382d346534372d393362662d3061323530333831393034372e6177732e79756761627974652e636c6f7564), DistinguishedName(30818b310b3009060355040613025553310b3009060355040813024341311230100603550407130953756e6e7976616c6531153013060355040a130c597567616279746520496e6331173015060355040b130e597567616279746520436c6f7564312b302906035504031322597567616279746520436c6f7564205375626f7264696e6174652043412070726f64), DistinguishedName(308184310b3009060355040613025553310b3009060355040813024341311230100603550407130953756e6e7976616c6531153013060355040a130c597567616279746520496e6331173015060355040b130e597567616279746520436c6f7564312430220603550403131b597567616279746520436c6f756420526f6f742043412070726f64)])] }
2025-11-06T18:22:00.415401Z DEBUG rustls::client::common: Client auth requested but no cert/sigscheme available
2025-11-06T18:22:00.848819Z DEBUG sqlx::query: summary="SELECT COUNT(*) FROM account_move â€¦" db.statement="\n\nSELECT\n  COUNT(*)\nFROM\n  account_move am\nWHERE\n  am.tenant_id = $1\n  AND (\n    $2 :: varchar IS NULL\n    OR am.move_type = $2\n  )\n  AND (\n    $3 :: varchar IS NULL\n    OR am.state = $3\n  )\n  AND (\n    $4 :: varchar IS NULL\n    OR am.payment_state = $4\n  )\n  AND (\n    $5 :: uuid IS NULL\n    OR am.partner_id = $5\n  )\n  AND (\n    $6 :: date IS NULL\n    OR am.invoice_date >= $6\n  )\n  AND (\n    $7 :: date IS NULL\n    OR am.invoice_date <= $7\n  )\n  AND (\n    $8 :: varchar IS NULL\n    OR am.name ILIKE $8\n  )\n" rows_affected=0 rows_returned=1 elapsed=259.071346ms elapsed_secs=0.259071346
2025-11-06T18:22:00.990263Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /list?limit=100&is_company=true
2025-11-06T18:22:01.153182Z DEBUG sqlx::query: summary="SELECT id, COALESCE(NULLIF(name,''), display_name, â€¦" db.statement="\n\nSELECT\n  id,\n  COALESCE(\n    NULLIF(name, ''),\n    display_name,\n    email,\n    phone,\n    '(khÃ´ng tÃªn)'\n  ) AS \"name!: String\",\n  display_name,\n  email,\n  phone,\n  is_company,\n  NULLIF(tags_cached, '') AS \"tags?: String\",\n  state,\n  created_at,\n  updated_at,\n  national_id AS \"national_id?: String\" -- ðŸ‘ˆ THÃŠM\nFROM\n  contact\nWHERE\n  tenant_id = $1\n  AND (\n    $2 :: bool IS NULL\n    OR is_company = $2\n  )\nORDER BY\n  created_at DESC\nLIMIT\n  $3 OFFSET $4\n" rows_affected=7 rows_returned=7 elapsed=80.349769ms elapsed_secs=0.080349769
2025-11-06T18:22:01.154851Z DEBUG milan::core::auth: ðŸ” Middleware nháº­n request: /list?limit=100&is_company=true
2025-11-06T18:22:01.418901Z DEBUG sqlx::query: summary="SELECT id, COALESCE(NULLIF(name,''), display_name, â€¦" db.statement="\n\nSELECT\n  id,\n  COALESCE(\n    NULLIF(name, ''),\n    display_name,\n    email,\n    phone,\n    '(khÃ´ng tÃªn)'\n  ) AS \"name!: String\",\n  display_name,\n  email,\n  phone,\n  is_company,\n  NULLIF(tags_cached, '') AS \"tags?: String\",\n  state,\n  created_at,\n  updated_at,\n  national_id AS \"national_id?: String\" -- ðŸ‘ˆ THÃŠM\nFROM\n  contact\nWHERE\n  tenant_id = $1\n  AND (\n    $2 :: bool IS NULL\n    OR is_company = $2\n  )\nORDER BY\n  created_at DESC\nLIMIT\n  $3 OFFSET $4\n" rows_affected=7 rows_returned=7 elapsed=192.247759ms elapsed_secs=0.192247759
